% ------------------------------------------------------------------------------
% Formatvorlage für Masterarbeiten an der Ohm-Hochschule Nürnberg
% ------------------------------------------------------------------------------
%   erstellt von Stefan Macke, 24.04.2009
%   http://blog.stefan-macke.de

% Dokumentenkopf ---------------------------------------------------------------
%   Diese Vorlage basiert auf "scrreprt" aus dem koma-script.
% ------------------------------------------------------------------------------
\documentclass[
    11pt, % Schriftgröße
    DIV10,
    ngerman, % für Umlaute, Silbentrennung etc.
    a4paper, % Papierformat
    oneside, % einseitiges Dokument
    titlepage, % es wird eine Titelseite verwendet
    parskip=half, % Abstand zwischen Absätzen (halbe Zeile)
    headings=normal, % Größe der Überschriften verkleinern
    listof=totocnumbered, % Verzeichnisse im Inhaltsverzeichnis aufführen
    bibliography=totocnumbered, % Literaturverzeichnis im Inhaltsverzeichnis aufführen
    index=totoc, % Index im Inhaltsverzeichnis aufführen
    captions=tableheading, % Beschriftung von Tabellen unterhalb ausgeben
    final % Status des Dokuments (final/draft)
]{scrreprt}

% Meta-Informationen -----------------------------------------------------------
%   Informationen über das Dokument, wie z.B. Titel, Autor, Matrikelnr. etc
%   werden in der Datei Meta.tex definiert und können danach global
%   verwendet werden.
% ------------------------------------------------------------------------------
\input{Meta}

% benötigte Packages -----------------------------------------------------------
%   LaTeX-Packages, die benötigt werden, sind in die Datei Packages.tex
%   "ausgelagert", um diese Vorlage möglichst übersichtlich zu halten.
% ------------------------------------------------------------------------------
\input{Packages}

% Erstellung eines Index und Abkürzungsverzeichnisses aktivieren ---------------
\makeindex
\makenomenclature

% Kopf- und Fußzeilen, Seitenränder etc. ---------------------------------------
\input{Seitenstil}

% eigene Definitionen für Silbentrennung
\include{Silbentrennung}

% eigene LaTeX-Befehle
\include{Befehle}

% Das eigentliche Dokument -----------------------------------------------------
%   Der eigentliche Inhalt des Dokuments beginnt hier. 
% ------------------------------------------------------------------------------
\begin{document}
\pagenumbering{arabic}
% auch subsubsection nummerieren
\setcounter{secnumdepth}{1}
\setcounter{tocdepth}{1}

% Deckblatt und Abstract ohne Seitenzahl
%\ofoot{}
\include{Deckblatt}
\include{Erklaerung} % Selbständigkeitserklärung

\addchap{Abstract}
\label{sec:Abstract}
The \LinkWithoutDate{http://assistenzplaner.de/}{Assistance Planner} is a server-based application created to support people with physical disabilities (clients) with coordinating and planning assistance from their personal assistance team. The assistance teams provide personal support to their clients in their everyday lives enabling them to live an independent life. The duration for these services can vary from a couple of hours per day to an entire day.
 
The application includes the creation of service schedules and managing tasks.

With the Assistance Planner the client has the possibility to manage his assistance team. In addition to the contact details the client is able to define priority settings and allocate the hours of every assistant individually.

The client can define service times in advance and submit them to the service providers with the monthly planning function. This function also allows service providers to advise and request their appointments by registering in a calendar.

An algorithm automatically constructs service plan recommendations based on the client's preferences and the most uniform utilization of time allocation as possible. The client is able to choose from multiple service plan recommendations as well as customizing the service plan manually.

The task-management administration completes the Assistance Planner.

This Master's Thesis begins with an introduction detailing the inspiration for the Assistance Planner followed by an explanation of the requirements. Market analysis has verified that a solution has not already been developed to fulfill all of the requirements. The chapters \enquote{Software-Design} and \enquote{Implementierung} display how the author realized the requirements. The next chapter is devoted to the conversion into practical application. Following the consideration of the results, a conclusion demonstrating some improvement and expansion opportunities is presented.

\addchap{Kurzfassung}
\label{sec:Zusammenfassung}
Der \LinkWithoutDate{http://assistenzplaner.de/}{Assistenzplaner} wurde als serverbasierte Anwendung geschaffen, um körperlich behinderte Menschen (Klienten) und ihre Assistenz-Teams bei der Planung zu unterstützen. Im Assistenz-Team arbeiten Menschen, die den Klienten im alltäglichen Leben mit persönlicher Assistenz unterstützen und ihm dadurch ein selbstbestimmtes Leben ermöglichen. Die Dienstzeiten der Assistenten können von wenigen Stunden am Tag bis zu einem ganzen Tag variieren.

Die Planung umfasst die Erstellung von Dienstplänen und die Verwaltung von Aufgaben.

Mit dem Assistenzplaner hat der Klient die Möglichkeit, sein Assistenz-Team zu verwalten. Dabei kann der Klient neben den Kontaktdaten auch Priorisierungswerte und Stundenkontigente der Assistenen definieren.

Der Klient kann mit dem Monats-Plan die Dienstzeiten für einen Monat festlegen. Seine Assistenten werden per Knopfdruck benachrichtigt und gebeten ihre Termine in einen Kalender einzutragen.

Ein Algorithmus erstellt automatisch einen Dienstplanvorschlag, der alle Vorlieben des Klienten und die möglichst gleichmäßige Ausschöpfung der Stundenkontigente berücksichtigt. Der Klient kann sich mehrere Dienstplanvorschläge erstellen lassen. Weiterhin ist es möglich, den Dienstplan manuell anzupassen.

Eine Aufgaben-Verwaltung rundet den Assistenzplaner ab.

In der vorliegenden Ausarbeitung wird zunächst die Motivation dargestellt. Daraufhin werden nach einem einleitenden Grundlagenteil die Anforderungen erläutert. Bei einer Marktanalyse wird verifiziert, dass es noch keine bestehende Lösung gibt, die alle Anforderungen erfüllt. Die Kapitel Software-Design und Implementierung zeigen die Umsetzung der Anforderungen. Das darauf folgende Kapitel widmet sich der Überführung in den Produktiv-Betrieb. Nach einer Betrachtung des Ergebnisses schließt die Arbeit mit einem Fazit ab, in dem einige Verbesserungs- und Erweiterungsmöglichkeiten aufgezeigt werden.

%Mit dem Assistenzplaner ist es unter anderem möglich:
%\begin{itemize}
%\item Assistenz-Teams zu verwalten
%\item Automatisiert Dienstpläne zu erstellen
%\item Aufgaben der Assistenten zu verwalten
%\end{itemize}

%Der Assistenzplaner berücksichtigt die Vorlieben des Klienten bei der Dienstplanerstellung. Parallel fließen freie Termine der Assistenten für Dienste und
%Bereitschaften ein. Innerhalb kurzer Zeit erzeugt die serverbasierte Anwendung Vorschläge für Dienstpläne, die sich nachträglich individuell anpassen lassen. Der Assistenzplaner als Open-Source-Projekt bei \LinkWithoutDate{https://github.com/Ulle84/AssistancePlaner}{GitHub} für jederman verfügbar. 

%Die entstandene Lösung ist kostenfrei, einfach zu installieren und leicht zu bedienen.

\addchap{Danksagung}
Ich danke Herrn Prof. Dr. Mahr für die Betreuung und Begutachtung dieser Masterarbeit. 
Weiterhin danke ich Herrn Prof. Dr. Lano für das Zweitgutachten.\\

Herzlicher Dank geht an Patrick! Ohne ihn wäre diese Arbeit nicht entstanden. Er hat maßgeblich die Anforderungen gestellt und bereitwillig mit seinem Team die Software getestet.\\

Ich danke Frederik sehr für die vielen Skype-Gespräche, das gegenseitige Motivieren und die zahlreichen Korrekturanregungen.\\

Vielen Dank geht an Dorothea und Justin, die die Kurzfassung ins Englische übersetzt haben.\\

Melanie danke ich vielmals für die vielen Korrekturanregungen und die Gastfreundschaft während der Präsenz-Phasen des Studiums.\\

Meinen Eltern danke ich sehr herzlich für alles, was sie mir ermöglicht und auf den Weg gegeben haben!\\

Unendlich dankbar bin ich meiner Frau Marielle! Sie hat mich während des gesamten Studiums verständnisvoll unterstützt und mir den Rücken frei gehalten. Weiterhin hat sie wertvolle Anregungen und Korrekturvorschläge beigetragen.

\addchap{Vorbemerkung}
Zur Erhöhung der Lesbarkeit wurde die männliche Form gewählt (generisches Maskulinum). Leserinnen dieser Arbeit dürfen sich trotz dieser Vereinfachung ebenfalls angesprochen fühlen.

\tableofcontents % Inhaltsverzeichnis

\chapter{Motivation}
Viele Menschen mit körperlicher Behinderung sind auf persönliche Assistenz angewiesen. Diese Assistanz umfasst neben der Pflege auch die Erfüllung alltäglicher Aufgaben. Mit Hilfe persönlicher Assistenz wird ein selbstbestimmtes Leben ermöglicht. 

In dieser Ausarbeitung wird ein körperlich behinderter Mensch (im folgenden \enquote{Klient} genannt) herausgegriffen. Dieser Klient hat sieben Assistenten. Die Verwaltung geschieht über einen Dienstplan. Bisher erstellte der Klient den Dienstplan jeden Monat manuell. Der Klient hat gleichzeitig die sieben E-Mails seiner Assistenten überblickt (in denen mögliche Arbeits-Termine enthalten waren) und einen möglichst ausgewogenen Dienstplan erstellt. Der Dienstplan sollte die Verfügbarkeiten und die Stundenkontingente der Assistenten möglichst gut berücksichtigen. Das manuelle Erstellen des Dienstplans dauerte ca. vier Stunden pro Monat.

Um den Klienten zu entlasten und technisch besser zu unterstützen, wurde die Idee des Assistenzplaners ins Leben gerufen. Der Assistenzplaner soll als webbasierte Anwendung den Klienten und sein Team bei der Dienstplanerstellung unterstützen. Der Klient und alle Assistenten erhalten einen personalisierten Zugang zum Assistenzplaner und können alle nötigen Informationen austauschen. Ein Algorithmus erstellt den Dienstplan unter Berücksichtigung aller Vorlieben des Klienten und der Stundenkontingente der Assistenten. Der Zeitaufwand für die Dienstplanerstellung sollte auf wenige Minuten sinken.

\chapter{Grundlagen}
In diesem Kapitel werden die technischen Grundlagen für das Verständnis der vorliegenden Arbeit gelegt.

\section{Netzwerke und Internet}
\subsection{Client/Server-Paradigma}
\enquote{Netzwerkanwendungen arbeiten in einer Kommunikationsform, die man Client/Server-Paradigma nennt. Die Serveranwendung wartet passiv auf Kontaktaufnahme, während die Clientanwendung die Kommunikation aktiv einleitet.} \cite[S.~405]{comer2002computernetzwerke}

\subsection{Clientsoftware}
Nach \cite[S.~406]{comer2002computernetzwerke} weist die Clientsoftware unter anderem folgende Merkmale auf:
\begin{itemize}
\item Sie \enquote{ist ein Anwendungsprogramm, die vorübergehend zum Client wird, wenn entfernter Zugriff notwendig ist, das lokal aber auch andere Aufgaben ausführt.}
\item Sie \enquote{läuft lokal auf dem Personalcomputer eines Benutzers.}
\item Sie \enquote{leitet den Kontakt mit einem Server aktiv ein.}
\item Sie \enquote{benötigt keine spezielle Hardware oder ein besonderes Betriebssystem.}
\end{itemize}


\subsection{Serversoftware}
Nach \cite[S.~406]{comer2002computernetzwerke} weist die Serversoftware unter anderem folgende Merkmale auf:
\begin{itemize}
\item Sie \enquote{ist ein dediziertes Programm mit dem speziellen Zweck, einen Dienst bereitzustellen, kann aber auch gleichzeitig mehrere entfernte Clients bedienen.}
\item Sie \enquote{läuft auf einem gemeinsam genutzten Computer.}
\item Sie \enquote{wartet passiv auf die Verbindungsaufnahme durch einen entfernten Client.}
\item Sie \enquote{nimmt den Kommunikationswunsch von beliebigen Clients entgegen, bietet aber nur einen Dienst.}
\item Sie \enquote{setzt leistungsstarke Hardware und ein gehobenes Betriebssystem voraus.}
\end{itemize}

\subsection{URL}
\NewAbb{URL}{Uniform Resource Locator} ist ein Syntaxformat, das alle Informationen kodiert, die zum Erreichen einer Webseite notwendig sind. Die URL hat folgendes Format:

\qquad protokoll://domainNameComputer:port/dokumentName

Die Angabe eines Ports ist optional.

Ein Beispiel für eine URL ist die Startseite des Assistenzplaners: 

\qquad http://assistenzplaner.de/index.html

\subsection{Browser}
\enquote{Ein Browser ist ein interaktives Programm, mit dem ein Benutzer Informationen aus dem Web lesen kann. Die Informationen enthalten wählbare Elemente, über die der Benutzer weitere Informationen anzeigen lassen kann.} \cite[S.~489]{comer2002computernetzwerke} 

\subsection{Link}
\label{sec:Link}
Link (manchmal auch Hyperlink) ist der umgangssprachliche Begriff für eine Hypertext-Referenz. \enquote{Im Browser ist eine Hypertext-Referenz in einem angezeigten Dokument zunächst ein wählbares Element. Wählt der Benutzer das Element, folgt der Browser der Referenz, holt das betreffende Dokument und ersetzt die momentane Anzeige durch das neue Dokument.} \cite[S.~496]{comer2002computernetzwerke} 


\subsection{HTTP}
\enquote{Die Interaktion zwischen einem Browser und einem Webserver erfolgt über das \NewAbb{HTTP}{Hypertext Transport Protocol}. HTTP erlaubt es dem Browser, ein bestimmtes Element anzufordern, das der Server ausgibt. In der Praxis ist HTTP aber komplexer, weil ein Server zusätzliche Statusinformationen mit jedem Transfer sendet und das Protokoll es einem Browser gestattet, Informationen zu senden und anzufordern.} \cite[S.~497]{comer2002computernetzwerke}

\enquote{HTTP unterstützt vier Basisoperationen, die ein Browser in einer Anfrage spezifizieren kann:
\begin{itemize}
\item \Fachbegriff{GET} verlangt ein spezifisches Element vom Server. Der Server gibt einen Kopf (HEAD) zurück, der Statusinformation, gefolgt von einer Leerzeile und dem Element, enhält.
\item \Fachbegriff{HEAD} verlangt Statusinformationen über ein Element. Der Server gibt den Status zurück, jedoch ohne Kopie des Elements selbst.
\item \Fachbegriff{POST} sendet Daten an den Server. Der Server hängt die Daten an ein spezifisches Element an (z. B. wird eine Nachricht an eine Nachrichtenliste angehängt).
\item \Fachbegriff{PUT} sendet Daten an den Server. Der Server benutzt die Daten, um ein spezifisches Element zu ersetzten.
\end{itemize}
Ein Browser erzeugt eine HTTP-Anfrage, wenn ein Benutzer eine URL eingibt oder einen Link wählt. In beiden Fällen sendet der Browser eine GET-Anfrage, die ein Element spezifiziert, und der Server gibt ihm das angefragte Element zurück.} \cite[S.~497]{comer2002computernetzwerke}

\subsection{Webdokumente}
\label{sec:webdokumente}
Es gibt drei verschiedene Typen von Webdokumenten \cite[S.~508]{comer2002computernetzwerke}:
\begin{itemize}
\item Statisch: Das Dokument ist fest in einer Datei definiert. Der Autor bestimmt einmalig bei Erstellung den Inhalt. Jede Anfrage an das statische Dokument führt zeitlich unabhängig zur identischen Ausgabe. Das statische Verhalten kann technisch mit starren HTML-Seiten realisiert werden.
\item Dynamisch: Das Dokument ist nicht fest definiert. Sobald eine Anfrage an den Webserver gestellt wird, wird das dynamische Webdokument zusammengestellt. Der Inhalt des dynamischen Dokumentes kann sich von Anfrage zu Anfrage ändern. Das dynamische Verhalten kann mit Server-Script-Sprachen wie z. B. PHP realisiert werden. 
\item Aktiv: Das aktive Dokument wird vom Client erstellt. Der Server liefert lediglich das Programm zur Erstellung des Dokumentes aus. Die konkrete Struktur des Dokumentes wird im Client zusammengebaut. Die benötigten Inhalte werden vom Client beim Server angefragt. Das aktive Verhalten kann mit Client-Script-Sprachen wie z. B. JavaScript realisiert werden.
\end{itemize}

\subsection{Cookie}
\enquote{Wenn ein Server umfangreiche Statusinformationen speichern muss, benötigt er die Informationen auf einer lokalen Platte. Statusinformationen werden einem Browser in Form eines \Fachbegriff{Cookies} weitergegeben. Jedes Cookie besteht aus zwei Zeichenketten, die man als \Fachbegriff{Name/Wert-Paar} bezeichnet. Im Teil \Fachbegriff{Name} befindet sich der Name der Website und im Teil \Fachbegriff{Wert} eine kleine Zeichenkette, die der Browser speichert. Wenn der Browser die Website wieder kontaktiert, fügt er das Cookie in die Anfrage ein. Aus Sicht eines Servers hat es also den Anschein, dass der Browser Statusinformationen speichern und zurückgeben kann.} \cite[S.~514f]{comer2002computernetzwerke}

\section{Web-Technologien}
\subsection{XML}
\label{sec:XML}
\NewAbb{XML}{Extensible Markup Language} ist eine Auszeichnungssprache. Mit XML lassen sich hierarchisch strukturierte Daten darstellen. Mit den textbasierten XML-Dateien ist es leicht möglich Daten zwischen Systemen auszutauschen. Die XML-Dateien sind für den Menschen gut lesbar. Es gibt Tags (gekennzeichnet durch spitze Klammern) und Attribute (durch Hochkommas eingeschlossen). Die Tags können ineinander geschachtelt werden, dadurch entsteht eine Baumstruktur. Ein beispielhaftes XML Dokument findet sich in Listing~\ref{lst:exampleXML}. Die erste Zeile ist die XML-Präambel. Danach wird der Wurzelknoten \texttt{AssistanceTeam} mit zwei Kinderknoten \texttt{Assistant} definiert. Die Kinderknoten besitzen jeweils das Attribut \texttt{isAvailable} mit unterschiedlichen Werten. Die Kinderknoten (\texttt{Assistant}) haben wiederum eigene Kinderknoten (\texttt{Name} und \texttt{eMailAddress}). Die Schachtelung der Knoten kann beliebig tief erfolgen.

\lstset{language=Xml, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleXML,caption=Beispiel für ein XML Dokument]{../XML/example.xml}

\subsection{HTML}
\label{sec:HTML}
\NewAbb{HTML}{HyperText Markup Language} ist eine Auszeichnungssprache und hat \enquote{die Aufgabe, die logische Grob- und Feinstruktur einer Webseite zu beschreiben. [...] HTML ist die Sprache zur Strukturierung von Texten, wobei aber auch die Möglichkeit besteht, Grafiken und multimediale Inhalte in Form einer Referenz einzubinden und in den Text zu integrieren} \cite[S.~21]{muenz2012html5}.

Es ist unter anderem möglich:
\begin{itemize}
\item das Dokument in Bereiche wie Kopf, Inhalt, Fuß, Navigation und Artikel einzuteilen
\item dem Dokument Überschriften, Textabsätze, Listen und Tabellen hinzuzufügen
\item Links (siehe Abschnitt~\ref{sec:Link}) auf beliebige andere Webseiten oder Datenquellen im Internet einzubinden
\item Formulare in das Dokuement zu integrieren
\item Erweiterungssprachen wie CSS oder JavaScript einzubinden \cite[S.~21]{muenz2012html5}
\end{itemize}

Ein Beispiel für ein HTML Dokument findet sich in Listing~\ref{lst:exampleHTML}. Die Verwandtschaft von XML und HTML spiegelt sich in der gemeinsamen Struktur der Dokumente wider. Im Beispiel wird ein Dokument mit dem Titel \enquote{Assistenzplaner} definiert. Weiterhin werden CSS und JavaScript eingebunden. Wenn die Seite vollständig geladen ist, wird die JavaScript-Funktion \texttt{init} ausgeführt. Im Dokument selbst (\texttt{body}) ist eine Überschrift und ein Platzhalter mit dem \NewAbb{ID}{Identifikator}  \texttt{createContentWithJavaScript} definiert. Über die ID kann das Element gefunden werden und der Inhalt per JavaScript verändert werden.

\lstset{language=Html, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleHTML,caption=Beispiel für ein HTML-Dokument]{../HTML/example.html}


\subsection{CSS}
\label{sec:CSS}
Bei \NewAbb{CSS}{Cascading Stylesheets} \enquote{handelt [es] sich um eine beschreibende Ergänzungssprache für HTML. Sie klinkt sich nahtlos in HTML ein und hat zwei Aufgaben: das Formatieren von Inhalten und das Gestalten von Webseitenlayouts.} \cite[S.~23]{muenz2012html5} 

\enquote{CSS erlaubt es, zentrale Formate zu definieren, beispielsweise für alle Überschriften erster Ordnung oder für alle Textabsätze mit einem bestimmten Klassennamen oder für hervorgehobenen Text, der innerhalb einer Tabellenzelle vorkommt. Die zentralen Formate können in eine externe Style-Datei ausgelagert werden [...] So ermöglicht CSS seitenübergreifend einheitliche Layouts und Formatierungen.} \cite[S.~24]{muenz2012html5}

\lstset{language=C, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleCSS,caption=Beispiel für ein CSS-Dokument]{../CSS/example.css}

\subsection{JavaScript}
\label{sec:JavaScript}
\Fachbegriff{JavaScript} ist eine Script-Sprache, die meistens im Browser (also clientseitig) ausgeführt wird. 
Mögliche Einsatzgebiete von JavaScript sind unter anderem:
\begin{itemize}
\item Plausibilitätsprüfung (Validierung) von Formulareingaben vor dem Absenden
\item Dynamische Manipulation von Webseiten mit Hilfe von DOM (siehe Seite \pageref{sec:DOM})
\item Senden und Empfangen von Daten, ohne dass der Browser die Seite neu laden muss mit AJAX (siehe Abschnitt~\ref{sec:AJAX})
\end{itemize}
Ein Beispiel für ein JavaScript-Dokument findet sich in Listing~\ref{lst:exampleJavaScript}. In dem Beispiel wird die Funktion \texttt{init} definiert (Zeile 1). Es wird eine Instanz des \texttt{Date}-Objekts erzeugt (Zeile 2). Daraufhin wird das Element mit der ID \texttt{createContentWithJavaScript} gesucht (Zeile 4) und dessen Inhalt durch die aktuelle Zeit ersetzt (Zeile 5).

\lstset{language=Java, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleJavaScript,caption=Beispiel für ein JavaScript-Dokument]{../JavaScript/example.js}

%Sehr nützlich ist der Protoyping-Mechanismus von JavaScript. 
Bei JavaScript sind einige Objekte jederzeit verfügbar (zum Beispiel \texttt{RegExp}, \texttt{Date}, \texttt{window}). Diese Objekte lassen sich auch zur Laufzeit noch um Funktionalität erweitern. Dies geschieht über den Prototyping-Mechanismus. Ein Beispiel findet sich in Listing~\ref{lst:javaScriptProto}. Hier wird das bestehende \texttt{Date}-Objekt um die Funktion \texttt{addYears(number)} erweitert.

\lstset{language=Java, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:javaScriptProto,caption=Beispiel für die Erweiterung eines bestehenden Objekts in JavaScript]{../JavaScript/examplePrototype.js}

\subsection{Zusammenarbeit von HTML, CSS und JavaScript}
HTML, CSS und JavaScript ergänzen sich gegenseitig. Der Idee von \cite[S.~8]{teague2011css3} folgend, ergeben die drei Webtechnologien eine vollständige Sprache: HTML stellt die Substantive zur Verfügung, CSS die Adjektive und Adverbien und JavaScript fügt die Verben hinzu. 

Der HTML-Code von Listing~\ref{lst:exampleHTML} im Browser dargestellt (siehe Abbildung~\ref{fig:ExampleHtmlCssJavaScript}), lässt erkennen, wie sich die Zusammenarbeit der drei Webtechnologien in der Praxis auswirkt. Im HTML wird die Struktur des Dokumentes definiert. Mit dem verwendeten CSS-Dokument (Listing~\ref{lst:exampleCSS}) wird das Aussehen angepasst. Mit JavaScript (Listing~\ref{lst:exampleJavaScript}) wird dynamisch Inhalt erzeugt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/ExampleHtmlCssJavaScript.png}
	\caption[Ergebnis Zusammenspiel HTML, CSS und JavaScript]{Das Ergebnis des Zusammenspiels von HTML, CSS und JavaScript im Browser dargestellt}
	\label{fig:ExampleHtmlCssJavaScript}
\end{figure}


\subsection{DOM}
\label{sec:DOM}
\NewAbb{DOM}{Document Object Model}  ist eine Programmierschnittstelle für den Zugriff auf HTML- oder XML-Dokumente.
\enquote{HTML-Dokumente besitzen eine hierarchische Struktur, die im DOM als Baumstruktur repräsentiert wird. Die Knoten des Baums stellen die verschiedenen Arten von Inhalt in einem Dokument dar.} \cite[S.~310]{flanagan2002javascript}
DOM stellt unter anderem einen Satz von Methoden zur Verfügung, der es möglich macht, Elemente des Dokumentes aufzufinden. Zum Beispiel lassen sich mit Hilfe von

\qquad \texttt{var captions = window.document.getElementsByTagName("'h1"');} 

alle Überschriften erster Ordnung finden.

Weiterhin stellt DOM Methoden zur Verfügung um Inhalte des Dokument-Baums zu verändern. Mit dem Code 

\qquad \texttt{captions[0].setAttribute("'id"', "'firstCaption"');} 

wird die ID der ersten Überschrift (erster Ordnung) gesetzt.

\subsection{AJAX}
\label{sec:AJAX}
Bei \NewAbb{AJAX}{Asynchronous JavaScript and XML} handelt es sich nicht direkt um eine Webtechnologie, sondern eher  um eine spezielle Denkweise, die Kombination von HTML bzw. XML, CSS und JavaScript einzusetzen.

\enquote{Mit Ajax können einzelne Informationen nach Bedarf vom Server geholt und in die bestehende Seite integriert werden. Im besten Fall entfallen die Wartezeiten, und die Kommunikation mit dem Server tritt aus der Sicht des Anwenders in den Hintergrund. Ajax-Applikationen ermöglichen so eine Bedienung, die eher an eine Desktop-Anwendung als an eine Webapplikation erinnert.} \cite[S.~309]{koch2011javascript} 

Ein spezielles JavaScript-Objekt namens \texttt{XMLHttpRequest} ermöglicht die asynchrone Kommunikation mit dem Server. Durch den asynchronen Aufruf kann der Benutzer direkt weiterarbeiten und wird nicht durch die Kommunikation mit dem Server blockiert. Ist die Antwort des Servers beim Client angekommen, wird sie sofort verarbeitet und gegebenenfalls dem Nutzer dargestellt.

Mit Hilfe von AJAX ist es möglich, aktive Dokumente (siehe Abschnitt~\ref{sec:webdokumente}) zu erstellen.

\subsection{PHP}
\label{sec:PHP}
\NewAbb{PHP}{PHP Hypertext Preprocessor} ist eine Programmiersprache, die meistens auf dem Server ausgeführt wird. Mit ihr ist es möglich, Internetanwendungen zu erstellen. Dabei erzeugt PHP die HTML-Seiten, die im Browser angezeigt werden. Mit PHP ist es möglich, objektorientiert programmieren. Ein einfaches PHP-Script ist in Listing~\ref{lst:examplePHP} gezeigt.

\lstset{language=PHP, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:examplePHP,caption=Beispiel für ein PHP-Dokument]{../PHP/exampleBase.php}

\section{Modellierungssprachen}
Modellierungssprachen dienen der Modellierung von Software. Mit Hilfe von Modellierungssprachen lassen sich komplexe Systeme konstruieren. Mehrere Abstraktionsebenen fördern die Übersicht. Modellierungssprachen geben einem Software-Architekten die Möglichkeit, sich sehr konkret auszudrücken, ohne Code schreiben zu müssen.

\subsection{UML}
Die \NewAbb{UML}{Unified Modeling Language} \enquote{dient zur Modellierung, Dokumentation, Spezifizierung und Visualisierung komplexer Systeme, unabhängig von deren Fach- und Realisierungsgebiet. Sie liefert die Notationselemente gleichermaßen für die statischen und dynamischen Modelle von Analyse, Design und Architektur und unterstützt insbesondere objektorientere Vorgehensweisen.} \cite[S.~4]{rupp2012uml}

\subsection{SysML}
\NewAbb{SysML}{System Modeling Language} ist eine grafische Sprache, die sich zur Modellierung von komplexen Systemen einsetzen lässt. Einige Diagrammtypen aus der UML wurden übernommen und weitere Diagrammtypen hinzugefügt. Mit SysML lassen sich Systeme modellieren, die aus Hard- und Software bestehen.


\chapter{Anforderungsermittlung}
\label{anforderungen}
In diesem Kapitel werden die Anforderungen dargestellt. Neben den konkreten Benutzergeschichten, die von den zukünftigen Benutzern formuliert wurden, werden auch nicht explizit erwähnte Anforderungen festgehalten.

\section{Begrifflichkeiten}
In diesem Abschnitt werden einige Begriffe erläutert, die im Folgenden häufig verwendet werden.

\subsection{Klient}
Der Klient ist ein körperlich behinderter Mensch, der im alltäglichen Leben permanent auf Hilfe angewiesen ist. Im Rahmen der  individuellen Schwerstbehindertenbetreuung bekommt er Assistenten an die Seite gestellt. Mit Hilfe seiner Assistenten kann er ein selbstbestimmtes Leben führen.

\subsection{Assistent}
Der Assistent ist ein Helfer, der den Klienten pflegt und ihn im alltäglichen Leben unterstützt. 

\subsection{Team}
Der Klient muss im Normalfall jeden Tag viele Stunden mit Assistenz unterstützt werden. Dafür bedarf es eines Teams.
Das Team eines Klienten besteht aus mehreren Assistenten. In dem konkreten Fall besteht das Team aus sieben Assistenten.

\subsection{Dienst}
Wenn ein Assistent Dienst hat, dann ist er permanent in der Nähe des Klienten und steht ihm helfend zur Verfügung. 
Für den Leistungsnachweis ist eine Berechnung der Dienststunden notwendig. Wenn ein Assistent einen Dienst von 13:00 Uhr eines Tages bis 8:00 Uhr des Folgetages wahrnimmt, dann sind das rechnerisch 19 Stunden, die er gearbeitet hat. Die Nacht wird mit 6 Stunden berechnet und abgezogen. So bekommt der Assistent eine Netto-Arbeitszeit von 13 Stunden vergütet.

\subsection{Bereitschaft}
Wenn ein Assistent Bereitschaft hat, dann muss er in der Lage sein, den Dienst des diesthabenen Assistenten zu übernehmen und zu einer festgelegten Zeit (zum Beispiel von 10:00 bis 11:00 Uhr) telefonisch erreichbar sein. Falls der diensthabende Assistent erkrankt, springt der Bereitschaftshabende ein und übernimmt den Dienst. Bei Diensten, deren Netto-Arbeitszeit größer als 13 Stunden ist, wird eine zweite Bereitschaftsstunde  (zum Beispiel von 18:00 bis 19:00 Uhr) vereinbart, falls der diensthabende Assistent während der Arbeitsausführung erkrankt. Jede Bereitschaftsstunde wird mit dem Faktor 0.5 vergütet. 

\subsection{Dienstplan}
Im Dienstplan sind die Dienst- und Bereitschaftszeiten der Assistenten festgehalten. Für jeden Tag gibt es einen Assistenten, der Dienst hat, und einen Assistenten, der Bereitschaft hat. 

\subsection{Stundenkontingent}
\label{sec:Stundenkontingent}
Die Assistenten arbeiten unterschiedlich viel. Die Monatsstundenzahl variiert zwischen 30 und 130. Bei der Dienstplanerstellung ist darauf zu achten, dass das Stundenkontinent aller Assistenten möglichst gleichmäßig ausgeschöpft wird.
%alle Assistenten möglichst gleichmäßig ihr Stundenkontingent ausgeschöpft bekommen.

\section{Ist-Prozess}
Zu Beginn dieser Masterarbeit ist der Prozess zur Dienstplanerstellung komplett manuell. Der Klient schickt für die Dienstplanerstellung eine E-Mail mit Hinweisen für den Monat an sein Team und bittet um Rückmeldung bezüglich der Verfügbarkeiten.
Die Assistenten beantworten diese E-Mail mit Zeitangaben für mögliche Dienste.
Der Klient erstellt manuell den Dienstplan und muss dabei ständig zwischen seiner Übersichts-Tabelle und allen Antworten der sieben Team-Mitglieder wechseln. Nach der Fertigstellung des Dienstplans versendet der Klient eine E-Mail mit dem Dienstplan an sein Team.
Die Dienstplanerstellung ist zeitaufwändig (ca. vier Stunden im Monat) und wird vom Klienten als umständlich wahrgenommen.

%Die Dienstplanerstellung hat den Klienten viel Zeit (ca. vier bis fünf Stunden im Monat) und Nerven gekostet.

\section{Soll-Prozess}
Ein möglicher Soll-Prozess könnte folgendermaßen aussehen: % es gibt immer mehrere Möglichkeiten!
Der Klient gibt auf einer Webseite die Dienstzeiten für den kommenden Monat ein. Per Knopfdruck wird das Team benachrichtigt und darum gebeten, die freien Tage auf einer Webseite (Link ist in der Nachricht enthalten) einzugeben. Sobald alle Assistenten ihre Eingaben getätigt haben, können dem Klienten mit Hilfe eines Algorithmus mehrere Dienstplan-Vorschläge unterbreitet werden. Der Dienstplan kann vom Klienten manuell editiert werden und nach den eigenen Vorlieben, die bei der automatischen Erstellung schon größtenteils berücksichtigt wurden, angepasst werden. Der Klient gibt den Dienstplan frei und benachrichtigt sein Team, dass ein neuer Dienstplan verfügbar ist, der online eingesehen werden kann.
Der Zeitaufwand für die Assistenten bleibt unverändert. Der Zeitaufwand für den Klienten sinkt auf wenige Minuten.
\Note{Hier wird ein Subjekt-Interaktions-Diagram erga?nzt.}

\section{Benutzergeschichten}
\label{sec:userstories}
\enquote{Benutzergeschichten beschreiben Anforderungen aus der Sicht des Endanwenders. Sie bestehen aus einem Namen, aus einer kurzen textuellen Beschreibung der Anforderung und einer Reihe von Akzeptanzkriterien. Letztere halten fest, welche Kriterien erfüllt sein müssen, damit die Anforderung als erfolgreich realisiert gilt.} \cite[S.~46]{pichler2008scrum}

Wichtig ist, dass die Anforderung einen \enquote{konkreten und sichtbaren Mehrwert für den Kunden} besitzt. \cite[S.~52]{wirdemann2011scrum}

Benutzergeschichten haben ein festes Muster. Es hat sich für die Beschreibung folgendes Muster bewährt \cite[S.~59]{wirdemann2011scrum}:

\qquad Als <Benutzerrolle> will ich <das Ziel> [,so dass <Grund für das Ziel>]

Aus den Gesprächen mit dem Klienten und der Formulierung des Soll-Prozesses sind einige Benutzergeschichten abgeleitet worden:

\subsection{Standard-Dienstzeiten}
Als Klient möchte ich Standard-Dienstzeiten für jeden Tag der Woche individuell angeben können.

Akzeptanzkriterien:
\begin{itemize}
\item Der Klient kann für jeden Tag der Woche individuell einen Standard-Dienstbeginn und ein Standard-Dienstende festlegen.
\item Die Standard-Dienstzeiten können gespeichert und wieder geladen werden.
\item Bei der Erstellung eines Monatsplans werden initial die Standard-Dienstzeiten eingetragen.
\end{itemize}

\subsection{Angabe Dienstzeiten}
Als Klient möchte ich für den nächsten Monat vorausplanen können, wie die Dienstzeiten sind.

Akzeptanzkriterien:
\begin{itemize}
\item Es ist möglich einen Monat auszuwählen.
\item Initial werden die Standard-Dienstzeiten im Monats-Plan eingetragen.
\item Es ist möglich die Dienstzeiten für den nächsten Monat festzulegen.
\item Die Dienstzeiten für den nächsten Monat können gespeichert und wieder geladen werden.
\end{itemize}

\subsection{Öffentliche Bemerkungen (tagesbezogen)}
Als Klient möchte ich Bemerkungen zum Tag erstellen können, die für jeden (Klient und Assistenten) sichtbar sind.

Akzeptanzkriterien:
\begin{itemize}
\item Es ist möglich öffentliche Bemerkungen pro Tag zu erstellen.
\item Die öffentlichen Bemerkungen können gespeichert und wieder geladen werden.
\item Die öffentlichen Bemerkungen des Klienten werden den Assistenten bei der Eingabe möglicher Termine angezeigt, da die Bemerkungen Einfluss auf die Planung haben könnten. 
\item Die öffentlichen Bemerkungen werden im Dienstplan angezeigt.
\end{itemize}

\subsection{Private Bemerkungen (tagesbezogen)}
Als Klient möchte ich Bemerkungen zum Tag erstellen können, die nur für mich sichtbar sind.

Akzeptanzkriterien:
\begin{itemize}
\item Es ist möglich private Bemerkungen pro Tag zu erstellen, die nur für den Klienten sichtbar sind.
\item Die privaten Bemerkungen können gespeichert und wieder geladen werden.
\item Die privaten Bemerkungen werden dem Klienten bei der Dienstplanerstellung angezeigt.
\end{itemize}

\subsection{Öffentliche Bemerkungen (monatsbezogen)}
Als Klient möchte ich monatsbezogene Bemerkungen zum Dienstplan eingeben können, die für jeden (Klient und Assistenten) sichtbar sind.

Akzeptanzkriterien:
\begin{itemize}
\item Der Klient hat eine Möglichkeit monatsbezogene Bemerkungen einzugeben.
\item Die Bemerkungen können gespeichert und wieder geladen werden.
\item Die Bemerkungen werden den Assistenten bei der Eingabe möglicher Termine angezeigt.
\end{itemize}

\subsection{Verwaltung des Teams}
Als Klient möchte ich mein Team verwalten.

Akzeptanzkriterien:
\begin{itemize}
\item Es gibt eine Übersicht der Team-Mitglieder.
\item Es ist möglich, Team-Mitglieder hinzuzufügen.
\item Es ist möglich, die Eigenschaften der Team-Mitglieder zu editieren.
\item Es ist möglich, Team-Mitglieder aus dem Team zu entfernen.
\item Es ist möglich das Team abzuspeichern und zu einem späteren Zeitpunkt wieder zu laden.
\end{itemize}

\subsection{Bewertung der Assistenten}
Als Klient möchte ich die Assistenten bewerten, um bestimmte Assistenten bei der Dienstplanerstellung zu favorisieren.

Akzeptanzkriterien:
\begin{itemize}
\item Es ist möglich jedem Assistenten in der Team-Verwaltung einen Priorisierungswert zuzuweisen.
\item Der Algorithmus für die Dienstplanerstellung greift auf den Priorisierungswert zu und berücksichtigt diesen.
\end{itemize}

\subsection{Berücksichtigung der Wochentage}
Als Klient möchte ich für jeden Assistenten die Möglichkeit haben, Vorlieben für bestimmte Wochentage eingeben zu können.

Akzeptanzkriterien:
\begin{itemize}
\item Es ist möglich jedem Assistenten in der Team-Verwaltung favorisierte Wochentage zuzuweisen.
\item Der Algorithmus für die Dienstplanerstellung greift auf die favorisierten Wochentage zu und berücksichtigt diese.
\end{itemize}

\subsection{Team benachrichtigen}
Als Klient möchte ich eine Nachricht an mein Team verschicken können mit der Bitte, freie Termine einzutragen.

Akzeptanzkriterien:
\begin{itemize}
\item In der Team-Verwaltung gibt es eine Möglichkeit Kontaktdaten für die Assistenten zu hinterlegen.
\item Der Klient hat die Möglichkeit per Knopfdruck sein Team zu benachrichtigen. In dieser Nachricht ist unter anderem ein automatisch generierter Text mit der Bitte, die möglichen Termine einzutragen, enthalten.
\end{itemize}

\subsection{Dienstplan-Vorschläge}
Als Klient möchte ich mehrere Vorschläge für einen Dienstplan bekommen, die ich manuell anpassen kann.

Akzeptanzkriterien:
\begin{itemize}
\item Es gibt einen Algorithmus, der automatisch unter Berücksichtigung der Verfügbarkeiten der Assistenten und der Vorlieben des Klienten einen Dienstplan erstellt, der die Stundenkontingente berücksichtigt.
\item Der vom Algorithmus erstellte Dienstplan wird dem Klienten übersichtlich in einer Tabelle angezeigt.
\item Wenn der Klient erneut einen Dienstplan anfordert, läuft der Algorithmus erneut und ein neuer Dienstplanvorschlag (der vom alten abweicht) wird generiert und dargestellt.
\end{itemize}

\subsection{Manuelle Anpassung des Dienstplans}
Als Klient möchte ich die Möglichkeit haben, den Dienstplan nach meinen Wünschen anzupassen.

Akzeptanzkriterium: Es ist möglich den, vom Algorithmus erstellten, Dienstplan manuell zu verändern.

\subsection{Stundenverteilung bei Dienstplanerstellung}
Als Klient möchte ich bei der manuellen Nachbearbeitung des Dienstplanes die Stundenverteilung sehen können.

Akzeptanzkriterien:
\begin{itemize}
\item Es ist möglich in einer Tabelle zu sehen, wie die Arbeitsstunden des Monats auf die Assistenten verteilt werden.
\item Es wird dargestellt, wieviel Stunden ein Assistent arbeiten müsste. Diese Daten kommen aus der Team-Verwaltung.
\item Die Differenz zwischen Soll- und Ist-Arbeitsstunden pro Assistent wird berechnet.
\item Es wird grafisch in 3 Kategorien (grün, gelb, rot) dargestellt, wie gut das Stundenkontingent eines Assistenten ausgeschöpft ist.
\end{itemize}

\subsection{Eingabe möglicher Termine}
Als Assistent möchte ich angeben können, wann ich Zeit habe, zu arbeiten.

Akzeptanzkriterien:
\begin{itemize}
\item Der Assistent kann in einem Kalender einen Monat auswählen.
\item Der Assistent kann mögliche Termine für einen Monat eintragen.
\item Die Eingaben lassen sich speichern und zu einem späteren Zeitpunkt editieren.
\end{itemize}

\subsection{Termine favorisieren}
Als Assistent möchte ich eine Möglichkeit haben Termine zu favorisieren.

Akzeptanzkriterien:
\begin{itemize}
\item Der Assistent kann neben \enquote{Dienst möglich} und \enquote{Dienst unmöglich} auch ein \enquote{Dienst zur Not möglich} auswählen. 
\item Der Algorithmus zur Dienstplanerstellung berücksichtigt diese Abstufung der Eingaben.
\end{itemize}

\subsection{Bemerkungen der Assistenten}
Als Assistent möchte ich bei der Angabe von Terminen auch Bemerkungen machen können, um weitere Informationen zu transportieren.

Akzeptanzkriterien:
\begin{itemize}
\item Neben den Termineingaben kann der Assistent auch Bemerkungen machen.
\item Der Klient bekommt die Bemerkungen bei der Dienstplanerstellung angezeigt.
\end{itemize}

\subsection{Ausschöpfung Stundenkontingent}
Als Assistent möchte ich mein Stundenkontingent möglichst gut ausgeschöpft bekommen.

Akzeptanzkriterien:
\begin{itemize}
\item Der Algorithmus zur Dienstplanerstellung berücksichtigt die Stundenkontingente und erstellt einen Dienstplan, bei dem die Stundenkontingente aller Assistenten möglichst gleichmäßig ausgeschöpft werden.
%alle Assistenten ihre Stundenkontingente möglichst gleichmäßig ausgeschöpft bekommen.
\item Eine Vergleichstabelle zeigt die Ausschöpfung der Stundenkontingente der Assistenten.
%\item In einer Tabelle kann man sehen, wie gleichmäßig die Stundenkontigente der Assistenten ausgeschöpft sind.
\end{itemize}

\subsection{Ansicht Dienst- und Bereitschaftszeiten}
Als Assistent möchte ich sehen, wann ich Dienst oder Bereitschaft habe.

Akzeptanzkriterien:
\begin{itemize}
\item Der Assistent kann den gesamten Dienstplan aller Assistenten eines Monats einsehen.
\item Im Dienstplan sind die Dienste und Bereitschaften des angemeldeten Assistenten farblich hinterlegt.
\item In einer gesonderten Übersicht sieht der Assistent nur seine Dienst- und Bereitschaftszeiten.
\end{itemize}

\subsection{Letzte Änderung Dienstplan}
Als Anwender (Klient oder Assistent) möchte ich sehen, wann der Dienstplan zum letzten Mal geändert wurde, um zu überprüfen, ob es eine Änderung gegeben hat.

Akzeptanzkriterien:
\begin{itemize}
\item Wenn der Dienstplan gespeichert wird, wird das Datum und die Uhrzeit protokolliert.
\item Das Datum und die Uhrzeit der letzten Änderung werden beim Dienstplan angezeigt.
\end{itemize}

\subsection{Dokumentation}
Als Anwender möchte ich eine Dokumentation des Systems zur Verfügung haben, um mich gut in das System einarbeiten zu können.

Akzeptanzkriterien:
\begin{itemize}
\item Es steht eine Dokumentation zur Verfügung.
\item Die Dokumentation wird abhängig vom Typ des angemeldeten Benutzers (Klient/Assistent) erzeugt.
\item Es wird nur die Dokumentation der tatsächlich verwendeten Funktionen angezeigt.
\end{itemize}

\subsection{Feedback}
Als Anwender möchte ich Feedback an den Entwickler senden können.

Akzeptanzkriterien:
\begin{itemize}
\item Der Anwender kann Feedback eingeben und senden.
\item Der Anwender kann eine E-Mail-Adresse für eine Antwort eingeben.
\item Das Feld für die Antwortadresse wird nach Möglichkeit automatisch ausgefüllt. Die benötigen Daten werden aus den Einstellungen (für den Klienten) oder der Team-Verwaltung (für die Assistenten) ausgelesen.
\end{itemize}

\section{Abgeleitete Anforderungen}
Aus den Benutzergeschichten ergeben sich einige abgeleitete Anforderungen, die zwar nicht explizit erwähnt wurden, aber für eine technische Umsetzung zwingend notwendig sind.

\subsection{Plattformunabhägigkeit}
Die Software-Lösung soll sich auf unterschiedlichen Geräte-Kategorien (zum Beispiel Handy, Tablet, Desktop) bedienen lassen können. Weiterhin sollen die größten Betriebssysteme (Windows, Linux, MacOS X, Android, iOS) unterstützt werden.

\subsection{Serverbasierte Anwendung}
Klient und Assistenten möchten an verschiedenen Orten zu verschiedenen Zeiten unabhängig voneinander das System bedienen. Um diese Bedingungen zu erfüllen, bietet sich eine serverbasierte Anwendung an.

%Damit der Klient mit seinen Assistenten asynchron zusammenarbeiten kann, bietet sich eine serverbasierte Anwendung an. Der Klient verwaltet alle Daten online. Die Assistenten können ihre Eingaben losgelöst vom Klienten vornehmen.

\subsection{Benutzer-Verwaltung}
Der Klient und die Assistenten haben unterschiedliche Interessen in Bezug auf den Assistenzplaner. Der Klient möchte unter anderem den Dienstplan erstellen und sein Team verwalten, die Assistenten hingegen möchten mögliche Termine eintragen und den fertigen Dienstplan einsehen können.

Jeder Benutzer möchte seine Daten individuell eingeben können. Die hinterlegten Daten sollten nicht für jedermann einsehbar sein. Daher bekommt jeder Benutzer eigene Zugangsdaten, bestehend aus ID und individuellem Passwort. Bei der Anmeldung am System wird registriert, ob es sich um einen Klienten oder einen Assistenten handelt. Dementsprechend variiert der angezeigte Inhalt.

\subsection{Aufgaben-Verwaltung}
Eine Ergänzung zu der Dienstplanerstellung ist eine Aufgaben-Verwaltung. Der Klient kann Aufgaben mit Fälligkeitsdatum und eventuellen Wiederholungen definieren. Klient und Assistenen können die Aufgaben einsehen und als erledigt markieren.

\chapter{Marktanalyse}
In diesem Kapitel wird eine Marktanalyse durchgeführt. Ziel ist es herauszufinden, ob auf dem Markt eine Lösung verfügbar ist, die alle Anforderungen (siehe Kapitel~\ref{anforderungen}) berücksichtigt.

%Bei einer Marktanalyse werden bestehende Lösungen betrachtet und verifiziert, dass es 
%Bevor eine Lösung doppelt entwickelt wird, ist es ratsam zu recherchieren, was es schon auf dem Markt gibt.

Die meisten Anwendungen zur Dienstplanerstellung sind für die Verwendung im Einzelhandel, in Krankenhäusern, Restaurants oder Clubs gedacht.
%in Krankenhäusern, Einzelhandel, Restaurant oder Clubs optimiert.

\section{Dienstplan in Excel}
Im Internet  gibt es viele Vorlagen für die Erstellung von Dienstplänen mit Hilfe der Tabellenkalkulation \Link{http://office.microsoft.com/de-de/excel/}{Excel}{23.08.2014}. Die Zusammenarbeit von Klient und Assistent über das Internet gestaltet sich schwierig. Der Klient kann Dokumente freigeben und damit den Assistenten die Möglichkeit geben, ihre Termine einzutragen. Allerdings haben sie damit auch Einsicht und Zugriff auf alles, was sie nicht sehen sollten. Es gibt nicht die Möglichkeit einzelne Bereiche des Dokumentes freizugeben.

\section{Offline-Anwendungen}
Es gibt Programme zur Dienstplanerstellung, die ohne Internet-Anbindung arbeiten. Hier müsste der Klient die Eingabe der möglichen Termine der Assistenten selbstständig vornehmen.

Ein Beispiel für solch eine Anwendung ist \Link{http://www.qtime.de/kostenlos/dienstplan-erstellung.html}{QTime}{23.08.2014}. Aber schon der Blick auf die Screenshots (Beispiel: Abbildung~\ref{fig:DienstplanungSchichtstatus}) lässt erahnen, dass die Software sehr komplex ist und von jemanden, der sie nur einmal im Monat verwenden möchte, zuviel Einarbeitung abverlangt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../Images/Screenshots/Q1/Dienstplanung_Schichtstatus.png}
	\caption[Screenshot QTime]{Screenshot von QTime: Komplexe Software - Quelle: \url{http://www.qtime.de/kostenlos/dienstplan-erstellung.html}}
	\label{fig:DienstplanungSchichtstatus}
\end{figure}

\section{Online-Anwendungen}
Es gibt einige Anwendungen im Internet, die es ermöglichen, Dienstpläne zu erstellen.

Beispiele hierfür sind:
\begin{itemize}
\item \Link{http://kostenloser-dienstplan.de}{Kostenloser Dienstplan}{23.08.2014}
\item \Link{http://schichtplaner-online.de/index.php/de/}{Schichtplaner}{23.08.2014}
\item \Link{http://www.papershift.com}{Papershift}{23.08.2014}
\item \Link{https://easypep.de}{EasyPep}{23.08.2014}
\item \Link{https://www.shiftjuggler.com/de/}{ShiftJuggler}{23.08.2014}
\end{itemize}

Keine dieser Anwendungen unterstützt das Bereitschaftskonzept. Einige sind in der Lage Stundenkontingente zu berücksichtigen. Bei allen wird der Dienstplan manuell erstellt. Bei keiner können persönliche Vorlieben oder allgemein Regeln für die Dienstplanerstellung festgelegt werden. Alle waren auf die reine Erstellung eines Dienstplans ausgelegt, Erweiterungen wie Aufgaben-Verwaltung waren nicht vorgesehen.

Zusammenfassend lässt sich festhalten, dass es keine bestehende Lösung gibt, die alle formulierten Anforderungen erfüllen kann. Es gibt auch keine Anknüpfungsmöglichkeiten oder Wiederverwendungsmöglichkeiten, da die meisten Anbieter ein finanzielles Interesse haben und den Code ihrer Lösungen nicht offen gelegt haben.

\chapter{Software-Design}
In diesem Kapitel werden die Anforderungen aus dem vorletzten Kapitel in einem SysML Anforderungsdiagramm dargestellt. Daraufhin wird ein Software-Design in UML entworfen, das den Anforderungen gerecht wird. 

\section{SysML Anforderungsdiagramm}
Mit SysML lassen sich Systeme, bestehend aus Hard- und Software, modellieren. Da in der vorliegenden Arbeit eine Lösung entstanden ist, die ausschließlich aus Software besteht, wurde nur das Anforderungsdiagramm der SysML verwendet. Alles andere wurde in UML modelliert.

Die Anforderung \enquote{beschreibt ein oder mehrere Eigenschaften oder Verhaltensweisen eines Systems, die stets erfüllt sein müssen.} \cite[S.~315]{weilkiens2014systems}
Im Anforderungsdiagramm wird jede Anforderung als Box dargestellt, in deren oberen Bereich der Stereotyp <<requirement>> steht. Die Anforderungen können Beziehungen untereinander haben. Nachfolgend sind die verwendeten Beziehungen dargestellt.

\subsection{Allgemeine Beziehung}
Mit der allgemeinen Beziehung lässt sich darstellen, dass eine Anforderung von einer anderen abhängig ist. In Abbildung~\ref{fig:SysMLRequirementLink} ist ein Beispiel dargestellt. Die Anforderung \enquote{Erstellung Monatsplan} ist abhängig von der Anforderung \enquote{Standard-Dienstzeiten}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.7]{../Images/Modell/SysMLRequirementLink.png}
	\caption{SysML Anforderungsdiagramm - Allgemeine Beziehung}
	\label{fig:SysMLRequirementLink}
\end{figure}

\subsection{Enthältbeziehung}
Die Enthältbeziehung \enquote{beschreibt, dass eine Anforderung in einer anderen enthalten ist.} \cite[S.~318]{weilkiens2014systems} Dargestellt wird diese Beziehung durch eine Verbindung zweier Anforderungen, wobei an einem Ende der Verbindung ein Kreis mit einem Kreuz ist. In Abbildung~\ref{fig:SysMLRequirementContainment} ist ein Beispiel dargestellt. Die Anforderungen \enquote{Aufgaben als erledigt markieren} und \enquote{Aufgaben erstellen} sind in der Anforderung \enquote{Aufgaben-Verwaltung} enthalten.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.7]{../Images/Modell/SysMLRequirementContainment.png}
	\caption{SysML Anforderungsdiagramm - Enthältbeziehung}
	\label{fig:SysMLRequirementContainment}
\end{figure}

\subsection{Erfüllungsbeziehung}
Die Erfüllungsbeziehung \enquote{beschreibt, dass ein Element eine Anforderung erfüllt.} \cite[S.~319]{weilkiens2014systems} Dargestellt wird diese Beziehung durch einen Pfeil, der mit dem Stereotyp <<satisfy>> beschriftet ist. In Abbildung~\ref{fig:SysMLRequirementSatisfy} ist ein Beispiel dargestellt. Die Anforderung \enquote{Kalender} erfüllt die Anforderung \enquote{Angabe möglicher Termine}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.7]{../Images/Modell/SysMLRequirementSatisfy.png}
	\caption{SysML Anforderungsdiagramm - Erfüllungsbeziehung}
	\label{fig:SysMLRequirementSatisfy}
\end{figure}

\subsection{Verfeinerungsbeziehung}
Die Verfeinerungsbeziehung \enquote{beschreibt, dass ein Modellelement die Eigenschaften einer Anforderung detaillierter darstellt.} \cite[S.~325]{weilkiens2014systems} Dargestellt wird diese Beziehung durch einen Pfeil, der mit dem Stereotyp <<refine>> beschriftet ist. In Abbildung~\ref{fig:SysMLRequirementRefine} ist ein Beispiel dargestellt. Die Anforderung \enquote{Wiederkehrende Aufgaben erstellen} verfeinert die Anforderung \enquote{Aufgabe erstellen}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.7]{../Images/Modell/SysMLRequirementRefine.png}
	\caption{SysML Anforderungsdiagramm - Verfeinerungsbeziehung}
	\label{fig:SysMLRequirementRefine}
\end{figure}

\subsection{Anforderungsdiagramm}
Die Anforderungen clustern sich in fünf Bereiche:

\begin{itemize}
\item Team-Verwaltung
\item Erstellung Montsplan
\item Erstellung Dienstplan
\item Aufgaben-Verwaltung
\item Sonstiges
\end{itemize}

In den Abbilungen~\ref{fig:SysMLRequirementsTeamOrganisation} bis \ref{fig:SysMLRequirementsMisc} sind die Anforderungen aus den fünf Bereichen zu sehen.

\begin{figure}[H]
	\advance\leftskip-2.0cm
	%\centering
	\includegraphics[scale=0.55]{../Images/Modell/SysMLRequirementsTeamOrganisation.png}
	\caption{SysML Anforderungsdiagramm - Bereich Team-Verwaltung}
	\label{fig:SysMLRequirementsTeamOrganisation}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.55]{../Images/Modell/SysMLRequirementsMonthPlan.png}
	\caption{SysML Anforderungsdiagramm - Bereich Montsplan}
	\label{fig:SysMLRequirementsMonthPlan}
\end{figure}

\begin{figure}[H]
	\advance\leftskip-2.0cm
	%\centering
	\includegraphics[scale=0.50]{../Images/Modell/SysMLRequirementsRoster.png}
	\caption{SysML Anforderungsdiagramm - Bereich Dienstplan}
	\label{fig:SysMLRequirementsRoster}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.55]{../Images/Modell/SysMLRequirementsToDoManager.png}
	\caption{SysML Anforderungsdiagramm - Bereich Aufgaben-Verwaltung}
	\label{fig:SysMLRequirementsToDoManager}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.55]{../Images/Modell/SysMLRequirementsMisc.png}
	\caption{SysML Anforderungsdiagramm - Bereich Sonstiges}
	\label{fig:SysMLRequirementsMisc}
\end{figure}

%Es ist deutlich eine Clusterung zu erkennen. Die Anforderungen 
%\begin{itemize}
%\item Erstellung Dienstplan
%\item Erstellung Montsplan
%\item Team-Verwaltung
%\item Benutzerverwaltung
%\item Aufgabenverwaltung
%\end{itemize}
%sind die zentralen Anforderungen, die weitere Anforderungen enthalten. 

\section{UML Komponentendiagramm}
%allgemeines zum UML Komponentendiagramm schreiben
Mit dem Komponentendiagramm der UML lässt sich eine Grobarchitektur der Software darstellen. Die Diagrammform ist hilfreich, um sich einen Überblick zu verschaffen. Nutzt eine Komponente die Funktionalität einer anderen Komponente, so kann lässt sich dies durch Schnittstellen darstellen.

%Alle Anforderungen, die im SysML Anforderungsdiagramm als zentral eingeschätzt wurden, werden in eigenen Paketen implementiert. 
Das Anforderungsdiagramm ist auf Deutsch gehalten, da es noch unabhängig von einer Programmiersprache ist. Die Software ist in englischer Sprache formuliert. Nachfolgend sind die zentralen Anforderungen und die daraus abgeleiteten Paketnamen dargestellt:

\begin{itemize}
\item Erstellung Dienstplan $\Rightarrow$ \texttt{Roster}
\item Erstellung Monatsplan $\Rightarrow$ \texttt{MonthOrganisation}
\item Team-Verwaltung und Benutzer-Verwaltung $\Rightarrow$ \texttt{TeamOrganisation}
\item Aufgaben-Verwaltung $\Rightarrow$ \texttt{ToDoManager}
\end{itemize}

Das Komponentendiagramm ist in Abbilung~\ref{fig:UMLKomponentendiagramm} zu sehen.

\begin{figure}[H]
%\advance\leftskip-2.0cm
	\centering
	\includegraphics[scale=0.62]{../Images/Modell/UMLAllComponents.png}
	\caption[UML Komponentendiagramm]{UML Komponentendiagramm}
	\label{fig:UMLKomponentendiagramm}
\end{figure}

Ziel der Modellierung war es, die Komponenten voneinander so unabhängig wie möglich zu machen. Zwei Komponenten (\texttt{ToDoManager} und \texttt{MonthNavigation}) sind  völlig autark. Die restlichen vier Komponenten sind durch schlanke Schnittstellen verbunden. Beim \texttt{MonthOrganisationInterface} und \texttt{SettingsInterface} ist nur eine Methode zu implementieren. Beim \texttt{TeamOrganisationInterface} sind fünf Methoden zu implementieren.  

\section{UML Klassendiagramme}
In diesem Abschnitt werden die Komponenten aus Abbildung~\ref{fig:UMLKomponentendiagramm} näher beleuchtet und die darin liegenden Klassen gezeigt.

\subsection{Komponente \texttt{MonthNavigation}}
Die Komponente \texttt{MonthNavigation} (siehe Abbildung~\ref{fig:UMLComponentMonthNavigation}) enthält nur die Klasse \texttt{MonthNavigation}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.62]{../Images/Modell/UMLComponentMonthNavigation.png}
	\caption[Klassendiagramm der Komponente \texttt{MonthNavigation}]{Klassendiagramm der Komponente \texttt{MonthNavigation}}
	\label{fig:UMLComponentMonthNavigation}
\end{figure}

Die Klasse \texttt{MonthNavigation} ist für die Erstellung der Monats-Navigation (Implementierung siehe Abschnitt \ref{Monatsnavigation}) zuständig.

\subsection{Komponente \texttt{MonthOrganisation}}
Die Komponente \texttt{MonthOrganisation} (siehe Abbildung~\ref{fig:UMLComponentMonthOrganisation}) enthält die Klassen \texttt{MonthPlan}, \texttt{AssistanceInput}, \texttt{WorkingTimes} und \texttt{Day}.

\begin{figure}[H]
	\centering
	%\advance\leftskip-2.0cm
	\includegraphics[scale=0.55]{../Images/Modell/UMLComponentMonthOrganisation.png}
	\caption[Klassendiagramm der Komponente \texttt{MonthOrganisation}]{Klassendiagramm der Komponente \texttt{MonthOrganisation}}
	\label{fig:UMLComponentMonthOrganisation}
\end{figure}

Zentrale Klasse ist \texttt{MonthPlan}, die Instanzen von allen weiteren Klassen hat. Mit der Klasse \texttt{MonthPlan} werden alle Daten des Monatsplans (Implementierung siehe Abschnitt \ref{Monatsplan}) verwaltet. Die Kalendereingaben (Implementierung siehe Abschnitt \ref{sec:calendar}) der Assistenten werden in der Klasse \texttt{AssistanceInput} hinterlegt. Die Standardarbeitszeiten (Implementierung siehe Abschnitt \ref{sec:standardDienstzeiten}) werden von der Klasse \texttt{WorkingTimes} bereitgestellt. In der Klasse \texttt{Day} werden alle tagesbezogenen Daten gebündelt.

\subsection{Komponente \texttt{Roster}}
Die Komponente \texttt{Roster} (siehe Abbildung~\ref{fig:UMLComponentRoster}) enthält nur die Klasse \texttt{Roster}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.62]{../Images/Modell/UMLComponentRoster.png}
	\caption[Klassendiagramm der Komponente \texttt{Roster}]{Klassendiagramm der Komponente \texttt{Roster}}
	\label{fig:UMLComponentRoster}
\end{figure}

Die Klasse \texttt{Roster} wird bei der Dienstplanerstellung (Implementierung siehe Abschnitt \ref{sec:rosterImplementation}) verwendet.

\subsection{Komponente \texttt{Settings}}
Die Komponente \texttt{Settings} (siehe Abbildung~\ref{fig:UMLComponentSettings}) enthält die Klassen \texttt{Passwords} und \texttt{Settings}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.62]{../Images/Modell/UMLComponentSettings.png}
	\caption[Klassendiagramm der Komponente \texttt{Settings}]{Klassendiagramm der Komponente \texttt{Settings}}
	\label{fig:UMLComponentSettings}
\end{figure}

Mit der Klasse \texttt{Settings} werden die Einstellungen (Implementierung siehe Abschnitt \ref{sec:EinstellungenImpl}) des Assistenzplaners verwaltet. In der Klasse \texttt{Passwords} sind alle Funktionen vorhanden, die für die Benutzerverwaltung (Implementierung siehe Abschnitt \ref{sec:BenutzerVerwaltungImpl}) benötigt werden.

\subsection{Komponente \texttt{TeamOrganisation}}
Die Komponente \texttt{TeamOrganisation} (siehe Abbildung~\ref{fig:UMLComponentTeamOrganisation}) enthält die Klassen \texttt{Team} und \texttt{TeamMember}.

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.62]{../Images/Modell/UMLComponentTeamOrganisation.png}
	\caption[Klassendiagramm der Komponente \texttt{TeamOrganisation}]{Klassendiagramm der Komponente \texttt{TeamOrganisation}}
	\label{fig:UMLComponentTeamOrganisation}
\end{figure}

In der Klasse \texttt{Team} ist die Funktionalität für die Team-Verwaltung (Implementierung siehe Abschnitt \ref{sec:TeamVerwaltung}) implementiert. \texttt{Team} hat soviele Instanzen von \texttt{TeamMember}, wie das Assistenz-Team Mitglieder hat. Die Klasse \texttt{TeamMember} ist eine reine Datenhaltungsklasse\footnote{Alle Member sind \texttt{public}.} ohne Funktionalität.

\subsection{Komponente \texttt{ToDoManager}}
Die Komponente \texttt{ToDoManager} (siehe Abbildung~\ref{fig:UMLComponentToDoManager}) enthält die Klassen \texttt{ToDoManager} und \texttt{ToDoItem}. 

\begin{figure}[H]
	\centering
	\includegraphics[scale=0.62]{../Images/Modell/UMLComponentToDoManager.png}
	\caption[Klassendiagramm der Komponente \texttt{ToDoManager}]{Klassendiagramm der Komponente \texttt{ToDoManager}}
	\label{fig:UMLComponentToDoManager}
\end{figure}

In der Klasse \texttt{ToDoManager} ist die Funktionalität für die Aufgaben-Verwaltung (Implementierung siehe Abschnitt \ref{sec:AufgabenVerwaltung}) implementiert. \texttt{ToDoManager} hat soviele Instanzen von \texttt{ToDoItem}, wie Aufgaben in der Aufabenliste hinterlegt sind. Die Klasse \texttt{ToDoItem} ist eine reine Datenhaltungsklasse ohne Funktionalität.

\chapter{Implementierung}
In diesem Kapitel wird dargestellt, wie die Anforderungen und das Software-Design konkret implementiert wurden. Die Ergebnisse der Implementierung werden kompakt dargestellt. In den Abschnitten \enquote{Implementierungsdetails} werden weiterführende Informationen dargestellt, die für das Gesamtverständnis der Ausarbeitung nicht wichtig sind und übersprungen werden können. Der Schwerpunkt des Kapitels liegt auf der Darstellung des Algorithmus zur Dienstplanerstellung (siehe Abschnitt~\ref{sec:algorithm}).

\section{Wahl der Programmiersprachen}
Für die Implementierung ist es notwendig sich auf Programmiersprachen festzulegen.

\subsection{Server}
Bei der Serverseite ist die Wahl der Programmiersprache auf PHP gefallen. Hauptgründe hierfür waren: die \Link{http://w3techs.com/technologies/history_overview/programming_language}{hohe Verbreitung}{23.08.2014} von über 80\% und die Tatsache, dass PHP bei den meisten Webhostern vorinstalliert ist.
Weitere Gründe \cite[S.~16]{theis2006einstieg} sind:
\begin{itemize}
\item Einfache Entwicklung von Programmen
\item Unterstützung verschiedener Plattformen
\item Leichte Integration in Apache (weitverbreiteter Webserver)
\end{itemize}


\subsection{Client}
Der Server generiert mit Hilfe von PHP den HTML-Code, der an den Client (Browser) gesendet wird. Im HTML wird ausschließlich die Struktur der angezeigten Seite definiert. Das Aussehen wird mit Hilfe von CSS bestimmt.
Um die Funktionalität auf der Seite des Clients zu erweitern, kommt JavaScript zum Einsatz.

\section{Einheitliches Layout}
Mit Hilfe von CSS wird die Darstellung des Assistenzplaners konsistent definiert. Es gibt ein globales Stylesheet, welches in allen Webseiten verwendert wird.

\subsection{Implementierungsdetails}
In der Datei \file{global.css} sind alle globalen Styles definiert. An manchen Stellen des Assistenzplaners wird das globale Stylesheet durch spezifische Stylesheets ergänzt. Zum Beispiel kommt bei der Dokumentation (siehe Abschnitt \ref{sec:Dokumentation}) das Stylesheet \file{documentation.css} zum Einsatz.

\section{Persistenz der Daten}
Alles was persistent gespeichert werden muss, wird in textbasierten Dateien (*.txt) abgelegt. Im Vergleich zu Datenbanken ergeben sich folgende Vorteile:
\begin{itemize}
\item Daten können leicht zwischen Produktiv-System und Test-System ausgetauscht werden.
\item Datenbank-Verwaltung entfällt.
\item Es werden keine Datenbank-Anforderungen an den Server gestellt.
\end{itemize}

\subsection{Implementierungsdetails}
Eine potentielle Fehlerquelle beim Gebrauch von textbasierten Daten ist der gleichzeitige Schreibzugriff zweier Benutzer auf eine Datei. Das ist derzeit nur bei den Kalender-Eingaben der Assistenten (siehe Abschnitt~\ref{sec:calendar}) möglich. Um den gleichzeitigen Zugriff zu verhindern wird eine Art Mutex eingesetzt. Unter PHP gibt es die Möglichkeit auf eine Datei sperrend zuzugreifen. So wird verhindert, dass zwei Prozesse gleichzeitig in eine Datei schreiben, falls zwei Assistenten gleichzeitig ihre Daten speichern wollen.
%\Link{http://de.wikipedia.org/wiki/Semaphor_(Informatik)}{Semaphor}{05.09.2014}

Es gibt einige PHP-Scripte zum Speichern von Daten. Bei allen werden per \texttt{POST}-Parameter die zu speichernden Inhalte übermittelt, ein File schreibend geöffnet und der übertragene Inhalt geschrieben.
Die PHP-Scripte, die für das Speichern zuständig sind, heißen \file{calendarSaver.php}, \file{changePasswordSaver.php}, \file{defaultTimesSaver.php}, \file{monthPlanSaver.php}, \file{rosterSaver.php}, \file{settingsSaver.php} und \file{toDoSaver.php}.

\section{Benutzer-Verwaltung}
\label{sec:BenutzerVerwaltungImpl}
Damit der Klient und die Assistenten benutzerspezifische Eingaben tätigen können ist eine Verwaltung der Benutzer notwendig.
Jeder Benutzer des Assistenzplaners kann sich mit eigener Kennung und Passwort anmelden (siehe Abbildung \ref{fig:Login}). Es gibt zwei Rollen von Benutzern: die Klienten und die Assistenten. Die Klienten lassen beim Anmelden das Eingabefeld \enquote{Assistent} leer. Die Klienten können sich ihren Zugang selbstständig anlegen (siehe Abschnitt~\ref{sec:AnlegenKlient}). Die Zugänge der Assistenten werden von den Klienten verwaltet.\footnote{Jeder Assistent ist damit fest einem Klienten zugeteilt. Theoretisch kann ein Assistent auch in mehrern Teams Mitglied sein.} Klienten haben die Möglichkeit Assistenten zum Team hinzuzufügen und zu entfernen (siehe Abschnitt~\ref{sec:TeamVerwaltung}).

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/Login.png}
	\caption{Login-Maske des Assistenzplaners}
	\label{fig:Login}
\end{figure}

\subsection{Implementierungsdetails}
Das PHP-Script \file{login.php} ist für die Erstellung der Eingabefelder zuständig. Wenn der Benutzer auf den Button \enquote{Anmelden} drückt, werden die Daten aus den Eingabefeldern nach einer erfolgreichen Validierung per \texttt{POST} an den \file{loginHandler.php} geschickt. Der Login-Handler verifiziert, dass der Nutzer besteht und das Passwort korrekt eingegeben wurde. 

Nach der erfolgreichen Anmeldung wird eine PHP-Session gestartet. Dies geschieht mit dem PHP-Befehl:

\qquad \texttt{session\_start();}

Im Hintergrund wird im Browser eine Session-ID erstellt und gespeichert. Ein Beispiel für solch eine Session-ID findet sich in Abbildung~\ref{fig:CookiePhpSessionId}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/CookiePhpSessionId.png}
	\caption[Session-ID als Cookie im Browser]{Session-ID wird als Cookie im Browser gespeichert}
	\label{fig:CookiePhpSessionId}
\end{figure}

Nach der Anmeldung werden im superglobalen Array \texttt{\$\_SESSION} Variablen gesetzt, die hilfreich für die weitere Verwendung des Assistenzplaners sind. Diese Vorgehensweise (Start einer Session und Setzen der Session-Variablen) ist \cite[S.~404]{schlossnagle2006php} entnommen.

Falls sich der Assistent mit dem Standard-Passwort angemeldet hat, so wird er zu \texttt{changePassword.php} weitergeleitet. Dort wird er aufgefordert sein Passwort zu ändern. Ansonsten wird er zur Übersicht (siehe Abschnitt \ref{sec:overviewImpl}) weitergeleitet. Eine weitere Möglichkeit ist, dass die Login-Seite mit dem \texttt{GET}-Parameter \texttt{redirect} aufgerufen wurde. Das passiert zum Beispiel, wenn der Assistent in der automatisch generierten Nachricht auf einen Link klickt, der auf folgendes Ziel verweist:

\qquad http://assistenzplaner.de/PHP/login.php?redirect=calendarView

Dann wird der Nutzer nach erfolgreicher Anmeldung direkt zur Kalender-Ansicht weitergeleitet.


\section{Willkommen-Seite}
Auf der \Link{http://www.assistenzplaner.de/master/PHP/index.php}{Willkommen-Seite}{23.08.2014} (siehe Abbildung~\ref{fig:Welcome}) werden dem Interessenten Informationen über den Assistenzplaner präsentiert. Der Benutzer wird gebeten einen neuen Klienten-Zugang einzurichten oder sich mit einem bestehenden Zugang anzumelden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/Welcome.png}
	\caption[Willkommen-Seite]{Willkommen-Seite}
	\label{fig:Welcome}
\end{figure}

\subsection{Implementierungsdetails}
Die Willkommensseite wird durch das PHP-Script \file{index.php} generiert. Es lassen sich zwei Aktionen durchführen:
\begin{enumerate}
\item Ein neues Konto anlegen $\Rightarrow$ \file{createNewAccount.php}
\item Anmelden $\Rightarrow$ \file{login.php}
\end{enumerate}

\section{Navigation}
Die Navigation steht immer gut sichtbar rechts oben zur Verfügung. Abhängig davon, ob jemand am System angemeldet ist (siehe Abbildung~\ref{fig:NavigationLoggedIn}) oder nicht (siehe Abbildung~\ref{fig:NavigationLoggedOut}) stellt sie unterschiedliche Informationen dar.

\begin{figure}[htb]
	\centering
	\fbox{ \includegraphics[scale=0.5]{../Images/Screenshots/NavigationLoggedIn.png}}
	\caption[Navigation bei angemeldetem Assistenten]{Navigation bei angemeldetem Assistenten}
	\label{fig:NavigationLoggedIn}
\end{figure}

\begin{figure}[htb]
	\centering
		\fbox{\includegraphics[scale=0.5]{../Images/Screenshots/NavigationLoggedOut.png}}
	\caption[Navigation ohne Anmeldung]{Navigation ohne Anmmeldung}
	\label{fig:NavigationLoggedOut}
\end{figure}

\subsection{Implementierungsdetails}
Die Navigation wird durch das PHP-Script \file{navigation.php} erzeugt. Dieses Script wird in allen Seiten direkt nach dem HTML-\texttt{body}-Tag inkludiert\footnote{PHP-Code: \texttt{<?php include('navigation.php'); ?>}}. Im Script werden aus dem superglobalen Array \texttt{\$\_SESSION} einige Informationen ausgelesen und abhängig davon der Inhalt der Navigation variiert. In der Navigation werden Hyperlinks zu anderen PHP-Scripten dargestellt.

\section{Monatsnavigation}
\label{Monatsnavigation}
An einigen Stellen (Dienstplan, Monatsplan, Kalender) möchte der Anwender zwischen den Monaten navigieren können. Mithilfe der Monatsnavigation (siehe Abbildung \ref{fig:MonthNavigation}) ist es möglich vom derzeit angezeigeten Monat immer zum vorherigen, aktuellen (jetzigen) und nächsten Monat zu navigieren.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/MonthNavigation.png}
	\caption{Monatsnavigation}
	\label{fig:MonthNavigation}
\end{figure}

\subsection{Implementierungsdetails}
Die Monatsnavigation wird von der PHP-Klasse \texttt{MonthNavigation} erstellt. Es reicht eine Instanz von \texttt{MonthNavigation} zu erstellen. Bei der Konstruktion wird nur ein Pfad auf das aufrufende PHP-Script, das Jahr und den Monat angeben (siehe Listing \ref{lst:phpMonthNavigation}).  

\lstset{language=PHP, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:phpMonthNavigation,caption=Anlegen der Monatsnavigation]{../PHP/exampleMonthNavigation.php}

Voraussetzung ist, dass das aufrufende PHP-Script mit den \texttt{GET}-Parametern \texttt{year} und \texttt{month} aufgerufen werden kann. Das ist bei den PHP-Scripten \file{monthPlanView.php}, \file{rosterView.php} und \file{calendarView.php} der Fall.

\section{Anlegen eines neuen Klienten-Zugangs}
\label{sec:AnlegenKlient}
Das Anlegen eines neuen Klienten-Zugangs soll auf einfache Weise möglich sein. Es werden bei der Erstellung eines neuen Klienten-Zugangs keine persönlichen Daten erhoben.

Um einen neuen Klienten-Zugang anzulegen, wird der Benutzer gebeten einen Klientennamen, ein Passwort und die Passwort-Wiederholung einzugeben (siehe Abbildung~\ref{fig:NewClient}).

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/NewClient.png}
	\caption[Anlegen eines neuen Klienten]{Anlegen eines neuen Klienten mit Name und Passwort}
	\label{fig:NewClient}
\end{figure}

Bedingungen an einen neuen Klientennamen sind:
\begin{itemize}
\item Er darf nicht leer sein.
\item Er darf noch nicht vergeben sein.
\item Er darf nur aus Buchstaben und Zahlen bestehen. Sonderzeichen und Leerzeichen sind nicht erlaubt.
\end{itemize}

Wenn eine Bedingung nicht erfüllt ist, so wird der Benutzer darauf hingewiesen. Die Inhalte der Textfelder bleibt erhalten, so dass der Benutzer dass Passwort und die Wiederholung dessen nicht nochmal eingeben muss.

Wenn alle Bedingungen erfüllt sind, bekommt der Benutzer eine Meldung, dass das Anlegen eines neuen Kontos erfolgreich war. Weiterhin wird er gebeten, sich mit dem neuen Zugang am System anzumelden.

Zu einem späteren Zeitpunkt kann der Klient in den Einstellungen personenbezogene Daten (Vorname, Nachname, E-Mail-Adresse) angeben, was aber nicht zwingend für die Benutzung des Assistenzplaners notwendig ist.

\subsection{Implementierungsdetails}
Das PHP-Script \file{createNewAccount.php} erzeugt die Seite mit den Eingabefeldern (siehe Abbildung~\ref{fig:NewClient}). Drückt der Benutzer auf den \button{Klient anlegen}, so verifziert die Funktion \texttt{createNewAccount()} des JavaScripts \file{createNewAccount.js}, dass alle Eingaben korrekt sind und der Klientenname die geforderten Bedingungen erfüllt. Anschließend werden der Klientenname und das Passwort per \texttt{POST}-Parameter an das PHP-Script \file{createNewAccountHandler.php} geschickt. 

Dieses Script legt im Ordner \folder{Data} ein Unterordner mit dem Klientennamen an, in dem alle Daten persistent gespeichert werden. Darunter wird der Unterordner \folder{Team} angelegt. In diesem Ordner wird in der Datei \file{passwords.txt} der Hash des vergebenen Passworts abgespeichert. Dabei wird die PHP-Funktion \Link{http://php.net/manual/de/function.password-hash.php}{\texttt{password\_hash()}}{12.09.2014} verwendet. Selbst wenn ein Hacker die Passwort-Datei in die Hände bekommt ist sie nutzlos, da von einem Hash nicht auf das Passwort zurückgeschlossen werden kann.

\section{Übersicht}
\label{sec:overviewImpl}
Auf der Übersichts-Seite (siehe Abbildung~\ref{fig:Overview}) werden dem Benutzer alle verfügbaren Seiten als Hyperlink aufgelistet. Hierbei werden der Benutzertyp (Klient oder Assistent) und die Einstellungen (zum Beispiel Aufgaben-Verwaltung benutzen oder nicht) berücksichtigt.

\begin{figure}[htb]
	\centering
		\fbox{\includegraphics[scale=0.8]{../Images/Screenshots/overview.png}}
	\caption[Übersicht Assistenzplaner für Klienten]{Übersicht des Assistenzplaners für Klienten mit Links zu allen verfügbaren Seiten}
	\label{fig:Overview}
\end{figure}

\subsection{Implementierungsdetails}
Die Übersicht wird von dem PHP-Script \file{overview.php} erzeugt. Abhängig von den Variablen, die im superglobalen Array \texttt{\$\_SESSION} gesetzt sind, variiert der Inhalt der dargestellten Seite. Weiterhin spielen die Einstellungen, die in der Klasse \texttt{Settings} gespeichert wurden, eine Rolle.

\section{Einstellungen}
\label{sec:EinstellungenImpl}
Um den Assistenzplaner zu konfigurieren, gibt es die Einstellungen (siehe Abbildung~\ref{fig:Settings}), die nur für den Klienten zugänglich sind. Hier können Vorname, Nachname und E-Mail-Adresse des Klienten gespeichert werden. Weiterhin kann hier das Standard-Passwort angesehen und editiert werden. Jeder neu angelegte Assistent kann sich mit dem Standard-Passwort beim Assistenzplaner anmelden. Weiterhin kann das Passwort eines Assistenten vom Klienten auf das Standard-Passwort zurückgesetzt werden, falls der Assistent sein Passwort vergessen hat. Zum Schluss kann der Klient in den Einstellungen festlegen, ob er die Aufgaben-Verwaltung (siehe Abschnitt~\ref{sec:AufgabenVerwaltung}) nutzen möchte oder nicht.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/Settings.png}
	\caption[Einstellungsmöglichkeiten des Assistenzplaners]{Einstellungsmöglichkeiten des Assistenzplaners für Klienten}
	\label{fig:Settings}
\end{figure}

\subsection{Implementierungsdetails}
Die Einstellungsseite wird von dem PHP-Script \file{settingsView.php} erstellt. Drückt der Benutzer auf den \button{Einstellungen speichern}, so wird die Funktion \texttt{saveSettings} im JavaScript \file{settings.js} aufgerufen. Diese Funktion parst aus den Einstellungen die Daten heraus und schickt sie per \texttt{POST}-Parameter an das PHP-Script \file{settingsSaver.php}, welches die Daten persistent in der Datei \file{settings.txt} im Ordner \folder{Organization} speichert.

\section{Standard-Dienstzeiten}
\label{sec:standardDienstzeiten}
Bei den Standard-Dienstzeiten (siehe Abbildung~\ref{fig:DefaultTimes}) hat der Klient die Möglichkeit für jeden Tag der Woche festzulegen, wie standardmäßig die Dienstzeiten sind. Diese Standard-Dienstzeiten werden initial im Monatsplan eingetragen, können aber vom Klienten für jeden Tag angepasst werden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/DefaultTimes.png}
	\caption[Standard-Dienstzeiten]{Verwaltung der Standard-Dienstzeiten.}
	\label{fig:DefaultTimes}
\end{figure}

\subsection{Implementierungsdetails}
Die Standard-Dienstzeiten-Seite wird von dem PHP-Script \file{defaultTimes.php} erstellt. Drückt der Benutzer auf den \button{Speichern}, so wird die Funktion \texttt{save} im JavaScript \file{defaultTimes.js} aufgerufen. Diese Funktion parst aus der Standard-Dienstzeiten-Tabelle die Daten heraus und schickt sie per \texttt{POST}-Parameter an das PHP-Script \file{defaultTimesSaver.php}, welches die Daten persistent in der Datei \file{defaultTimes.txt} im Ordner \folder{Organization} speichert.

\section{Team-Verwaltung}
\label{sec:TeamVerwaltung}
%Der Klient braucht eine Möglichkeit um sein Assistenz-Team zu verwalten. Der Klient möchte Team-Mitglieder hinzufügen, editieren und löschen. Weiterhin möchte er das Passwort eines Assistenten zurücksetzen können.

Mit der Team-Verwaltung kann der Klient die Eigenschaften seiner Team-Mitglieder verwalten.

Jeder Assistent hat folgende Eigenschaften:
\begin{itemize}
\item Kennung - eindeutige ID, mit der sich der Assistent am System anmeldet
\item Vorname
\item Nachname
\item Telefonnummer
\item Stichwörter (zum Beispiel: \enquote{Fußball} oder \enquote{verlässlich}), diese werden bei der Dienstplanerstellung berücksichtigt
\item Stundenkontingent - Anzahl der Stunden in einem Monat, die der Assistent zur Verfügung hat
\item Priorisierung - ein Wert, um den Assistenten bei der Dienstplanerstellung zu priorisieren (je höher der Wert, desto höher die Wahrscheinlichkeit, dass der Assistent viele Dienste bekommt)
\item Bevorzugte Wochentage
\end{itemize}

Die Eigenschaften werden in tabellarischer Form dargestellt und sind editierbar.

Neue Team-Mitglieder können mit Hilfe des Buttons \enquote{Neues Mitglied} hinzugefügt werden. Das neue Team-Mitglied hat inital  das Passwort, welches in den Einstellungen hinterlegt wurde.

Sollte ein Assistent sein Passwort vergessen haben, hat der Klient mit Hilfe des Buttons \enquote{Passwort zurücksetzen} (in der Spalte \enquote{Aktionen}) die Möglichkeit, das Passwort des Assistenten auf das Standard-Passwort (was in den Einstellungen hinterlegt ist) zu setzen.

Sollte ein Assistent das Team verlassen, so hat der Klient die Möglichkeit mit Hilfe des Buttons \enquote{Löschen} (in der Spalte \enquote{Aktionen}) den Assistenten aus der Team-Verwaltung zu entfernen.

\subsection{Implementierungsdetails}
Die Team-Verwaltungs-Seite wird von dem PHP-Script \file{teamTable.php} erstellt. Drückt der Benutzer auf den \button{Team Speichern}, so wird die Funktion \texttt{saveTeam} im JavaScript \file{team.js} aufgerufen. Diese Funktion ruft die Unterfunktion \texttt{checkLoginNames}\footnote{\texttt{checkLoginNames} prüft unter anderem, dass alle Team-Mitglied-IDs voneinander verschieden sind. Falls etwas nicht den Anforderungen genügt, wird der Benutzer mit einem Info-Fenster benachrichtigt und das Speichern der Team-Tabelle wird abgebrochen.} auf, parst aus der Team-Tabelle die Daten heraus und schickt sie per \texttt{POST}-Parameter an das PHP-Script \file{teamSaver.php}, welches die Daten persistent in der Datei \file{team.txt} im Ordner \folder{Team} speichert.

Drückt der Benutzer auf den \button{Neues Mitglied}, so wird die Funktion \texttt{newMember} im JavaScript \file{team.js} aufgerufen. In dieser wird per DOM eine neue Tabellenzeile erstellt und an die bestehende Tabelle angehängt.

Drückt der Benutzer auf den \button{Passwort zurücksetzen} (in der Spalte Aktionen), so wird die Funktion \texttt{resetPassword} im JavaScript \file{team.js} aufgerufen. Die ID des betroffenen Team-Mitgliedes wird per \texttt{POST}-Parameter an das PHP-Script \file{resetPassword.php} geschickt. Dieses Script erzeugt eine Instanz der Klasse \texttt{Passwords} und ruft die Funktion \texttt{resetPassword} mit der übergebenen ID auf. Diese Funktion setzt das Passwort auf das Standardpasswort, welches in der Klasse \texttt{Settings} hinterlegt ist.

Drückt der Benutzer auf den \button{Löschen} (in der Spalte Aktionen), so wird die Funktion \texttt{removeMember} im JavaScript \file{team.js} aufgerufen. Der Benutzer wird gefragt, ob er das wirklich tun möchte. Stimmt er zu, so wird per DOM die Zeile aus der Tabelle entfernt.

\section{Monatsplan}
\label{Monatsplan}
Mit dem Monatsplan (siehe Abbildung~\ref{fig:MonthPlan3})  plant der Klient den nächsten Monat. Er kann pro Tag den Dienstbeginn und das Dienstende (am Nachfolgetag) festlegen und Notizen zum Tag erstellen. Die Notizen unterteilen sich in öffentliche und private Notizen. Öffentliche Notizen können auch vom Assistenzteam eingesehen werden. Private Notizen können nur vom Klienten selbst eingesehen werden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/MonthPlan3.png}
	\caption[Monatsplan]{Monatsplan mit der Möglichkeit tagesweise Dienstbeginn und Dienstende festzulegen und Bemerkungen zu hinterlegen}
	\label{fig:MonthPlan3}
\end{figure}

Neben den tagesweisen Bemerkungen kann der Klient eine Nachricht an sein Team verfassen. Hier können allgemeine Hinweise für den Monat untergebracht werden.

Der Klient hat jederzeit die Möglichkeit den Monatsplan zu speichern. Möchte er sein Assistenz-Team auffordern, Termine einzutragen, so kann er auf den Button \enquote{Team benachrichtigen} klicken. Vom Assistenzplaner wird dann eine E-Mail an jedes Mitglied des Assistenz-Teams geschickt mit der Bitte, mögliche Termine einzutragen. Bei Bedarf kann der Klient eine zustätzliche Nachricht an sein Team verfassen. Eine beispielhafte Nachricht findet sich in Abbildung~\ref{fig:Mail}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/Mail.png}
	\caption[Benachrichtigung der Assistenten]{Beispielhafte Benachrichtigung der Assistenten mit der Bitte des Klienten, die Termine für den nächsten Monat einzutragen}
	\label{fig:Mail}
\end{figure}

\subsection{Implementierungsdetails}
Der Monatsplan wird vom PHP-Script \file{monthPlanView.php} erstellt. Darin wird eine Instanz der Klasse \texttt{MonthPlan} erzeugt. Drückt der Benutzer auf den \button{Speichern}, so wird die Funktion \texttt{save} im JavaScript \file{monthPlan.js} aufgerufen. Diese Funktion parst aus dem Monatsplan die Daten heraus, ergänzt sie um die Eingaben im Nachrichtenfeld und schickt sie per \texttt{POST}-Parameter an das PHP-Script \file{monthPlanSaver.php}, welches die Daten persistent in der Datei \file{YYYY-M.txt}\footnote{YYYY steht für das Jahr, M für den Monat - Beispiel \texttt{2014-10.txt}} im Ordner \folder{MonthPlan} speichert.

Drückt der Benutzer auf den \button{Team benachrichtigen}, so wird die Funktion \texttt{notifyTeam} im JavaScript \file{monthPlan.js} aufgerufen. Per \texttt{POST}-Parameter wird die verfasste Nachricht, das Jahr und der Monat an das PHP-Script \file{notifyTeam.php} geschickt. Dieses Script erstellt im Wesentlichen eine Instanz von \Link{https://github.com/PHPMailer/PHPMailer}{\texttt{PHPMailer}}{12.09.2014} und verschickt eine E-Mail an das Team.

\section{Kalender}
\label{sec:calendar}

Mit Hilfe des Kalenders (siehe Abbildung~\ref{fig:CalendarInput}) kann ein Assistent die Termine eintragen, an denen er für den Dienst verfügbar ist. Durch einen Klick auf ein Datum ändert sich der Zustand des Datums und damit auch die Hintergrundfarbe.
Rot bedeuetet, der Assistent ist an diesem Datum nicht verfügbar. Gelb bedeutet, dass der Assistent zur Not verfügbar wäre. Grün bedeutet, dass der Assistent an dem Datum uneingeschränkt zur Verfügung steht.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/CalendarInput.png}
	\caption[Kalender für die Eingabe möglicher Termine]{Kalender für die Eingabe der möglichen Termine eines Assistenten}
	\label{fig:CalendarInput}
\end{figure}

Mit Hilfe des Buttons \enquote{Alle Daten markieren} kann der Assistent alle Daten eines Monats grün (bedeutet: Assistent verfügbar) markieren.

Im oberen Bereich der Webseite sind alle Informationen dargestellt (siehe Abbildung~\ref{fig:CalendarNotesFromClient}), die dem Assistenten helfen können. Das sind zum einen die öffentlichen Notizen, die der Klient zum Monat erstellt hat, zum anderen die optionale Nachricht, die der Klient an das Team verfasst hat.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/CalendarNotesFromClient.png}
	\caption[Bemerkungen des Klienten]{Bemerkungen vom Klienten für seine Assistenten}
	\label{fig:CalendarNotesFromClient}
\end{figure}

\subsection{Implementierungsdetails}
Die Kalender-Seite wird von dem PHP-Script \file{calendarView.php} erstellt. Drückt der Benutzer auf den \button{Speichern}, so wird die Funktion \texttt{save} im JavaScript \file{calendar.js} aufgerufen. Diese Funktion parst aus dem Kalender die Daten heraus und schickt sie per \texttt{POST}-Parameter an das PHP-Script \file{calendarSaver.php}, welches die Daten persistent in der Datei \file{YYYY-M.txt} im Ordner \folder{AssistanceInput} speichert.

\section{Dienstplan}
\label{sec:rosterImplementation}
\subsection{Aus Sicht des Klienten}
Wenn die Assistenten ihre Termine eingetragen haben, ist der Klient in der Lage den Dienstplan zu erstellen. Falls es Tage gibt, an denen nicht mindestens zwei Assistenten (einer für Dienst und einer für Bereitschaft) Zeit haben, so bekommt er eine Warnung, da dann eine vollständige Dienstplanerstellung nicht möglich ist.

Der Assistenzplaner erstellt eine Tabelle (siehe Abbildung~\ref{fig:RosterClient1}), in der tageweise die Dienstzeiten, die Verfügbarkeiten der Assistenten und die Bemerkungen (öffentliche wie private) aufgeführt werden. Die Verfügbarkeiten der Assistenten werden farblich markiert. 
\begin{itemize}
\item Grün: Assistent ist voll verfügbar
\item Gelb: Assistent ist zur Not verfügbar
\item Rot: Assistent ist nicht verfügbar
\end{itemize}

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterClient1.png}
	\caption[Editierbarer Dienstplan]{Editierbarer Dienstplan für den Klienten}
	\label{fig:RosterClient1}
\end{figure}

Der Klient bekommt vom Assistenzplaner mit Hilfe des Algorithmus (siehe Abschnitt~\ref{sec:algorithm}) einen Dienstplan erstellt, den er nach Belieben anpassen kann. Dazu klickt er in die Zellen der Dienstplantabelle und kann dadurch zwischen den Zuständen
\begin{itemize}
\item Assistent hat Dienst
\item Assistent hat Bereitschaft
\item Assistent hat weder Dienst noch Bereitschaft
\end{itemize}
wechseln.

Unterhalb der Dienstplantabelle zeigt eine weitere Tabelle (siehe Abbildung~\ref{fig:RosterClient2}) die Stundenverteilung der Assistenten.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterClient2.png}
	\caption[Stundenübersicht Assistenten]{Stundenübersicht der Assistenten}
	\label{fig:RosterClient2}
\end{figure}

In der zweiten Spalte sind die zusammengerechneten Arbeitsstunden (Dienststunden plus Bereitschaftsstunden) aufgeführt. In der dritten Spalte sieht der Klient die benötigten Arbeitsstunden.
In der vierten Spalte wird die Differenz zwischen Spalte 2 und 3 berechnet. In der fünften Spalte ist die Differenz (Spalte 4) ins Verhältnis der benötigten Arbeitsstunden (Spalte 3) gesetzt und prozentual ausgedrückt. Die Zeilen werden farblich hinterlegt:
\begin{itemize}
\item Grün: Der Betrag der prozentualen Abweichung (Spalte 5) ist kleiner 10\% 
\item Gelb: Der Betrag der prozentualen Abweichung (Spalte 5) ist zwischen 10\% und 20\%
\item Rot: Der Betrag der prozentualen Abweichung (Spalte 5) ist größer als 20\% 
\end{itemize}
Die Stundenübersicht wird jedes Mal aktualisiert, wenn der Klient in der Dienstplan-Tabelle etwas ändert. Dadurch hat der Klient ein direktes Feedback, wie sich eine Dienstplanänderung auf die Stundenausschöpfung der Assistenten auswirkt.

Per Knopfdruck kann der Klient einige Funktionen ausführen:
\begin{itemize}
\item Dienstplan prüfen: Es wird geprüft, dass für jeden Tag genau ein Assistent Dienst und genau ein Assistent Bereitschaft hat.
\item Dienstplan speichern: Der Dienstplan wird gespeichert. Gleichzeitig wird das Datum der letzten Änderung aktualisiert.
\item Dienstplan löschen: Der Dienstplan wird nach Rückversicherung gelöscht. Durch ein Neuladen der Dienstplan-Seite wird vom Assistenzplaner ein neuer Dienstplanvorschlag erstellt.
\item Dienstplan als PDF anzeigen: Der Dienstplan wird als \NewAbb{PDF}{Portable Document Format} exportiert. Als PDF kann der Dienstplan leicht per E-Mail verschickt und ausgedruckt werden.% Der Dienstplan als PDF dient letztendlich als Leistungsnachweis.
\end{itemize}

\subsection{Aus Sicht des Assistenten}
Der Assistent hat keine Möglichkeit den Dienstplan zu verändern. Er kann lediglich den fertigen Dienstplan einsehen. In einer Tabelle (siehe Abbildung~\ref{fig:RosterAssistantMarkus1}) werden tagesweise die Dienst-und Bereitschaftszeiten dargestellt. Weiterhin kann der Benutzer sehen, welcher Assistent Dienst bzw. Bereitschaft hat. Die Dienste und Bereitschaften des angemeldeten Assistenen werden farblich hervorgehoben.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterAssistantMarkus1.png}
	\caption[Gesamter Dienstplan aus Sicht des Assistenten]{Gesamter Dienstplan aus Sicht des Assistenten \enquote{Markus} - farbig hervorgehoben sind die Dienste bzw. Bereitschaften des angemeldten Assistenten}
	\label{fig:RosterAssistantMarkus1}
\end{figure}

Unter dem allgemeinen Dienstplan gibt es eine Tabelle (siehe Abbildung~\ref{fig:RosterAssistantMarkus2}), in der nur die Dienste und Bereitschaften des angemeldeten Assistenten angezeigt werden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterAssistantMarkus2.png}
	\caption[Dienste und Bereitschaften des angemeldeten Assistenten]{Dienste und Bereitschaften des angemeldeten Assistenten \enquote{Markus}}
	\label{fig:RosterAssistantMarkus2}
\end{figure}

\subsection{Implementierungsdetails}
Die Dienstplan-Seite wird von dem PHP-Script \file{rosterView.php} erstellt. Drückt der Benutzer auf den \button{Dienstplan speichern}, so wird die Funktion \texttt{save} im JavaScript \file{roster.js} aufgerufen. Diese Funktion prüft die Vollständigkeit des Dienstplans, parst aus dem Dienstplan die Daten heraus und schickt sie per \texttt{POST}-Parameter an das PHP-Script \file{rosterSaver.php}, welches die Daten persistent in der Datei \file{YYYY-M.txt} im Ordner \folder{Roster} speichert.

Drückt der Benutzer auf den \button{Dienstplan prüfen}, so wird die Funktion \texttt{checkRoster} im JavaScript \file{roster.js} aufgerufen. Diese Funktion prüft für jeden Tag, dass genau ein Assistent für den Dienst und genau ein Assistent für die Bereitschaft eingetragen ist. Ist dies nicht der Fall, so wird der Benutzer mit einer Message-Box darüber benachrichtigt.

Drückt der Benutzer auf den \button{Dienstplan löschen}, so wird die Funktion \texttt{deleteRoster} im JavaScript \file{roster.js} aufgerufen. Der Benutzer wird gefragt, ob er dies wirklich tun möchte. Nach der Rückversicherung wird das PHP-Script \file{rosterEraser.php} aufgerufen.

Drückt der Benutzer auf den \button{Dienstplan als PDF anzeigen}, so wird die Funktion \texttt{createPdf} im JavaScript \file{roster.js} aufgerufen. Diese Funktion prüft, ob der Dienstplan vollständig ist und navigiert zum PHP-Script \file{rosterViewPdf.php}, das die PDF-Version des Dienstplans anzeigt. Hierbei kommt die Klasse \Link{http://www.fpdf.org}{\texttt{FPDF}}{13.09.2014} zum Einsatz.

\section{Entwicklung des Algorithmus zur Dienstplanerstellung}
\label{sec:algorithm}
Im folgenden Abschnitt werden die Anforderungen an den Algorithmus zur Dienstplanerstellung erläutert. Weiterhin wird dargestellt wie der Algorithmus entwickelt und iterativ verfeinert worden ist.

\subsection{Anforderungen}
Mindestanforderung an den Algorithmus ist, dass er einen Dienstplan erstellt, der eine hundertprozentige Betreuungsabdeckung erreicht. Für jeden Tag muss ein Assistent für den Dienst und ein Assistent für die Bereitschaft im Dienstplan eingetragen sein.

Nebenbedingungen sind, dass
\begin{itemize}
\item die Vorlieben des Klienten berücksichtigt werden (zum Beispiel Assistent A lieber am Wochenende, Assistent B bei einem wichtigen Termin, Assistent C bei Fußballspielen)
\item die Stundenkontingente der Assistenten gleichmäßig ausgeschöpft werden (vergleiche Abschnitt~\ref{sec:Stundenkontingent})

\end{itemize}

\subsection{Eingabe}
Der Algorithmus bekommt als Eingabe die Verfügbarkeiten der Assistenten (pro Tag). Diese sind folgendermaßen codiert:
\begin{itemize}
\item 0: Assistent ist nicht verfügbar
\item 1: Assistent ist zur Not verfügbar
\item 10: Assistent ist voll verfügbar
\end{itemize}

Weiterhin hat der Algorithmus Zugriff auf alle Daten, die in der Team-Verwaltung (siehe Abschnitt~\ref{sec:TeamVerwaltung}) hinterlegt sind. Welche Version des Algorithmus auf welche Daten zugreift lässt sich Tabelle~\ref{tab:inputAlgorithm} entnehmen.

\begin{table}[htb]
\centering
\begin{tabular}{|l|c|c|c|c|c|c|}
\hline 
\multicolumn{1}{|r|}{Version} & 1 & 2 & 3 & 4 & 5 \\ 
\hline 
Priorisierung  & \xmark & \cmark & \cmark & \cmark & \cmark \\  
\hline 
Bevorzugte Wochentage & \xmark & \xmark & \cmark & \cmark & \cmark \\ 
\hline 
Stichwörter & \xmark & \xmark & \xmark & \cmark & \cmark \\ 
\hline 
Stundenkontingent & \xmark & \xmark & \xmark & \xmark & \cmark \\
\hline 
\end{tabular}  
\caption{Übersicht der verwendeten Daten aus der Team-Verwaltung}
\label{tab:inputAlgorithm}
\end{table}

\subsection{Ausgabe}
Der Algorithmus gibt für jeden Tag des Monats einen Assistenten für den Dienst und einen Assistenten für die Bereitschaft aus.

\subsection{Erste Version - Hundertprozentige Betreuungsabdeckung}
\label{sec:algorithmVersion1}
Die erste Version des Algorithmus berücksichtigt nur die Mindestanforderung (hundertprozentige Betreuungsabdeckung). Der Algorithmus iteriert über alle Tage des Monats und prüft, ob es mindestens zwei Assistenten gibt, die Zeit haben. Der erste freie Assistent bekommt den Dienst, der zweite freie Assistent bekommt die Bereitschaft zugewiesen. Bei dieser ersten Version entsteht ein vollständiger Dienstplan. Der Klient ist den ganzen Monat betreut, jedoch wurden weder die Stundenkontingente noch die Vorlieben des Klienten berücksichtigt.

\subsection{Zweite Version - Berücksichtigung der Priorisierungswerte}
\label{sec:algorithmVersion2}
%In der zweiten Version des Algorithmus werden die allgemeinen Vorlieben des Klienten bezüglich der Assistenten berücksichtig. Für jedes Team-Mitglied kann der Klient einen Priorisierungswert festlegen 
In der zweiten Version des Algorithmus wird der Priorisierungswert berücksichtigt, den der Klient für jeden Assistenten festlegen kann (siehe Abschnitt~\ref{sec:TeamVerwaltung}).

Als erstes wird eine Punktetabelle erstellt. Die erste Spalte ist der Tag des Monats, jede weitere Spalte repräsentiert die Verfügbarkeit eines Assistenten. Ist der Assistent nicht verfügbar, so wird eine Null eingetragen. Ist der Assistent zur Not verfügbar, so wird eine Eins eingetragen. Ist der Assistent voll verfügbar, so wird eine Zehn eingetragen. Als Beispiel dienen die Zahlen in Tabelle~\ref{tab:scoreTable}.
\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Punkte Assistent 1 & Punkte Assistent 2 & Punkte Assistent 3 \\ 
\hline 
1 (Montag) & 0 & 10 & 10 \\ 
\hline 
2 (Dienstag) & 1 & 10 & 0 \\ 
\hline 
3 (Mittwoch) & 10 & 1 & 10 \\ 
\hline 
... & ... & ... & ... \\ 
\hline 
\end{tabular} 
\caption{Punktetabelle zur Dienstplanerstellung}
\label{tab:scoreTable}
\end{table}

Nun wird jeder Verfügbarkeitswert mit dem Priorisierungswert multipliziert. Mit den beispielhaften Priorisierungswerten aus Tabelle~\ref{tab:teamMemberPriorities} verändert sich die Punktetabelle.
\begin{table}[htb]
\centering
\begin{tabular}{|c|c|}
\hline 
Assistent & Priorisierungswert \\ 
\hline 
Assistent 1 & 1 \\ 
\hline 
Assistent 2 & 2 \\ 
\hline 
Assistent 3 & 3 \\ 
\hline 
\end{tabular} 
\caption{Priorisierungswerte aus der Team-Verwaltung}
\label{tab:teamMemberPriorities}
\end{table}

Das Ergebnis ist in Tabelle~\ref{tab:scoreTable2} zu sehen.

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Punkte Assistent 1 & Punkte Assistent 2 & Punkte Assistent 3 \\ 
\hline 
1 (Montag) & 0 & 20 & 30 \\ 
\hline 
2 (Dienstag) & 1 & 20 & 0 \\ 
\hline 
3 (Mittwoch) & 10 & 2 & 30 \\ 
\hline 
... & ... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Punktetabelle nach Multiplikation mit Priorisierungswerten}
\label{tab:scoreTable2}
\end{table}

Nach der Erstellung der Punktetabelle iteriert der Algorithmus über alle Tage und gibt dem Assistenten mit der höchsten Punktzahl den Dienst und dem Assistenten mit der zweithöchsten Punktzahl die Bereitschaft. Mit den Beispielwerten würde sich ein Dienstplan wie er in Tabelle~\ref{tab:roster} dargestellt ist ergeben.

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Dienst & Bereitschaft \\ 
\hline 
1 (Montag) & Assistent 3 & Assistent 2  \\ 
\hline 
2 (Dienstag) & Assistent 2 & Assistent 1 \\ 
\hline 
3 (Mittwoch) & Assistent 3  & Assistent 1 \\ 
\hline 
... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Beispielhafter Dienstplan}
\label{tab:roster}
\end{table}


\subsection{Dritte Version - Berücksichtigung der Wochentage}
\label{sec:algorithmVersion3}
In der dritten Version des Algorithmus werden (zusätzlich zu den personenbezogenen Priorisierungswerten) die Wochentage (Montag, Dienstag, ...) berücksichtigt.
Der Klient kann Assistenten an bestimmten Wochentagen bevorzugen (vergleiche Abschnitt~\ref{sec:TeamVerwaltung}).
Der Algorithmus geht genauso vor, wie im vorherigen Abschnitt beschrieben. Zusätzlich wird jedoch der Wochentag berücksichtigt. Ist zum Beispiel Assistent 2 am Montag priorisiert, so werden die Werte an allen Montagen in der Punktetabelle verdoppelt (siehe Tabelle~\ref{tab:scoreTable3}). Somit steigt die Wahrscheinlichkeit, dass Assistent 2 an einem Montag für den Dienst eingeteilt wird. In dem konkreten Beispiel wird Assistent 2 am Montag den Dienst bekommen, obwohl Assistent 3 eine generell höhere Priorisierung hat.

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Punkte Assistent 1 & Punkte Assistent 2 & Punkte Assistent 3 \\ 
\hline 
1 (Montag) & 0 & 40 & 30 \\ 
\hline 
2 (Dienstag) & 1 & 20 & 0 \\ 
\hline 
3 (Mittwoch) & 10 & 2 & 30 \\ 
\hline 
... & ... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Punktetabelle nach Berücksichtigung der Wochentage}
\label{tab:scoreTable3}
\end{table}

\subsection{Vierte Version - Berücksichtigung der Stichwörter}
\label{sec:algorithmVersion4}
Der Algorithums arbeitet prinzipiell wie im vorherigen Abschnitt beschrieben. Bei der Erstellung der Punktetabelle werden jedoch die   privaten Bemerkungen im Monatsplan tagesweise nach Stichwörtern durchsucht. Ist ein Stichwort in der Team-Verwaltung bei einem Assistenten hinterlegt, so wird der Punktwert des Assistenten an dem betreffenden Tag verzehnfacht.

Zur Erläuterung ein Beispiel: Angenommen beim Assistenten 3 ist in der Team-Verwaltung das Stichwort \enquote{FCB} hinterlegt. Wenn gleichzeitig bei den privaten Bemerkungen am ersten Tag des Monats ein \enquote{FCB} enthalten ist, so wird der Punktewert des Assistenten von 30 auf 300 verzehnfacht (vergleiche auch Tabelle~\ref{tab:scoreTable4}). Damit hat Assistent 3 die höchste Punktezahl für den ersten Tag des Monats und wird für den Dienst eingeteilt.

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|c|}
\hline 
Tag des Monats & Private Bemerkungen & Assistent 1 & Assistent 2 & Assistent 3 \\ 
\hline 
1 (Montag) & FCB &0 & 40 & 300 \\ 
\hline 
2 (Dienstag) & & 1 & 20 & 0 \\ 
\hline 
3 (Mittwoch) & & 10 & 2 & 30 \\ 
\hline 
... & ... & ... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Punktetabelle nach Berücksichtigung der Stichwörter}
\label{tab:scoreTable4}
\end{table}

\subsection{Fünfte Version - Berücksichtigung der Stundenkontingente}
\label{sec:algorithmVersion5}
In der letzten Verfeinerung des Algorithmus werden die Stundenkontingente berücksichtigt. Bisher hat der Algorithmus über alle Tage iteriert und jeden Tag isoliert betrachtet. Für jeden Tag wurde ein lokales Optimum gefunden. In der Regel führt dieses Vorgehen allerdings zu einer sehr unausgewogenen Stundenverteilung zwischen den Assistenten. Um die Stundenkontingente der Assistenten gleichmäßig auzuschöpfen, ist es notwendig den gesamten Monat auf einmal zu betrachten. 

Dazu werden die Daten in ein anderes Tabellenformat (siehe Tabelle~\ref{tab:scoreTableConverted}) konvertiert. In die erste Spalte werden die Punkte aus Tabelle \ref{tab:scoreTable4} (wenn sie größer Null sind) eingetragen, in der zweiten Spalte steht der Assistent und in der dritten Spalte der Tag des Monats.
\begin{table}[htb]
\centering
\begin{tabular}{|l|l|l|}
\hline 
Punkte & Name & Tag \\ 
\hline
1 & Assistent 1 & 2 \\ 
\hline
10 & Assistent 1 & 3 \\ 
\hline
40 & Assistent 2 & 1 \\  
\hline
20 & Assistent 2 & 2 \\ 
\hline
2 & Assistent 2 & 3 \\ 
\hline
300 & Assistent 3 & 1 \\ 
\hline
30 & Assistent 3 & 3 \\ 
\hline 
\end{tabular}
\caption{Umgewandelte Punktetabelle}
\label{tab:scoreTableConverted}
\end{table}

Wenn jetzt von oben nach unten der Reihe nach die Dienst vergeben werden würden kann es zur Blockbildung (ein Assistent hat mehrere Tage hintereinander Dienst) kommen. Um dies zu verdeutlichen ist in Tabelle \ref{tab:scoreTableConvertedBlock} ein fiktives Beispiel dargestellt. 

\begin{table}[htb]
\centering
\begin{tabular}{|l|l|l|}
\hline 
Punkte & Name & Tag \\ 
\hline
10 & Assistent 1 & 1 \\ 
\hline
10 & Assistent 1 & 2 \\ 
\hline
10 & Assistent 1 & 3 \\  
\hline
10 & Assistent 2 & 1 \\ 
\hline
10 & Assistent 2 & 2 \\ 
\hline
10 & Assistent 2 & 3 \\ 
\hline
10 & Assistent 3 & 1 \\ 
\hline 
10 & Assistent 3 & 2 \\ 
\hline 
10 & Assistent 3 & 3 \\ 
\hline 
\end{tabular}
\caption{Umgewandelte Punktetabelle unter der Bedingung, das alle Assistenten Zeit haben und gleich priorisiert sind}
\label{tab:scoreTableConvertedBlock}
\end{table}

Falls alle Assistenten an den drei Tagen voll verfügbar wären und alle den Priorisierungswert 1 hätten, dann würden in der konvertierten Tabelle erst alle möglichen Termine von Assistent 1, dann von Assistent 2 und am Ende die von Assistent 3 stehen. Falls nun der Algorithmus von oben nach unten die Dienste verteilen würde, so würde erst Assistent 1 so lange Dienst am Stück bekommen, bis sein Stundenkontingent ausgeschöpft ist, danach Assistent 2 und so weiter.

Um die Blockbildung zu vermeiden, wird die Punktetabelle randomisiert (durcheinandergewürfelt, gemischt). Anschließend wird sie nur nach der ersten Spalte (dem Punktewert) sortiert (siehe Tabelle~\ref{tab:scoreTableConvertedAndSorted}), damit trotz Randomisierung garantiert ist dass die Vorlieben des Klienten berücksichtigt werden. 

\begin{table}[htb]
\centering
\begin{tabular}{|l|l|l|}
\hline 
Punkte & Name & Tag \\ 
\hline 
300 & Assistent 3 & 1 \\ 
\hline 
40 & Assistent 2 & 1 \\ 
\hline 
30 & Assistent 3 & 3 \\ 
\hline
20 & Assistent 2 & 2 \\ 
\hline 
10 & Assistent 1 & 3 \\ 
\hline 
2 & Assistent 2 & 3 \\ 
\hline 
1 & Assistent 1 & 2 \\ 
\hline 
\end{tabular}
\caption{Umgewandelte Punktetabelle, randomisiert und sortiert nach Punkten}
\label{tab:scoreTableConvertedAndSorted}
\end{table}

Da die Anzahl der benötigten Stunden nicht mit der Anzahl der zur Verfügung stehenden Stunden der Assistenten übereinstimmen muss, wird dies zunächst geprüft. Hierfür werden alle Stundenkontingente der Assistenten, die in der Team-Verwaltung (siehe Abschnitt~\ref{sec:TeamVerwaltung}) hinterlegt sind, addiert.

Dann werden alle Dienst- und Bereitschaftsstunden aus dem Monatsplan addiert.
Ist die Summe der Dienst- und Bereitschaftsstunden höher als die Summe der Stundenkontingente, so wird ein Skalierungsfaktor (Summe der Dienst- und Bereitschaftsstunden geteilt durch die Summe der Stundenkontingente) ermittelt und die Stundenkontingente mit dem Skalierungsfaktor multipliziert, sprich die Stundenkontingente aller Assistenten werden um einen Prozentsatz x erhöht. Damit wird erreicht, dass die Mehrarbeit gleichmäßig auf die Assistenten verteilt wird. Ist die Summe der Dienst- und Bereitschaftsstunden kleiner oder gleich der Summe der Stundenkontingente, bleiben die Stundenkontigente der Assistenten unverändert.

Nach den Vorbereitungsarbeiten wird der Kern des Algorithmus gestartet. Zuerst werden alle Dienste vergeben, anschließend die Bereitschaften. Der Algorithmus iteriert über die nach Punkten sortierte Tabelle~\ref{tab:scoreTableConvertedAndSorted}. In jeder Zeile der Tabelle prüft der Algorithmus ob der Assistent noch genug Stunden zur Verfügung hat und ob der Dienst an dem entsprechenden Tag noch frei ist. Falls beide Bedingungen erfüllt sind, bekommt der Assistent den Dienst eingetragen und seine verfügbaren Stunden werden um die Netto-Dienststundenanzahl des Tages verringert.

Durch die unterschiedlich langen Dienstzeiten von Tag zu Tag und unterschiedlichen Stundenkontingente wird nach dem ersten Durchgang nicht für jeden Tag ein Assistent für den Dienst bestimmt werden können.

Folgendes Beispiel soll dies erläutern. Angenommen der Monat hätte nur drei Tage. Die Dienstzeiten betragen 18, 16 und 14 Stunden. Die Summe der Dienstszeiten wäre 48. Es gibt zwei Assistenten (A1 und A2) mit Stundenkontingenten von 28 und 20 Stunden. Beide Assistenten haben an allen drei Tagen Zeit und haben gleiche Priorisierungswerte. Der Skalierfaktor wäre genau 1 und die Stundenkontingente der Assistenten würden nicht angepasst werden.
Nach dem ersten Durchlauf (bei gleichen Priorisierungswerten) hätte der erste Assistent (A1) den 18 Stunden-Dienst und der zweite Assistent (A2) den 16 Stunden-Dienst. Der 14 Stunden-Dienst würde bei keinem der beiden Assistenten mehr ins Stundenkontingent passen (siehe Abbildung \ref{fig:RosterExample1}).

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.35]{../Images/Screenshots/RosterExample1.png}
	\caption{Verteilung der Dienste mit 0 Stunden Toleranz}
	\label{fig:RosterExample1}
\end{figure}

Um die angesprochene Problematik zu lösen wird um den Kern des Algorithmus eine Schleife hinzugefügt, die einen Toleranzwert (beginnend bei Null Stunden) immer um eine volle Stunde inkrementell erhöht. Bei der Prüfung, ob der Assistent noch genug Stunden zur Verfügung hat, wird der Toleranzwert zum noch verbleibenden Stundenkontingent hinzugefügt. Die hinzugefügte Schleife endet, sobald für jeden Tag ein Dienst vergeben wurde.

Angewendet auf das oben genannte Beispiel würde der die Schleife im fünften Durchlauf (Toleranz = 4 Stunden - siehe Abbildung \ref{fig:RosterExample2}) dem ersten Assistenten  (A1) den Dienst geben, da die verbleibenden 10 Stunden (28 Stunden aus dem Stundenkontingent abzüglich der 18 Stunden des ersten Dienstes) seines Kontingentes mit der Toleranz von 4 Stunden addiert genau die 14 Stunden Dienstzeit ergibt (siehe Abbildung \ref{fig:RosterExample3}).

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.35]{../Images/Screenshots/RosterExample2.png}
	\caption{Stundenübersicht mit 4 Stunden Toleranz}
	\label{fig:RosterExample2}
\end{figure}

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.35]{../Images/Screenshots/RosterExample3.png}
	\caption{Verteilung der Dienste mit 4 Stunden Toleranz}
	\label{fig:RosterExample3}
\end{figure}

Nachdem alle Dienste vergeben wurden, werden auf dieselbe Weise die Bereitschaften vergeben. Einziger Unterschied ist, dass der Toleranzwert immer um eine halbe Stunde inkrementiert wird.

Durch das Randomisieren der Liste (siehe Tabelle~\ref{tab:scoreTableConvertedAndSorted}) können mehrere Dienstpläne erstellt werden. Um von den vielen möglichen Dienstplänen einen zu wählen, der die Stundenkontingente möglichst gleichmäßig ausschöpft, werden 1000 Dienstpläne erstellt und am Ende ermittelt, wie gut jeder Dienstplan ist. Als Metrik dient die Summe der beiden Toleranzwerte (Dienst und Bereitschaft). Das theoretische Optimum ist Null. Der Dienstplan mit der niedrigsten Summe der Toleranzwerte wird dem Benutzer angezeigt.

Durch die Randomisierung der Punktetabelle kann bei jeder Dienstplanerstellung ein anderern Dienstplan herauskommen. Dieses Verhalten ist vom Klienten auch erwünscht, da er sich mehrer verschiedene Dienstplanmöglichkeiten anzeigen lassen will.

\subsection{Implementierungsdetails}
Der kommentierte Quellcode\footnote{Die Mischung zwischen englischem Quellcode und deutschen Kommentaren ist schlechter Stil! Dies ließ sich leider nicht vermeiden, da der Quellcode in englischer Sprache programmiert wurde, die Ausarbeitung jedoch in deutscher Sprache verfasst ist.} der Implementierung der fünften Version des Algorithmus findet sich in Listing \ref{lst:rosterAlgorithm}.

\lstset{language=PHP, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:rosterAlgorithm,caption=Algorithmus zur Dienstplanerstellung]{../PHP/rosterAlgorithm.php}

\section{Aufgaben-Verwaltung}
\label{sec:AufgabenVerwaltung}
Dem Klienten und seinem Team steht eine Aufgaben-Verwaltung (siehe Abbildung~\ref{fig:ToDoManager}) zur Verfügung.
\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/ToDoManager.png}
	\caption[Aufgaben-Verwaltung]{Aufgaben-Verwaltung mit einigen Test-Aufgaben}
	\label{fig:ToDoManager}
\end{figure}

\subsection{Eigenschaften der Aufgaben}
Die Aufgaben haben folgende Eigenschaften:
\begin{itemize}
\item Beschreibung
\item Fälligkeitsdatum
\item Wiederholungstyp (wierholt sich nie, wiederholt sich ab Erledigungsdatum, wiederholt sich ab Fälligkeitsdatum)
\item Wiederholungsintervall (zum Beispiel alle 2 Tage) - vorausgesetzt, dass sich die Aufgabe wiederholt
\end{itemize}

\subsection{Gruppierung der Aufgaben}
Die Aufgaben werden an Hand ihres Fälligkeitsdatums in folgende Gruppen sortiert:
\begin{itemize}
\item Erledigt
\item Heute
\item Morgen
\item Übermorgen
\item Zukünftig
\item Ohne Datum
\end{itemize}

\subsection{Neue Aufgaben erstellen}
Der Klient hat als Einziger die Berechtigung, neue Aufgaben zu erstellen. Hierfür hat er eine Eingabemaske, wie sie in Abbildung~\ref{fig:ToDoManagerNewToDo} zu sehen ist.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.45]{../Images/Screenshots/ToDoManagerNewToDo.png}
	\caption[Erstellen einer neuen Aufgabe]{Aufgaben-Verwaltung - Erstellen einer neuen Aufgabe}
	\label{fig:ToDoManagerNewToDo}
\end{figure}

Bei der Auswahl des Fälligkeitsdatums wird er duch einen Kalender (siehe Abbildung~\ref{fig:ToDoManagerDatePicker}) unterstützt. Dieser öffnet sich automatisch, sobald das Eingabefeld für das Datum den Fokus bekommt und schließt sich wieder, sobald der Klient ein Datum gewählt hat oder auf \enquote{Abbrechen} klickt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/ToDoManagerDatePicker.png}
	\caption[Wahl des Datums]{Aufgaben-Verwaltung: Wahl des Datums}
	\label{fig:ToDoManagerDatePicker}
\end{figure}

\subsection{Aufgaben als erledigt markieren}
Sowohl Klient als auch Assistenten können Aufgaben als erledigt markieren. Hierfür wird die Checkbox links der Aufgabenbeschreibung angeklickt. Die Aufgabe wird mit Hilfe von JavaScript durchgestrichen und in die Kategorie \enquote{Erledigt} sortiert. Falls die Aufgabe ein Wiederholungsintervall besitzt, wird eine Kopie der Aufgabe mit neu berechnetem Fälligkeitsdatum erstellt. Weiterhin wird protokolliert, wer die Aufgabe als erledigt markiert hat.

Hat der Benutzer aus Versehen eine Aufgabe als erledigt markiert, kann er dies rückgängig machen, in dem er wieder die Checkbox links von der Aufgabenbeschreibung anklickt. Die Aufgabe ist nicht mehr durchgestrichen, wird in die richtige Kategorie (Heute, Morgen, ...) zurücksortiert und die gegebenenfalls erstellte Kopie der Aufgabe (mit neu berechnetem Fälligkeitsdatum) wird gelöscht.

\subsection{Speichern}
Um Änderungen an den Aufgaben (neue Aufgaben erstellt oder Aufgaben erledigt) zu sichern, muss der Benutzer auf den Knopf \enquote{Speichern} drücken.

\subsection{Implementierungsdetails}
Die Aufgaben-Seite wird vom PHP-Script \file{toDoManagerView.php} erstellt. Der größte Teil der Funktionalität ist clientsseitig im JavaScript \file{toDoManager.js} implementiert. Hier wird viel mit dem \texttt{Date}-Objekt gearbeitet, das mit dem Prototyping-Mechanismus (siehe Abschnitt \ref{sec:JavaScript}) in der Datei \file{DateExtended.js} um einige Funktionen erweitert wurde.
Weiterhin ist in der Datei \file{toDoManager.js} die Klasse \texttt{ToDo} enthalten. Der \texttt{DatePicker} ist in der Datei \file{datePicker.js} definiert.

Das PHP-Script \file{toDoSaver.php} speichert die offenen Aufgaben in die Datei \file{toDos.txt} und die erledigten Aufgaben in die Datei \file{done.txt}. Beide Dateien liegen im Ordner \folder{ToDoManager}.

\section{Feedback}
Mit der Feedback-Funktion hat der Benutzer die Möglichkeit, Kontakt zum Entwickler des Assistenzplaners aufzunehmen. Es gibt ein Formular (siehe Abbildung \ref{fig:Feedback}), worin Feedback, Änderungswünsche und Kritik geäußert werden können. Wenn für den Benutzer eine E-Mail-Adresse hinterlegt ist (Klient $\Rightarrow$ Einstellungen, Assistent $\Rightarrow$ Team-Verwaltung), so wird diese automatisch als E-Mail-Adresse für eine Antwort vorgeschlagen. Der Benutzer kann aber auch eine andere Antwort-Adresse angeben.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../Images/Screenshots/Feedback.png}
	\caption{Eingabemaske für das Feedback}
	\label{fig:Feedback}
\end{figure}

\subsection{Implementierungsdetails}
Die Generierung des Feedback wird vom PHP-Script \file{feedbackView.php} durchgeführt. Drückt der Benutzer auf den \button{Feedback abschicken}, so wird die Funktion \texttt{sendFeedback} im JavaScript \file{feedback.js} aufgerufen. Diese Funktion schickt das Feedback per \texttt{POST}-Parameter an das PHP-Script \file{feedbackSender.php}. Dieses Script erstellt im Wesentlichen eine Instanz von \Link{https://github.com/PHPMailer/PHPMailer}{\texttt{PHPMailer}}{12.09.2014} und verschickt eine E-Mail an den Entwickler des Assistenzplaners. Die E-Mail-Adresse für die Antwort ist in der versendeten E-Mail enthalten, so dass der Entwickler den direkten Kontakt mit dem Benutzer, der das Feedback formuliert hat, aufnehmen kann.

\section{Dokumentation}
\label{sec:Dokumentation}
Für die Benutzer des Assistenzplaners steht jederzeit im Navigations-Bereich (oben rechts) ein Link zur Verfügung, der zur Dokumentation führt.
Der Dokumentations-Inhalt wird individuell erzeugt. Klienten bekommen eine andere Dokumentation zu Gesicht als Assistenten, da beide auf unterschiedliche Weise mit dem Assistenzplaner arbeiten. Weiterhin werden die Einstellungen berücksichtigt, zum Beispiel wird das Dokumenations-Kapitel über die Aufgaben-Verwaltung nur angezeigt, wenn diese auch verwendet wird.

Im oberen Bereich der Dokumentation werden Inhalts-, Abbildungs- und Tabellenverzeichnisse angezeigt, damit der Benutzer leicht zum entsprechenden Kapitel der Dokumentation navigieren kann.

\subsection{Implementierungsdetails}
Die Dokumentations-Seite wird vom PHP-Script \file{documentation.php} erstellt. Abhängig von den Variablen, die im superglobalen Array \texttt{\$\_SESSION} gesetzt sind, wird der Inhalt variiert. Es werden weitere PHP-Scripts\footnote{Die weiteren PHP-Scripts beginnen alle mit dem Präfix \file{documentation}, zum Beispiel \file{documentationCalendar.php}} per \texttt{include} eingebunden.
%\footnote{\file{documentationCalendar.php}, \file{documentationCalendarColor.php}, \file{documentationMonthNavigation.php}, \file{documentationMonthPlan.php}, \file{documentationNavigation.php}, \file{documentationRoster.php}, \file{documentationRosterClient.php}, \file{documentationSettings.php}, \file{documentationStandardWorkingTimes.php}, \file{documentationTeam.php}, \file{documentationToDoManager.php}, \file{documentationToDoManagerAssisatant.php}, \file{documentationToDoManagerClient.php}}

Im oberen Bereich der Dokumentation werden mit Hilfe des JavaScripts \file{documentation.js} automatisch Inhalts-, Abbildungs- und Tabellenverzeichnisse erstellt. Für die Erstellung des Inhaltsverzeichnis werden alle Überschriften\footnote{HTML-Tags: \texttt{h1}, \texttt{h2}, \texttt{h3}, \texttt{h4}, \texttt{h5}, \texttt{h6}} geparst und deren Inhalte ausgelesen. Die Erstellung der Abbildungs- und Tabellenverzeichnisse funktioniert analog.

Wenn in Abbildungen (HTML-Tag: \texttt{img}) oder Tabellen (HTML-Tag: \texttt{table}) das Attribut \texttt{title} gesetzt ist, so werden Abbildungs- bzw. Tabellenunterschriften mit dem Inhalt des \texttt{title}-Attributes erstellt.

\section{Impressum}
Um eine Abmahnung zu vermeiden, wurde dem Assistenzplaner eine Seite hinzugefügt, die jederzeit über die Navigation zu erreichen ist. Diese beinhaltet das Impressum mit allen Angaben gemäß § 5 Telemediengesetz, einen Haftungsausschuss (Disclaimer) sowie eine Datenschutzerklärung.

\subsection{Implementierungsdetails}
Das Impressum ist im PHP-Script \file{impressum.php} hinterlegt.

\chapter{Überführung in den Produktiv-Betrieb}
Die Überführung in den Produktiv-Betrieb wurde iterativ durchgeführt. 

Den Dienstplan für den Monat April 2014 hat der Klient noch komplett manuell erstellt.

Schon bei der Dienstplanerstellung für den Mai 2014 wurde der Klient technisch unterstützt. Es war möglich, die Termin-Antworten der Assistenten übersichtlich in einer Tabelle darzustellen. Somit musste der Klient nicht mehr sieben E-Mail Antworten gleichzeitig überblicken. Es war möglich, Dienste und Bereitschaften manuell einzutragen und den Dienstplan zu speichern.

Bei der Dienstplanerstellung für Juni 2014 hat bereits ein Algorithmus im Hintergrund gearbeitet und Dienstplanvorschläge erstellt. Der Klient hat den Dienstplan eigenständig erstellt.

Bei der Dienstplanerstellung für Juli 2014 waren alle nötigen Komponenten vorhanden. Der Klient hat den Dienstplan eigenständig erstellt und hätte schon sein Team einbeziehen können.

Ab dem Dienstplan für den Monat August 2014 haben der Klient und die Assistenen ihre Eingaben selbstständig getätigt. Der Algorithmus zur Dienstplanerstellung hat einen ausgewogenen Dienstplan erstellt, der vom Klienten angenommen wurde.

Durch die iterative Vorgehensweise fühlte sich der Klient sehr gut eingebunden. Er konnte in regelmäßigen Intervallen den aktuellen Stand der Software sehen und sein Feedback äußern, welches direkt in die weitere Entwicklung eingeflossen ist.

\chapter{Ergebnis}
Der \LinkWithoutDate{http://assistenzplaner.de/}{Assistenzplaner} wurde als serverbasierte Anwendung geschaffen, um körperlich behinderte Menschen (Klienten) und ihre Assistenz-Teams bei der Planung zu unterstützen.

Der Klient hat die Möglichkeit, sein Assistenz-Team zu verwalten. Dabei kann der Klient neben den Kontaktdaten auch Priorisierungswerte und Stundenkontigente der Assistenen definieren.

Der Klient kann mit dem Monats-Plan die Dienstzeiten für einen Monat festlegen. Seine Assistenten werden per Knopfdruck benachrichtigt und gebeten, ihre Termine in einen Kalender einzutragen.

Ein Algorithmus erstellt automatisch einen Dienstplanvorschlag, der alle Vorlieben des Klienten und die möglichst gleichmäßige Ausschöpfung der Stundenkontigente berücksichtigt. Der Klient kann sich mehrere Dienstplanvorschläge erstellen lassen. Weiterhin ist es möglich den Dienstplan manuell anzupassen.

Die Laufzeit des Algorithmus hängt stark von den möglichen Terminen der Assistenten ab. Die durchschnittliche Laufzeit einer Dienstplanerstellung liegt bei einer Millisekunde. Da 1000 Dienstpläne erstellt werden und der beste gewählt wird, liegt die durchschnittliche Gesamtlaufzeit bei einer Sekunde. Da der Klient nur einmal im Monat einen Dienstplan erstellen lässt, ist diese Laufzeit vertretbar.

Am Algorithmus ließen sich noch ein paar Dinge optimieren, aber nach dem Motto \Link{http://www.clean-code-developer.de/Roter-Grad.ashx}{\enquote{Vorsicht vor Optimierungen}}{29.08.2014} von Clean Code Developer wurde zu Gunsten der Code-Lesbarkeit vorerst davon abgesehen.

Eine Aufgaben-Verwaltung rundet den Assistenzplaner ab.

Die Webanwendung wurde mit vielen gängigen Browsern (Firefox, Chrome, Safari) erfolgreich getestet.

Bei Abgabe dieser vorliegenden Ausarbeitung wurde ein \LinkWithoutDate{http://assistenzplaner.de/master}{Code-Freeze des Assistenzplaners} durchgeführt.

Der Klient ist mit dem Ergebnis sehr zufrieden! Er nutzt nur noch den Assistenzplaner für die Dienstplanerstellung und spart dadurch jeden Monat mehrere Stunden mühseelige Arbeit.

\chapter{Fazit und Ausblick} % alternativ: Diskussion und Ausblick
Es wurde eine Webanwendung erschaffen, die dem Klienten sehr viel Arbeit abnimmt. Der Klient ist mit der Lösung sehr zufrieden und wird in Zukunft nur noch den Assistenzplaner zur Dienstplanerstellung verwenden. Alle gewünschten Benutzergeschichten (siehe Abschnitt~\ref{sec:userstories}) wurden umgesetzt.

Die entstandende Lösung ist voll funktionsfähig und in sich geschlossen. Dennoch gibt es einige Stellen mit Verbesserungs- oder Erweiterungspotential.

\section{Einsatz bei mehreren Teams}
Der Assistenzplaner ist derzeit (September 2014) eine spezialisierte Lösung für einen Klienten mit seinem Team.
Am 01.09.2014 fand ein Gespräch mit dem \Link{http://inklusion.rlp.de/der-landesbeauftragte/}{Landesbeauftragten für die Belange behinderter Menschen in Rheinland Pfalz - Matthias Rösch}{02.09.2014} statt. Hier wurde dem Landesbeauftragten der Assistenzplaner vorgestellt. Der Landesbeauftrage hat selbst sechs Assistenten, erstellt derzeit seine Dienstpläne manuell und war sehr interessiert am Assistenzplaner. Weiterhin konnte er einige Ansprechpartner im Bereich Assistenzplanung nennen.

In der weiteren Entwicklung werden sich hoffentlich einige Beta-Tester bereit erklären den Assistenzplaner einzusetzen. Sicherlich werden noch Anforderungen hinzukommen, da jeder Klient mit seinem Team einen anderen Prozess und unterschiedliche Rahmenbedingungen bei der Dienstplanerstellung hat.

Sobald der Assistenzplaner von einigen Klienten mit ihren Teams erfolgreich erprobt ist, wird der Assistenzplaner öffentlich beworben.\footnote{Es besteht keinerlei finanzielles Interesse. Die Nutzung des Assistenzplaners ist kostenlos und wird es auch immer bleiben.} Einige mögliche Kanäle sind nachfolgend aufgezählt:

\begin{itemize}
\item \Link{http://inklusion-blog.rlp.de}{Blog von Matthias Rösch, Landesbeauftragter für die Belange behinderter Menschen in Rheinland-Pfalz}{02.09.2014}
\item \Link{http://www.kobinet-nachrichten.org}{kobinet Nachrichten - Online-Nachrichten von und für behinderte Menschen}{02.09.2014}
\item \Link{http://www.forsea.de}{ForseA - Forum selbstbestimmter Assistenz behinderter Menschen e.V.}{02.09.2014}
\item Flyer im \Link{http://www.zsl-mz.de}{ZSL Mainz}{02.09.2014}, \Link{http://www.zsl-bad-kreuznach.org}{ZSL Bad Kreuznach}{02.09.2014}, \Link{http://www.commit-cbf.de}{Commit Mainz}{02.09.2014} und weiteren Einrichtungen hinterlegen
\item Nachricht über den E-Mail-Verteiler des Landesbeauftragen
\item Kleinanzeige im Anzeigenblatt der \Link{http://www.dmsg.de}{Deutschen Multiple Sklerose Gesellschaft}{14.09.2014}
\end{itemize}


\section{Mögliche Verbesserungen}
In diesem Abschnitt werden mögliche Verbesserungen des Assistenzplaners vorgestellt und diskutiert.

%\subsection{Speicherung in Datenbank}
%Derzeit werden die Daten persistent in Text-Dateien gespeichert. Langfristig sollte über eine Speicherung in einer Datenbank nachgedacht werden. Denkbar wäre, alle Daten in einer großen Datenbank zu speichern. Eine weitere Möglichkeit wäre, pro Klient eine dateibasierte SQLite Datenbank anzulegen. Die zweite Möglichkeit hat den Vorteil, dass sich die Daten leichter zwischen Entwickler-System und Produktiv-System austauschen lassen und keinerlei Anforderungen an den Server (bezüglich einer Datenbank) gestellt werden.

\subsection{Barrierefreiheit}
\enquote{Eine barrierefreie Webanwendung basiert grundsätzlich auf zwei Säulen: der Accessibility und der Usability.} \cite[S.~30]{bremus2013barrierefreiheit}

\enquote{Unter Accessibilty ist die Zugänglichkeit bzw. Erreichbarkeit in Bezug auf eine Anwendung zu verstehen. Sie beschreibt die Fähigkeit, Informationen für jeden Benutzer zugänglich zu machen, unabhängig von technischen und körperlichen Voraussetzungen und Einschränkungen.}  \cite[S.~31]{bremus2013barrierefreiheit} 

\enquote{Die Usability strebt nach der idealen Strukturierung von Informationen, um eine effiziente Nutzung von Informationen und Technologie überhaupt erst zu ermöglichen.} \cite[S.~31]{bremus2013barrierefreiheit}

Da der Assistenzplaner langfristig von vielen körperlich behinderten Menschen bedient werden soll, ist eine Untersuchung der entstanden Softwarelösung auf gute Accessibilty und Usability notwendig. Es muss verifiziert werden, dass die Seite im Idealfall barrierefrei, mindestens jedoch barrierearm ist.\footnote{\enquote{Verstärkt setzt sich in der letzten Zeit der Begriff des barrierearmen Webdesigns durch. Das beruht auf der Tatsache, dass eine 100\%-ige Barrierefreiheit einer Webanwendung nicht zu erreichen ist. Verschiedene Benutzerinteressen, Hilfsmittel und technische Voraussetzungen machen die Barrierefreiheit einer Anwendung unmöglich.} \cite[S.~29]{bremus2013barrierefreiheit}}

\subsection{AJAX tiefer verwurzeln}
Derzeit wird AJAX nur auf Knopfdruck eingesetzt. An vielen Stellen muss der Benutzer explizit auf einen Speichern-Button drücken, um die eingegebenen Daten persistent zu sichern. In einer moderenen Webanwendung ist dies ungewöhnlich. Besser wäre es, wenn Änderungen, die der Benutzer vornimmt, direkt per AJAX an den Server geschickt werden und der Server die Daten unverzüglich persistent ablegt.

\subsection{Responsive Webdesign}
Responsive (reaktionsfähiges) Webdesign bedeutet auf \enquote{die steigende Anzahl verschiedener Display-Größen und Geräte angemessen zu reagieren} \cite[S.~8]{zillgens2013responsive}.

Auf Desktops und Tablets wird der Assistenzplaner ordentlich dargestellt und kann gut bedient werden. Auf Smart-Phones ist das Aussehen und die Bedienung verbesserungswürdig (siehe Abbildung~\ref{fig:AssistancePlannerOniPhone}). Die Eingabefelder sind klein und die Display-Größe kann besser ausgenutzt werden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.3]{../Images/Screenshots/AssistancePlannerOniPhone.png}
	\caption[Darstellung des Assistenzplaners auf einem Smart-Phone]{Darstellung des Assistenzplaner auf einem Smart-Phone..}
	\label{fig:AssistancePlannerOniPhone}
\end{figure}

Bei der Optimierung des Assistenzplaners für Handys muss umgedacht werden. Die Enwicklung muss sich von dem horizontal-basierten Layout mit Spalten abkehren und zu einem linear-vertikalen Layout hinwenden \cite[S.~67]{bieh2008mobiles}. 

\subsection{Team-Übersicht überarbeiten}
Derzeit wird das Team mit Hilfe einer Tabelle verwaltet. Zu Beginn der Entwicklung war das die richtige Entscheidung. Im Laufe der Entwicklung wurden Spalten ergänzt und die Tabelle wurde mit der Zeit immer breiter (siehe Abbildung~\ref{fig:TeamTable}). Eine mögliche Alternative zur breiten Tabelle ist in Abbildung~\ref{fig:SingleTeamMember} gezeigt. Für jeden Assistenten gibt es eine eigene Übersicht der Eigenschaften.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/SingleTeamMember.png}
	\caption[Mögliche neue Darstellungform des Teams]{Mögliche neue Darstellungsform eines Assistenten in der Team-Übersicht}
	\label{fig:SingleTeamMember}
\end{figure}

Derzeit hat nur der Klient Einblick in die Team-Verwaltung. Es wäre wünschenswert, wenn Assistenen untereinander ihre Kontaktdaten (die ersten vier Zeilen in Abbildung~\ref{fig:SingleTeamMember}) freigeben könnten.

\subsection{Überarbeitung der Dokumentation}
Derzeit ist der Assistenzplaner für Klienten und Assistenten auf einer zentralen Seite (siehe Abschnitt~\ref{sec:Dokumentation}) dokumentiert.
Wünschenswert wäre es, wenn kontextsensitive Informationen zusätzlich über den gesamten Assistenzplaner kontextsensitiv leicht zugänglich verteilt wären. Eine Möglichkeit der Realisierung besteht mit Hilfe von \Link{http://jqueryui.com/tooltip/}{jQuery UI Tooltip}{22.08.2014} (siehe Abbildung~\ref{fig:jQueryUiTooltip}). Sobald der Benutzer in das Feld \enquote{Lastname} klickt, bekommt er einem Hilfstext (Tooltip) angezeigt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.4]{../Images/Screenshots/jQueryUi/jQueryUiTooltip.png}
	\caption[jQueryUI Tooltip]{jQueryUI Tooltip}
	\label{fig:jQueryUiTooltip}
\end{figure}

\subsection{Verwendung von Frameworks}
Derzeit ist alles von Grund auf händisch programmiert. Es wurden bewusst keine Frameworks eingesetzt, um genau zu verstehen, was im Hintergrund passiert und jederzeit die Kontrolle zu haben. Es ist ein schlankes System entstanden, das unabhängig von Drittanbietern ist.

Im Rahmen der Weiterführung als Open-Source-Projekt können mehrere Entwickler am Assistenzplaner arbeiten. Unter diesem Gesichtspunkt wäre es wünschenswert, auf Frameworks aufzubauen, die verbreitet sind. Ein Beispiel für ein weit verbreitetes JavaScript-Framework ist \Link{http://jquery.com}{jQuery.}{29.08.2014} Ein weiterer Vorteil wäre, dass die Abdeckung aller gängigen Browser garantiert wäre.

Serverseitig sei das PHP-Framework \Link{http://symfony.com}{Symfony}{29.08.2014} erwähnt, dass das Prinzip des \NewAbb{MVC}{Model View Controller} konsequent einsetzt.

\section{Mögliche Erweiterungen}
In diesem Abschnitt werden mögliche Erweiterungen des Assistenzplaners vorgestellt und diskutiert.

\subsection{Mehrere Dienste pro Tag}
Derzeit ist nur ein Dienst pro Tag planbar. Um noch mehr Klienten zu erreichen wäre es sinnvoll, wenn mehrere Dienste pro Tag planbar wären.

\subsection{Internationalisierung}
Derzeit ist der Assistenzplaner komplett in Deutsch. Um auch andere Sprachen zu unterstützen wäre ein grundlegender Umbau notwendig. Weiterführende Informationen finden sich in der offiziellen \Link{http://php.net/manual/en/book.intl.php}{PHP-Dokumentation.}{21.08.2014}

\subsection{iCalendar Export}
Im iCalendar-Format können Termine ausgetauscht werden. Ein Beispiel für ein Ereignis im iCalendar Format:

\lstset{language=, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleCalendar,caption=Beispiel für ein iCalendar-Termin]{../iCalendar/example.ics}

In dem Ereignis ist der Dienst vom 22.08.2014 14:00 Uhr bis 23.08.2014 9:00 Uhr beschrieben.

Für die Assistenten wäre es interessant ihre Dienst- und Bereitschaftszeiten im iCalendar-Format abonnieren zu können. So hätten die Assistenten jederzeit aktuell ihre Arbeitszeiten verfügbar, ohne ständig online auf dem Assistenzplaner nachschauen zu müssen. Ein iCalendar lässt sich leicht in den eigenen Online-Kalender integrieren, so dass sich die Dienst- und Bereitschaftszeiten jederzeit von unterwegs auf dem Smart-Phone einsehen lassen.

\subsection{Feiertage importieren}
Für die Erstellung des Monatsplans wäre es für den Klienten hilfreich, wenn der Benutzer gesetzliche Feiertage importieren könnte. Im Idealfall würde sogar das Bundesland, in dem der Klient lebt, berücksichtigt werden.
Zum Beispiel könnte der Klient auf der Webseite \Link{http://www.ifeiertage.de}{iFeiertage}{05.09.2014} einen Feiertage-Kalender abonnieren. Dieser wäre als \Link{webcal://ifeiertage.de/rp.ics}{iCalendar}{05.09.2014} verfügbar.

Denkbar wäre, dass der Klient beim Monatsplan einen Button \enquote{Feiertage importieren} zur Verfügung gestellt bekommt. Betätigt er diesen Knopf, so werden alle Feiertage für diesen Monat in den öffentlichen Notizen eingetragen. Weiterhin werden die Dienstzeiten auf 24-stündige Dienste angepasst, da der Klient an Feiertagen rund um die Uhr Assistenz benötigt.

\subsection{Logging}
Derzeit ist nicht nachvollziehbar, wer wann welche Änderungen am Assistenzplaner vorgenommen hat. Für zukünftigen Support und Fehlersuche wäre es wünschenswert ein Log-File zu nutzen. Daraus wäre bei Bedarf ersichtlich, welche Änderungen in der letzten Zeit gemacht wurden und von wem diese durchgeführt wurden.

\subsection{Aufgaben-Verwaltung erweitern}
Die Aufgaben-Verwaltung wurde nur rudimentär entwickelt. Schon zu einem frühen Zeitpunkt hat der Klient entschieden, die Aufgaben-Verwaltung für sein Team nicht einzusetzen, da der Mehraufwand durch die Verwaltung zu groß wäre. Aufgrund dieser Entscheidung wurde die Entwicklung nach einer Woche wieder eingestellt. Für andere Modelle in der Pflege wäre es aber eventuell von Vorteil die Aufgaben-Verwaltung zu nutzen. Mögliche Erweiterungen werden in den folgenden Abschnitten dargestellt.

\subsubsection{Hervorhebungen bei  Datumswahl}
In der Datumswahl (siehe Abbildung~\ref{fig:ToDoManagerDatePicker}) sollte der aktuelle Tag sowie der gewählte Tag farblich hervorgehoben werden.

\subsubsection{Aufgaben editieren}
Aufgaben lassen sich derzeit nur anlegen, nicht im Nachhinein verändern. Eine Editierfunktion wäre von großem Nutzen.

\subsubsection{Aufgabe löschen}
Aufgaben lassen sich derzeit nur anlegen, aber nicht löschen.

\subsubsection{Übersicht erledigter Aufgaben}
Von Vorteil (gerade für die Nachweise der Leistungserbringung) wäre es, wenn nachvollziehbar wäre, welcher Assistent, wann, welche Aufgabe erledigt hat.

\section{Weiterführung}
Das Projekt wird weitergeführt. Der \LinkWithoutDate{http://assistenzplaner.de}{Assistenzplaner} wird in Zukunft kontinuierlich verbessert und erweitert. Die Quellen des Assistenzplaners sind Open-Source und in einem öffentlichen Repository bei \LinkWithoutDate{https://github.com/Ulle84/AssistancePlaner}{GitHub} eingecheckt. So hat jeder die Möglichkeit, sich den Assistenzplaner auf dem eigenen Server einzurichten.

%persönliches Fazit?

% Literaturverzeichnis ---------------------------------------------------------
%   Das Literaturverzeichnis wird aus der BibTeX-Datenbank
%   erstellt.
% ------------------------------------------------------------------------------
\bibliography{../BibTeX/literatur} % Aufruf: bibtex
\bibliographystyle{natdin} % DIN-Stil des Literaturverzeichnisses

% Anhang -----------------------------------------------------------------------
\begin{appendix}
%\chapter{Verzeichnisse}
\listoftables

\listoffigures

\renewcommand{\lstlistlistingname}{Verzeichnis der Listings}
\lstlistoflistings % Listings-Verzeichnis

%Glossar
\let\stdchapter\chapter %Nummer vor Abkürzungsverzeichnis (speichern der chapter Umgebung)
\def\chapter*#1{\stdchapter{#1}} % neue Definition von chapter
\printnomenclature
\let\chapter\stdchapter % zurück zur alten Definition

\chapter{Inhalt der beiligenden CD}
Auf den Ordnern der beiliegenden CD sind folgende Daten enthalten:
\begin{itemize}
\item \folder{BibTeX} $\Rightarrow$ BibTeX-Datei, in der alle Literaturquellen enthalten sind
\item \folder{CSS} $\Rightarrow$ CSS-Dateien, in denen die Style-Formatierungen enhalten sind
\item \folder{Data} $\Rightarrow$ Die Daten, die der Assistenzplaner persistent speichert
\item \folder{ExternalResources} $\Rightarrow$ FreePDF und PHPMailer
\item \folder{HTML} $\Rightarrow$ HTML-Dateien
\item \folder{iCalendar} $\Rightarrow$ iCalendar-Beispiel-Datei
\item \folder{Images} $\Rightarrow$ Screenshots und weiter Bilder
\item \folder{JavaScript} $\Rightarrow$ JavaScript-Dateien
\item \folder{LaTeX} $\Rightarrow$ Quelldateien dieser Ausarbeitung
\item \folder{LibreOffice} $\Rightarrow$ Tabelle
\item \folder{Modell} $\Rightarrow$ UML- und SysML-Modelle
\item \folder{PDF} $\Rightarrow$ PDF-Dokumente
\item \folder{PHP} $\Rightarrow$ PHP-Dateien
\item \folder{XML} $\Rightarrow$ XML-Beispiel-Datei
%\item \folder{} $\Rightarrow$ 
\end{itemize}

\chapter{Verwendete Software}
In diesem Abschnitt wird erläutert, welche Software für die Erstellung dieser Master-Thesis eingesetzt wurde.

\section*{\LaTeX}
Die vorliegenden Ausarbeitung wurde mit \LaTeX\ geschrieben. Verwendet wurde die Distribution TeXLive (Details siehe Abbildung \ref{fig:TexDistribution}). Als Editor wurde TeXMaker (Version siehe Abbildung \ref{fig:TeXMaker}) verwendet.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/TexDistribution.png}
	\caption{Infodialog der Tex-Distribution}
	\label{fig:TexDistribution}
\end{figure}

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/TeXMaker.png}
	\caption{Infodialog des TeXMakers}
	\label{fig:TeXMaker}
\end{figure}

\section*{Enterprise Architect}
Für die Erstellung der SysML und UML Diagramme wurde Enterprise Architect in der Version 9.2 verwendet.

\section*{PhpStorm}
Als \NewAbb{IDE}{Integrated Development Environment} für die Entwicklung von PHP, HTML, CSS und JavaScript wurde PhpStorm (Version siehe Abbildung \ref{fig:PhpStorm}) verwendet.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/PhpStorm.png}
	\caption{Infodialog der IDE PhpStorm}
	\label{fig:PhpStorm}
\end{figure}

\section*{Cyberduck}
Als Client für den Transfer von Daten zwischen Entwicklerlaptop und Server via \NewAbb{FTP}{File Transfer Protocol} wurde Cyberduck (Version siehe Abbildung \ref{fig:Cyberduck}) eingesetzt. 

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/Cyberduck.png}
	\caption{Infodialog des FTP-Programms Cyberduck}
	\label{fig:Cyberduck}
\end{figure}

\section*{GitHub}
Es wurde ein öffentliches Repository auf \LinkWithoutDate{https://github.com/Ulle84/AssistancePlaner}{GitHub} erstellt. 

Als Client für den Transfer von Daten zwischen Entwicklerlaptop und GitHub-Server wurde GitHub (Version siehe Abbildung \ref{fig:GitHub}) eingesetzt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/GitHub.png}
	\caption{Infodialog des Programs GitHub}
	\label{fig:GitHub}
\end{figure}

\section*{Firefox}
Zum Testen des HTML und CSS-Codes wurde Firefox (Version siehe Abbildung \ref{fig:Firefox}) eingesetzt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/Firefox.png}
	\caption{Infodialog des Programs Firefox}
	\label{fig:Firefox}
\end{figure}

Zum Debuggen von JavaScript-Code kam die Firefox-Erweiterung Firebug (Version siehe Abbildung \ref{fig:Firebug}) zum Einsatz. 

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/Firebug.png}
	\caption{Infodialog der Firefox-Erweiterung Firebug}
	\label{fig:Firebug}
\end{figure}

\section*{PHP}
PHP wurde in der Version 5.5 (siehe Abbildung \ref{fig:PhpInfo}) eingesetzt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.7]{../Images/Screenshots/PhpVersion.png}
	\caption{Verwendete PHP Version}
	\label{fig:PhpInfo}
\end{figure}

Weiterhin wurden die Klassen \Link{https://github.com/PHPMailer/PHPMailer}{\texttt{PHPMailer}}{12.09.2014} und \Link{http://www.fpdf.org}{FPDF}{13.09.2014} verwendet. Beide sind frei verfügbar und bedenkenlos in dem Open-Source-Projekt Assistenzplaner einsetzbar.

% Enterprise Architect 11.1 Build 1110 von \Link{http://www.sparxsystems.de}{Sparx Systems}{22.08.2014}
%--> SysML Erweiterung?

    
% \input{Quellcode}
\end{appendix}

% Index ------------------------------------------------------------------------
%   Zum Erstellen eines Index, die folgende Zeile auskommentieren.
% ------------------------------------------------------------------------------
%\printindex

\end{document}
