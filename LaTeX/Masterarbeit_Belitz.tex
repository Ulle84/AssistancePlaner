% ------------------------------------------------------------------------------
% Formatvorlage für Masterarbeiten an der Ohm-Hochschule Nürnberg
% ------------------------------------------------------------------------------
%   erstellt von Stefan Macke, 24.04.2009
%   http://blog.stefan-macke.de

% Dokumentenkopf ---------------------------------------------------------------
%   Diese Vorlage basiert auf "scrreprt" aus dem koma-script.
% ------------------------------------------------------------------------------
\documentclass[
    11pt, % Schriftgröße
    DIV10,
    ngerman, % für Umlaute, Silbentrennung etc.
    a4paper, % Papierformat
    oneside, % einseitiges Dokument
    titlepage, % es wird eine Titelseite verwendet
    parskip=half, % Abstand zwischen Absätzen (halbe Zeile)
    headings=normal, % Größe der Überschriften verkleinern
    listof=totocnumbered, % Verzeichnisse im Inhaltsverzeichnis aufführen
    bibliography=totocnumbered, % Literaturverzeichnis im Inhaltsverzeichnis aufführen
    index=totoc, % Index im Inhaltsverzeichnis aufführen
    captions=tableheading, % Beschriftung von Tabellen unterhalb ausgeben
    final % Status des Dokuments (final/draft)
]{scrreprt}

% Meta-Informationen -----------------------------------------------------------
%   Informationen über das Dokument, wie z.B. Titel, Autor, Matrikelnr. etc
%   werden in der Datei Meta.tex definiert und können danach global
%   verwendet werden.
% ------------------------------------------------------------------------------
\input{Meta}

% benötigte Packages -----------------------------------------------------------
%   LaTeX-Packages, die benötigt werden, sind in die Datei Packages.tex
%   "ausgelagert", um diese Vorlage möglichst übersichtlich zu halten.
% ------------------------------------------------------------------------------
\input{Packages}

% Erstellung eines Index und Abkürzungsverzeichnisses aktivieren ---------------
\makeindex
\makenomenclature

% Kopf- und Fußzeilen, Seitenränder etc. ---------------------------------------
\input{Seitenstil}

% eigene Definitionen für Silbentrennung
\include{Silbentrennung}

% eigene LaTeX-Befehle
\include{Befehle}

% Das eigentliche Dokument -----------------------------------------------------
%   Der eigentliche Inhalt des Dokuments beginnt hier. Die einzelnen Seiten
%   und Kapitel werden in eigene Dateien ausgelagert und hier nur inkludiert.
% ------------------------------------------------------------------------------
\begin{document}
\pagenumbering{arabic}
% auch subsubsection nummerieren
\setcounter{secnumdepth}{1}
\setcounter{tocdepth}{1}

% Deckblatt und Abstract ohne Seitenzahl
%\ofoot{}
\include{Deckblatt}
\include{Erklaerung} % Selbständigkeitserklärung

%TODO alle Todos erledigen ;-)
%TODO Captions (Bildunterschriften) überprüfen

\addchap{Abstract}
\label{sec:Abstract}
%TODO Abstract am Ende auf Englisch schreiben

\addchap{Kurzfassung}
\label{sec:Zusammenfassung}
%TODO Zusammenfassung am Ende schreiben

\addchap{Danksagung}
%TODO Danksagung formulieren?
%Mahr
%Zweitkorrektor
%Patrick
%Marielle
%Freddy
%Korrektoren (Melanie)

%\ofoot{\pagemark}

% Seitennummerierung -----------------------------------------------------------
%   Vor dem Hauptteil werden die Seiten in großen römischen Ziffern 
%   nummeriert.
% ------------------------------------------------------------------------------
\tableofcontents % Inhaltsverzeichnis

% Abkürzungsverzeichnis --------------------------------------------------------

%\listoffigures % Abbildungsverzeichnis

% arabische Seitenzahlen im Hauptteil ------------------------------------------
%\clearpage
%\include{Inhalt/Roadmap}


%\addchap{Vorbemerkungen}
%TODO ausformulieren
- Geschlecht -> männlich beinhaltet auch weiblich
- "denglische" Formulierungen wie ausgeloggt werden vermieden
- wo finde ich das ganze -> Assistenzplaner.de/master
- ??? Verweis auf Buch technisches Schreiben Prezanos


\chapter{Motivation}
%TODO falls Abgrenzung zu Zusammenfassung/Abstract zu unscharf, dann Kapitel streichen
Ein Bekannter des Autors ist ein körperlich behinderter Mensch (im folgenden nur noch "Klient" genannt), der auf Assistenz angewiesen ist. Der Klient hat sieben Assistenten. Bisher hat der Klient den Dienstplan jeden Monat manuell mit Hilfe von Excel erstellt. Der Klient hat gleichzeitig die sieben E-Mails seiner Assistenten überblickt (in denen die möglichen Termine enthalten waren) und mühevoll einen möglichst ausgewogenen Dienstplan erstellt. Der Dienstplan sollte die Verfügbarkeiten und die Stundenkontigente der Assistenten möglichst gut berücksichtigen. Das Erstellen des Dienstplans hat den Klienten ca. vier Stunden pro Monat gekostet.

Um den Klienten zu entlasten und technisch besser zu unterstützen, wurde die Idee des Assistenzplaners ins Leben gerufen. Der Assistenzplaner soll als webbasierte Anwendung den Klienten und sein Team bei der Dienstplanerstellung unterstüzen. Der Klient und alle Assistenten bekommen einen personalisierten Zugang zum Assistenzplaner und können alle nötigen Informationen austauschen. Ein Algorithmus erstellt den Dienstplan unter Berücksichtigung aller Vorlieben des Klienten und der Stundenkontigente der Assitenten. Der Zeitaufwand für die Dienstplanerstellung sollte auf unter eine halbe Stunde sinken.

\chapter{Grundlagen}
In diesem Kapitel werden die technischen Grundlagen für das Verständnis der Arbeit gelegt.

\section{Netzwerke und Internet} %TODO umbenennen?

\subsection{Client/Server-Paradigma}
\enquote{Netzwerkanwendungen arbeiten in einer Kommunikationsform, die man Client/Server-Paradigman nennt. Die Serveranwendung wartet passiv auf Kontaktaufnahme, während die Clientanwendung die Kommunikation aktiv einleitet.} \cite[S. 405]{comer2002computernetzwerke}

\subsection{Clientsoftware}
%TODO Zitat
Nach \cite[S. 406]{comer2002computernetzwerke} hat die Clientsoftware unter anderem folgende Merkmale:
\begin{itemize}
\item Sie \enquote{ist ein Anwendungsprogramm, die vorübergehend zum Client wird, wenn entfernter Zugriff notwendig ist, das lokal aber auch andere Aufgaben ausführt.}
\item Sie \enquote{läuft lokal auf dem Personalcomputer eines Benutzers}
\item Sie \enquote{leitet den Kontakt mit einem Server aktiv ein.}
\item Sie \enquote{benötigt keine spezielle Hardware oder ein besonderes Betriebssystem.}
\end{itemize}


\subsection{Serversoftware}
Nach \cite[S. 406]{comer2002computernetzwerke} hat die Serversoftware unter anderem folgende Merkmale:
\begin{itemize}
\item Sie \enquote{ist ein dediziertes Programm mit dem speziellen Zweck, einen Dienst bereitzustellen, kann aber auch gleichzeitig mehrere entfernte Clients bedienen}.
\item Sie \enquote{läuft auf einem gemeinsam genutzten Computer.}
\item Sie \enquote{wartet passiv auf deie Verbindungsaufnahme durch einen entfernten Client.}
\item Sie \enquote{nimmt den Kommunikationswunsch von beliebigen Clients entgegen, bietet aber nur einen Dienst.}
\item Sie \enquote{setzt leistungsstarke Hardware und ein gehobenes Betriebssystem voraus.}
\end{itemize}

%Comer 406 26.7
%* Abgrenzung Server (Hardware) und Funktion
\subsection{HTTP}
\enquote{Die Interaktion zwischen einem Browser und einem Webserver erfolgt über das \Fachbegriff{HyperText Transport Protocol} \NeuerBegriff{HTTP}.
HTTP erlaubt es dem Browser, ein bestimmtes Element anzufordern, das der Server ausgibt. In der Praxis ist HTTP aber komplexer, weil ein Server zusätzliche Statusinformationen mit jedem Transfer sendet und das Protokoll es einem Browser gestattet, Informationen zu senden und anzufordern.} \cite[S. 497]{comer2002computernetzwerke}.

\enquote{HTTP unterstützt vier Basisoperationen, die ein Browser in einer Anfrage spezifizieren kann:
\begin{itemize}
\item \Fachbegriff{GET} verlangt ein spezifisches Element vom Server. Der Server gibt einen Kopf (HEAD) zurück, der Statusinformation, gefolgt von einer Leerzeile und dem Element, enhält.
\item \Fachbegriff{HEAD} verlangt Statusinformationen über ein Element. Der Server gibt den Status zurück, jedoch ohne Kopie des Elements selbst.
\item \Fachbegriff{POST} sendet Daten an den Server. Der Server hängt die Daten an ein spezifisches Element an (z. B. wird eine Nachricht an eine Nachrichtenliste angehängt).
\item \Fachbegriff{PUT} sendet Daten an den Server. Der Server benutzt die Daten, um ein spezifisches Element zu ersetzten.
\end{itemize}
Ein Browser erzeugt ein HTTP-Anfrage, wenn ein Benutzer eine URL eingibt oder einen Link wählt. In beiden Fällen sendet der Browser eine GET-Anfrage, die ein Element spezifiziert, und der Server gibt ihm das angefragte Element zurück.} \cite[S. 497]{comer2002computernetzwerke}

\subsection{Webdokumente}
\label{sec:webdokumente}
%TODO überdenken, ob ich den Abschnitt wirklich drin lasse
%TODO Verlinkungen zu anderen Kapiteln
Es gibt nach \cite[S. 508]{comer2002computernetzwerke} drei verschiedene Typen von Webdokumenten:
\begin{itemize}
\item Statisch: Das Dokument ist fest in einer Datei definiert. Der Autor bestimmt einmalig bei Erstellung den Inhalt. Jede Anfrage an das statische Dokument führt zeitlich unabhänig zur identischen Ausgabe. Das statische Verhalten kann technisch mit starren HTML-Seiten realisiert werden.
\item Dynamisch: Das Dokument ist nicht fest definiert. Sobald eine Anfrage an den Webserver gestellt wird, wird das dynamische Webdokument zusammengestellt. Der Inhalt des dynamischen Dokumentes kann sich von Anfrage zu Anfrage ändern. Das dynamische Verhalten kann mit Server-Script-Sprachen wie z. B. PHP realisiert werden. 
\item Aktiv: Das aktive Dokument wird vom Client erstellt. Der Server liefert lediglich das Programm zur Erstellung des Dokumentes aus. Die konkrete Struktur des Dokumentes wird im Client zusammengebaut. Die benötigten Inhalte werden vom Client beim Server angefragt. Das aktive Verhalten kann mit Client-Sript-Sprachen wie z. B. JavaScript realisiert werden.
\end{itemize}

\subsection{Cookie}
\enquote{Wenn ein Server umfangreiche Statusinformationen speichern muss, benötigt er die Informationen auf einer lokalen Platte. Statusinformationen werden einem Browser in Form eines \Fachbegriff{Cookies} weitergegeben. Jedes Cookie besteht aus zwei Zeichenketten, die man als \Fachbegriff{Name/Wert-Paar} bezeichnet. Im Teil \Fachbegriff{Name} befindet sich der Name der Website und im Teil \Fachbegriff{Wert} eine kleine Zeichenkette, die der Browser speichert. Wenn der Browser die Website wieder kontaktiert, fügt er das Cookie in die Anfrage ein. Aus Sicht eines Servers hat es also den Anschein, dass der Browser Statusinformationen speichern und zurückgeben kann.} \cite[S. 514f]{comer2002computernetzwerke}

\subsection{URL}
\Fachbegriff{Uniform Resource Locator} \NeuerBegriff{URL} ist ein Syntaxformat, das alle Informationen kodiert, die zum Erreichen einer Webseite notwendig sind. Die URL hat folgendes Format:

\qquad protokoll://domainNameComputer:port/dokumentName

Die Angabe eines Ports ist optional.

Ein Beispiel für eine URL ist die Startseite des Assitenzplaners: 

\qquad http://assistenzplaner.de/index.html

\subsection{Browser}
\enquote{Ein Browser ist ein interaktives Programm, mit dem ein Benutzer Informationen aus dem Web lesen kann. Die Informationen enthalten wählbare Elemente, über die der Benutzer weitere Informationen anzeigen lassen kann.} \cite[S. 489]{comer2002computernetzwerke} 

\subsection{Link}
\label{sec:Link}
Link ist der umgangssprachliche Begriff für eine Hypertext-Referenz. \enquote{Im Browser ist eine Hypertext-Referenz in einem angezeigten Dokument zunächst ein wählbares Element. Wählt der Benutzer das Element, folgt der Browser der Referenz, holt das betreffende Dokument und ersetzt die momentane Anzeige durch das neue Dokument.} \cite[S. 496]{comer2002computernetzwerke} 


\section{Web-Technologien}
\subsection{PHP}
\label{sec:PHP}

Seit PHP 4 kann man objektorientiert programmieren. Ein guter Einstieg in die Objektorienter Programmierung findet sich in ... 
* von UML zum PHP Code mittels Codegenerirung

\subsection{XML}
\label{sec:XML}
\Fachbegriff{Extensible Markup Language} \NeuerBegriff{XML} ist eine Auszeichnungssprache. Mit XML ist es möglich hierarchisch strukturierter Daten darzustellen. Mit den textbasierten XML-Dateien ist es leicht möglich Daten zwischen Systemen auszutauschen. Die XML-Dateien sind für den Menschen gut lesbar. Die Syntax ist einfach gehalten. Es gibt Tags und Attribute. Die Tags können ineinander geschachtelt werden. Ein beispielhaftes XML Dokument findet sich in Listing \ref{lst:exampleXML}. Hier gibt es ein Wurzelknoten \texttt{AssitanceTeam} mit zwei Kinderknoten \texttt{Assistant} die jeweils das Attribut \texttt{isAvailable} mit unterschiedlichen Werten haben. Die Kinderknoten haben wiederum eigene Kinderknoten.
%TODO Ankündigung und Verweis auf Beispiel
%TODO Verknüfung zu HMTL herstellen: XML bildet die Grundlage für HTML

\lstset{language=Xml, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleXML,caption=Beispiel für ein XML Dokument.]{../XML/example.xml}

\subsection{HTML}
\label{sec:HTML}
\Fachbegriff{HyperText Markup Language} \NeuerBegriff{HTML} ist eine Auszeichnungssprache und hat \enquote{die Aufgabe, die logische Grob- und Feinstruktur einer Webseite zu beschreiben. ... HTML ist die Sprache zur Strukturierung von Texten, wobei aber auch die Möglichkeit besteht, Grafiken und multimediale Inhalte in Form einer Referenz einzubinden und in den Text zu integrieren} \cite[S. 21]{muenz2012html5}.

Nach \cite[S. 21]{muenz2012html5} ist es unter anderem möglich:
\begin{itemize}
\item das Dokument in Bereiche wie Kopf, Inhalt, Fuß, Navigation und Artikel einzuteilen
\item dem Dokument Überschriften, Textabsätze, Listen und Tabellen hinzuzufügen
\item Links (siehe Abschnitt \ref{sec:Link}) auf beliebige andere Webseiten oder Datenquellen im Internet einzubinden
\item Formulare in das Dokuement zu integrieren
\item Erweiterungssprachen wie CSS oder JavaScript zu integrieren
\end{itemize}

Ein Beispiel für ein HTML Dokument findet sich in Listing \ref{lst:exampleHTML}.

\lstset{language=Html, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleHTML,caption=Beispiel für ein HTML-Dokument.]{../HTML/example.html}


\subsection{CSS}
\label{sec:CSS}
Bei \Fachbegriff{Cascading Stylesheets} \NeuerBegriff{CSS} \enquote{handelt [es] sich um eine beschreibende Ergänzungssprache für HTML. Sie klinkt sich nahtlos in HTML ein und hat zwei Aufgaben: das Formatieren von Inhalten und das Gestalten von Webseitenlayouts.} \cite[S. 23]{muenz2012html5} 

\enquote{CSS erlaubt es, zentrale Formate zu definieren, beispielsweise für alle Überschriften erster Ordnung oder für alle Textabsätze mit einem bestimmten Klassennamen oder für hervorgehobenen Text, der innerhalb einer Tabellenzelle vorkommt. Die zentralen Formate können in eine externe Syle-Datei ausgelagert werden[.] ... So ermöglicht CSS seitenübergreifend einheitliche Layouts und Formatierungen.} \cite[S. 24]{muenz2012html5}

\lstset{language=C, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleCSS,caption=Beispiel für ein CSS-Dokument.]{../CSS/example.css}

\subsection{JavaScript}
\label{sec:JavaScript}
\Fachbegriff{JavaScript} ist eine Script-Sprache, die meistens im Browser (also clientseitig) ausgeführt wird. 
%Sinnvolle Einsatzgebiete\footnote{Die Unterteilung in sinnvolle und weniger sinnvolle Einsatzgebeite wurde eigenmächtig vom Autor durgeführt. Weniger sinnvolle Einsatzgebiete sind unter anderem: Laufschriften, Popup-Werbung, Nervige Animation von Objekten .}
Mögliche Einsatzgebiete von JavaScript sind unter anderem:
\begin{itemize}
\item Plausibilitätsprüfung (Validierung) von Formulareingaben vor dem Absenden
\item Dynamische Manipulation von Webseiten mit Hilfe von DOM (siehe Abschnitt \ref{sec:DOM})
\item Senden und Empfangen von Daten, ohne dass der Browser die Seite neu laden muss mit AJAX (siehe Abschnitt \ref{sec:AJAX})
\end{itemize}
Ein Beispiel für ein JavaScript-Dokument findet sich in Listing \ref{lst:exampleJavaScript}.

\lstset{language=Java, basicstyle=\ttfamily\color{black}\small, showstringspaces=false,tabsize=2}
\lstinputlisting[label=lst:exampleJavaScript,caption=Beispiel für ein JavaScript-Dokument.]{../JavaScript/example.js}

\subsection{Zusammenarbeit HTML, CSS und JavaScript}
HTML, CSS und JavaScript arbeiten ergänzen sich gegenseitig. Wenn man der Idee von \cite[S. 8]{teague2011css3} folgt, dann ergeben die drei Webtechnologien eine vollständige Sprache: HTML stellt die Substantive zur Verfügung, CSS die Adjektive und Adverbien und JavaScript fügt die Verben hinzu. 

Wenn man sich den HTML-Code von Listing \ref{lst:exampleHTML} im Browser anschaut (siehe Abbildung \ref{fig:ExampleHtmlCssJavaScript}), dann ist zu erkennen, wie die Zusammenarbeit der drei Webtechnologien sich in der Praxis auswirkt. Im HTML wird die Struktur des Dokumentes definiert, mit dem verwendeten CSS-Dokument (Listing \ref{lst:exampleCSS}) wird das Aussehen angepasst und mit JavaScript (Listing \ref{lst:exampleJavaScript}) wird dynamisch Inhalt erzeugt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/ExampleHtmlCssJavaScript.png}
	\caption[ToDo]{Das Ergebnis des Zusammenspiels von HTML, CSS und JavaScript im Browser dargestellt}
	\label{fig:ExampleHtmlCssJavaScript}
\end{figure}


\subsection{DOM}
\label{sec:DOM}
\Fachbegriff{Document Object Model} \NeuerBegriff{DOM} ist eine Programmierschnittstelle für den Zugriff auf HTML- oder XML-Dokumente.
\enquote{HTML-Dokumente besitzen eine hierarchische Struktur, die im DOM als Baumstruktur repräsentiert wird. Die Knoten des Baums stellen die verschiedenen Arten von Inhalt in einem Dokument dar.} \cite[S. 310]{flanagan2002javascript}.
DOM stellt unter anderem einen Satz von Methoden zur Verfügung der es möglich macht Elemente des Dokumentes aufzufinden. Z. B. kann man mit Hilfe von

\qquad \texttt{var captions = window.document.getElementsByTagName("h1");} 

alle Überschriften erster Ordnung finden.

Weiterhin stellt DOM Methoden zur Verfügung um Inahlte des Dokument-Baums zu verändern. Mit dem Code 

\qquad \texttt{captions[0].setAttribute("id", "firstCaption");} 

wird der \Fachbegriff{Identifikator} \NeuerBegriff{ID} der ersten Überschrift (erster Ordnung) gesetzt.

\subsection{AJAX}
\label{sec:AJAX}
Bei \Fachbegriff{Asynchronous JavaScript and XML} \NeuerBegriff{AJAX} handelt es sich nicht direkt um eine Webtechnologie, eher  um eine spezielle Denkweise die Kombination von HTML bzw. XML, CSS und JavaScript einzusetzten.

\enquote{Mit Ajax können einzelne Informationen nach Bedarf vom Server geholt und in die bestehende Seite integriert werden. Im besten Fall entfallen die Wartezeiten, und die Kommunikation mit dem Server tritt aus der Sicht des Anwenders in den Hintergrund. Ajax-Applikationen ermöglichen so eine Bedienung, die eher an eine Desktop-Anwendung als an eine Webapplikation erinnert.} \cite[S. 309]{koch2011javascript} 

Ein spezielles JavaScript-Objekt names \texttt{XMLHttpRequest} ermöglicht die asynchrone Kommunikation mit dem Server. Durch den asynchronen Aufruf kann der Benutzer direkt weiterarbeiten und wird nicht durch die Kommunikation mit dem Server blockiert. Ist die Antwort des Servers beim Client angekommen, wird sie sofort verarbeitet und gegebenenfalls dem Nutzer dargestellt.

Mit Hilfe von AJAX ist es möglich aktive Dokumente (siehe Abschnitt \ref{sec:webdokumente}) zu erstellen.


\section{Modellierungssprachen}
\subsection{UML}
Die \Fachbegriff{Unified Modeling Language} \NeuerBegriff{UML} \enquote{dient zur Modellierung, Dokumentation, Spezifizierung und Visualisierung komplexer Systeme, unabhängig von deren Fach- und Realisierungsgebiet. Sie liefert die Notationselemente gleichermaßen für die statischen und dynamischen Modelle von Analyse, Design und Architektur und unterstützt insbesondere objektorientere Vorgehensweisen.} \cite[S. 4]{rupp2012uml} 
%TODO ??? verwendete Diagrammtypen beschreiben
%TODO ??? Beispiel-Diagramm 

\subsection{SysML}
\Fachbegriff{System Modeling Language} \NeuerBegriff{SysML} ist eine grafische Sprache die sich zur Modellierung von Systemen einsetzen lässt. Sie wird bei er Modellierung von komplexen Systemen eingesetzt. Einige Diagrammtypen aus der UML wurden übernommen und weitere Diagrammtypen hinzugefügt.





%TODO Kapitel zur Bestandsanalyse schreiben?
%\chapter{Bestandsanalyse}



\chapter{Anforderungsermittlung}

\section{Begrifflichkeiten}
%TODO Begrifflicheiten in Grundlagen-Kapitel verschieben?
%Zur Anforderungsermittlung gehört dazu sich mit der Domäne vertraut zu machen.
In diesem Abschnitt werden einige Begriffe erläutert, die im Folgenden häufig verwendet werden.

\subsection{Klient}
Der Klient ist ein körperlich behinderter Mensch, der im alltäglichen Leben permanent auf Hilfe angewiesen ist. Im Rahmen der  individuellen Schwerstbehindertenbetreuung bekommt er Assistenten an die Seite gestellt. Mit Hilfe seiner Assistenten kann er ein selbstbestimmtes Leben führen.

\subsection{Assistent}
Der Assistent ist ein Helfer, der den Klienten pflegt und ihn im alltäglichen Leben unterstützt. 

\subsection{Team}
Der Klient muss rund um die Uhr mit Assistenz unterstützt werden. Dafür bedarf es eines Teams.
Das Team eines Klienten besteht aus mehreren Assistenten. In dem kronketen Fall sind es sieben Assistenten.

\subsection{Dienst}
%TODO nachfolgenden Absatz überarbeiten - ist zusammenstrickt und hört sich holprig an
Wenn ein Assistent Dienst macht, dann ist er permanent in der Nähe des Klienten und steht ihm helfend zur Verfügung. Wenn ein Assistent einen Dienst von 13:00 Uhr des Tages bis 8:00 Uhr des Folgetages hat, dann sind das rechnerisch 17 Stunden die er gearbeitet hat. Die Nacht wird mit 6 Stunden berechnet und abgezogen. So bekommt der Assistent eine Netto-Arbeitszeit von 11 Stunden vergütet. Die Dienste gehen frühestens um 12 Uhr, spätestens um 17 Uhr los und enden um 8 Uhr, bzw. 13 Uhr des Folgetages.

\subsection{Bereitschaft}
Wenn ein Assistent Bereitschaft hat, dann muss er zu einer festgelegten Zeit (z. B. von 10:00 bis 11:00 Uhr) telefonisch erreichbar sein. Falls der diensthabende Assistent erkrankt, springt der Bereitschaftshabende ein und übernimmt den Dienst. Bei Diensten deren Netto-Arbeitszeit größer als 13 Stunden ist, wird eine zweite Bereitschafsstunde  (z. B. von 18:00 bis 19:00 Uhr) vereinbart, falls der diensthabende Assistent während der Arbeitsausführung erkrankt. Jede Bereitschaftsstunde wird mit dem Faktor 0.5 vergütet. 

\subsection{Dienstplan}
Im Dienstplan sind die Dienst- und Bereitschaftszeiten der Assistenten festgehalten. Für jeden Tag gibt es einen Assistenten der Dienst hat und einen Assistenten der Bereitschaft hat. 

\subsection{Stundenkontigent}
\label{sec:Stundenkontigent}
Jeder Assistent arbeit unterschiedlich viel. Die Monatsstundenzahl variiert zwischen 30 und 130. Bei der Dienstplanerstellung ist darauf zu achten, dass alle Assistenten möglichst gleichmäßig ihr Stundenkontigent ausgeschöpft bekommen.

\section{Ist-Prozess}
Vor Beginn der Arbeiten des Autors war der Prozess zur Dienstplanerstellung komplett manuell. Der Klient hat für die Dienstplanerstellung eine E-Mail mit Hinweisen für den Monat an sein Team geschickt und darum gebeten Rückmeldung zu geben, wie die Verfügbarkeiten sind.
Die Assistenten haben auf diese E-Mail geantwortet und darin beschrieben wann sie Zeit für Dienste haben.
Der Klient hat manuell mit Hilfe einer Excel-Tabelle den Dienstplan erstellt und musste dabei ständig zwischen Excel-Tabelle und allen Antworten des Teams (sieben an der Zahl) wechseln. Nach der Fertigstellung des Dienstplans hat der Klient eine E-Mail mit dem Dienstplan an sein Team geschickt.
Die Dienstplanerstellung hat den Klienten viel Zeit (ca. vier bis fünf Stunden im Monat) und Nerven gekostet.
%TODO Ablaufdiagramm?

\section{Soll-Prozess}
Ein möglicher Soll-Prozess könnte folgendermaßen aussehen: % es gibt immer mehrere Möglichkeiten!
Der Klient gibt auf einer Webseite die Dienstzeiten und Kommentare für den kommenden Monat ein. Per Knopfdruck wird das Team benachrichtigt und darum gebeten die freien Tage auf einer Webseite (Link ist in der Nachricht enthalten) einzugeben. Sobald alle Assistenten ihre Eingaben getätigt haben können dem Klienten mit Hilfe eines Algorithmus mehrere Dienstplan-Vorschlag unterbreitet werden. Der Dienstplan kann von dem Klienten manuell editiert werden und nach den eigenen Vorlieben (die bei der automatischen Erstellung schon größtenteils berücksichtigt wurden) anpassen. Der Klient gibt den Dienstplan frei und benachrichtigt sein Team, dass ein neuer Dienstplan verfügbar ist, der online eingesehen werden kann.
Der Zeitaufwand für die Assistenten bleibt unverändert. Der Zeitaufwand für den Klient sinkt auf unter eine halbe Stunde.
%TODO BPMN Diagramm - Subjekt-Interaktions-Diagram - Ablaufdiagramm - http://www.metasonic.de/metasonic-suite
%UML Aktivitätsdiagramm

\section{Benutzergeschichten}
\enquote{Benutzergeschichten beschreiben Anforderungen aus der Sicht des Endanwenders. Sie bestehen aus einem Namen, aus einer kurzen textuellen Beschreibung der Anforderung und einer Reihe von Akzeptanzkriterien. Letztere halten fest, welche Kriterien erfüllt sein müssen, damit die Anforderung als erfolgreich realisiert gilt.} \cite[S. 46]{pichler2008scrum}

Wichtig ist, dass die Anforderung einen \enquote{konkreten und sichtbaren Mehrwert für den Kunden} besitzt. \cite[S. 52]{wirdemann2011scrum}

Benutzergeschichten haben ein festes Muster. Nach \cite[S. 59]{wirdemann2011scrum} hat sich für die Beschreibung folgends Muster bewährt:

\qquad Als <Benutzerrolle> will ich <das Ziel> [,so dass <Grund für das Ziel>]

%TODO aufbohren -> Überschrift und Akzeptanzkriterien für alle Benutzergeschichten festlegen
%TODO LaTeX Template für Benutzergeschichten?
Aus den Gesprächen mit dem Klienten und der Formulierung des Soll-Prozesses sind einige Benutzergeschichten abgeleitet worden:


%TODO ??? Einteilung in Klient, Assistent und Allgemein evt. weglassen, einfach die in der richtigen Reihenfolge Benutzergeschichten runterschreiben
\subsection{Klient}


\subsubsection{Dienstzeiten für nächsten Monat}
Als Klient möchte ich für den nächsten Monat angeben können, wie die Dienstzeiten sind.
\begin{itemize}
\item test1 
\item test2
\end{itemize}


---***---

\begin{itemize}
%TODO ggf noch den  ..., um ... Teil ergänzen
%TODO einheitliche Verwednung eines Begriffes für Notizen, Hinweise, etc.
\item Als Klient möchte ich für den nächsten Monat angeben können, wie die Dienstzeiten sind.
\item Als Klient möchte ich die Möglichkeit haben, den Dienstplan nach meinen Wünschen anzupassen.
\item Als Klient möchte ich eine Möglichkeit haben mein Team zu verwalten.
\item Als Klient möchte ich die Assistenten bewerten, um guten Assistenten bei der Einteilung Vorrang zu gewähren.
\item Als Klient möchte ich bei den Assistenten Vorlieben für Wochentage eingeben können.
\item Als Klient möchte ich bei der manuellen Nachbearbeitung des Dienstplanes die Stundenverteilung sehen können.
\item Als Klient möchte ich Notizen zum Tag erstellen können, die für jeden sichtbar sind (öffentliche Notizen).
\item Als Klient möchte ich Notizen zum Tag erstellen können, die nur für mich sichtbar sind (private Notizen).
\item Als Klient möchte ich mehrere Vorschläge für einen Dienstplan bekommen, die ich anpassen kann.
\item Als Klient möchte ich eine Mail an mein Team verschicken können, mit der Bitte freie Termine einzutragen.
\item Als Klient möchte ich monatsbezogene Hinweise zum Dienstplan eingeben können.
\item Als Klient möchte ich Standard-Dienstzeiten angeben können.
\end{itemize}

\subsection{Assistent}
\begin{itemize}
\item Als Assistent möchte ich angeben können, wann ich arbeiten kann.
\item Als Assistent möchte ich mein Stundenkontingent möglichst gut ausgeschöpft bekommen.
\item Als Assistent möchte ich meine Eingaben im Kalender ändern können.
\item Als Assistent möchte ich sehen, wann ich meine Dienste habe.
\item Als Assistent möchte ich sehen, wann ich Bereitschaft habe.
\item Als Assistent möchte ich eine Möglichkeit haben Termine zu favorisieren.
\item Als Assistent möchte ich bei der Angabe von Terminen auch Bemerkungen machen können, um weitere Informationen transportieren zu können.
\end{itemize}

\subsection{Allgemein}
\begin{itemize}
\item Als Anwender möchte ich sehen, wann der Dienstplan zum letzten Mal geändert wurde.
\item Als Anwender möchte ich mich mit einem eigenen Account beim System anmelden können, um nur die Dinge zu sehen, die mich interessieren und nicht aus Versehen ungewollte Änderungen zu machen.
\item Als Anwender möchte ich eine Dokumentation des Systems zur Verfügung haben, um mich gut in das System einarbeiten zu können.
\end{itemize}


\section{Abgeleitete Anforderungen}
Aus den Benutzergeschichten ergeben sich einige abgeleitete Anforderungen, die zwar nicht explizit erwähnt wurden, aber für eine technische Umsetzung zwingend notwendig sind.
%-> SysML Diagramm



\subsection{Plattformunabhägigkeit}
Die Software-Lösung soll sich auf unterschiedlichen Geräte-Kategorien (z .B. Handy, Tablet, Dektop) bedienen lassen können. Weiterhin sollen die größten Betriebssysteme (Windows, Linux, MacOS X, Android, iOS) unterstützt werden.

\subsection{Serverbasierte Anwendung}
Damit der Klient mit seinen Assistenten asynchron zusammenarbeiten kann, bietet sich eine serverbasierte Anwendung an. Der Klient verwaltet alle Daten online. Die Assistenten können ihre Eingaben losgelöst vom Klienten vornehmen.
%TODO Verweis auf entsprechendes Grundlagen-Kapitel

\subsection{Benutzer-Verwaltung}
Der Klient und der Assistent haben unterschiedliche Interessen am Assistenzplaner. Der Klient möchte unter anderem den Dienstplan erstellen und sein Team verwalten, der Assitent hingegen möchte mögliche Termine eintragen und den fertigen Dienstplan einsehen können.

Jeder Benutzer möchte seine Daten individuell eingeben können. Die hinterlegten Daten sollten nicht für jedermann einsehbar sein. Daher bekommt jeder Benutzer einen eigenen Zugang, der mit einem personenbezogenen Passwort geschützt wird. Bei der Anmeldung am System wird regsistriert ob es sich um einen Klienten oder einen Assistenten handelt und dementsprechend der angezeigte Inhalt variiert.

\chapter{Stand der Technik}
Ausführliche Recherche haben ergeben, dass es keine Lösung für das Problem gibt.

Dennoch gibt es ein paar Ansätze:

Offline
* Dienstplan in Excel erstellen
* QTime http://www.qtime.de/kostenlos/dienstplan-erstellung.html -> zentral/dezentrale Dienstplanerstellung

Online
* Papershift http://www.papershift.com/tour

Vorlagen
- Einzelhandel
- Restaurant
- Club

Mitarbeiter können sich für eine Schicht bewerben.



* EasyPep https://easypep.de -> dienstplanerstellung manuell (kein Algorithmus, keine Stundenplanung)


* schichtplaner http://schichtplaner-online.de/index.php/de/

Rollen: Mitarbeiter, Manager, Administrator
Plan sichtbar für Mitarbeiter
Mitarbeiter scheint keine Einfluss zu haben -> Verfügbarkeiten können nicht angegeben werden
keine automatische Erstellung

* ShiftJuggler https://www.shiftjuggler.com/de/


--> alle unterstüzten nicht Dienst/Bereitschaftskonzept -> Stundenverrechnung geht schon gar nicht -> absoluter Spezialfall

-> Kombination mit ToDo Manager nicht auffindbar


\chapter{Software-Design} % oder einfach nur Design?
SysML Modell
UML Ablaufdiagramme

* Vom Modell zur Software

\chapter{Implementierung}
%TODO nachfolgenden Satz am Ende nochmal prüfen
In diesem Kapitel wird dargestellt, wie die Anforderungen und das Software-Design konkret implementiert wurden.
Die Programmiersprachen werden gewählt...

\section{Wahl der Programmiersprachen}
Für die Implementierung ist es notwendig sich auf die Programmiersprachen festzulegen.

\subsection{Backend}
%TODO Verweis auf Grundlagen-Kapitel
Beim Backend (der Serverseite) ist die Wahl der Programmiersprache auf PHP gefallen. Hauptgründe hierfür waren: die \href{http://w3techs.com/technologies/history_overview/programming_language}{hohe Verbreitung} und die Tatsache, dass PHP bei den meisten Webhostern vorinstalliert ist.


\subsection{Frontend}
%TODO Verweise auf Grundlagen-Kapitel

Der Server generiert mit Hilfe von PHP den HTML-Code, der an den Client (Browser) gesendet wird. Im HTML wird ausschließlich die Struktur der angezeigten Seite definiert. Das Aussehen wir mit Hilfe von CSS bestimmt.
Um die Funktionalität auf der Seite des Clients zu erweitern, kommt JavaScript zum Einsatz.

\section{Persistenz der Daten}
Alles was persistent gespeichert werden muss, wird in textbasierten Dateien (*.txt) abgelegt. Im Vergleich zu Datenbanken hat man folgende Vorteile:
\begin{itemize}
\item Daten können leicht zwischen Live-System und Test-System ausgetauscht werden.
\item Datenbank-Verwaltung entfällt.
\item Es werden keine Datenbank-Anforderungen an den Server gestellt.
\end{itemize}

Eine potentielle Fehlerquelle bei dem Gebrauch von textbasierten Daten ist, wenn zwei Benutzer gleichzeitig auf eine Datei zugreifen wollen. Das ist derzeit nur bei den Kalender-Eingaben der Assistenten (siehe Abschnitt \ref{sec:calendar}) möglich. Um den gleichzeitigen Zugriff zu verhindern wird eine Art Semaphore eingesetzt. Unter PHP gibt es keine echte Semaphoren, aber es gibt die Möglichkeit auf eine Datei sperrend zuzugreifen. So wird verhindert, dass zwei Prozesse gleichzeitig in eine Datei schreiben, falls zwei Assistenten gleichzeitig ihre Daten speichern wollen.

\section{Übersicht}
Auf der Übersichts-Seite (siehe Abbildung \ref{fig:Overview}) werden dem Benutzer alle verfügbaren Seiten als Hyperlink aufgelistet. Hierbei werden der Benutzertyp (Klient oder Assistent) und die Einstellungen (z. B. Aufgaben-Verwaltung benutzen oder nicht) berücksichtigt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.8]{../Images/Screenshots/overview.png}
	\caption[Übersicht Assistenzplaner für Klienten]{Übersicht Assistenzplaner für Klienten - von hier aus erreicht man per Link alle Verfügbaren Seiten}
	\label{fig:Overview}
\end{figure}


\section{Benutzer-Verwaltung}
%TODO session id erläutern - wie merkt sich der server wer aktuller Benutzer ist?
%TODO screenshot einfügen Images/Screenshots/CookiePhpSessionId.png


Damit der Klient und die Assistenten benutzerspezifische Eingaben tätigen können ist eine Verwaltung der Benutzer notwendig.
Jeder Benutzer des Assistenzplaners kann sich mit eigener Kennung und Passwort anmelden. Es gibt zwei Rollen von Benutzern: die Klienten und die Assistenten. Die Klienten können sich ihren Zugang selbstständig anlegen (siehe Abschnitt \ref{sec:AnlegenKlient}). Die Zugänge der Assistenten werden von den Klienten verwaltet. Klienten haben die Möglichkeit Asisstenten zum Team hinzuzufügen und zu entfernen (siehe Abschnitt \ref{sec:TeamVerwaltung}).
Bei der Anmeldung wird eine Session gestartet. %TODO genauer erklären und auf eine Quelle verweisen
Weiterhin werden Session-Variablen gesetzt, die hilfreich für die weitere Verwendung des Assistenzplaners sind.
%TODO ist die Beschreibung oben zu vage oder kann ich das so lassen?

\section{Team-Verwaltung}
\label{sec:TeamVerwaltung}
%TODO Referenzen auf Requirement-Abschnitt?
Der Klient braucht eine Möglichkeit um sein Assistenz-Team zu verwalten. Der Klient möchte Team-Mitglieder hinzufügen, editieren und löschen. Weiterhin möchte er das Passwort eines Assistenten zurücksetzen können.

Jeder Assitent hat folgende Eigenschaften
\begin{itemize}
\item Kennung - eindeutige ID, mit der sich der Klient am System anmeldet
\item Vorname
\item Nachname
\item Telefonnummer
\item Stichwörter - werden bei der Dienstplanerstellung berücksichtigt
\item Stundenkontigent - Anzahl der Stunden in einem Monat, die der Assistent zur Verfügung hat
\item Priorisierung - ein Wert um den Assistenten bei der Dienstplanerstellung zu priorisieren (je höher der Wert, desto höher die Wahrscheinlichkeit, dass der Assistent viele Dienste bekommt)
\item Bevorzugte Wochentage
\end{itemize}

Die Eigenschaften werden in tabellarischer Form dargestellt (siehe Abbildung \ref{fig:TeamTable}) und sind editierbar.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.35]{../Images/Screenshots/teamTable.png}
	\caption[Verwaltung Assistenz-Team]{Verwaltung der Assistentz-Team-Mitglieder}
	\label{fig:TeamTable}
\end{figure}

Neue Teammitglieder können mit Hilfe des Buttons "Neues Mitglied" hinzugefügt werden. Das neue Teammitglied hat inital  das Passwort was in den Einstellungen hinterlegt wurde.

Sollte ein Assistent sein Passwort vergessen haben, hat der Klient die Möglichkeit mit Hilfe des Buttons "Paswort zurücksetzen" (in der Spalte Aktionen) die Möglichkeit das Passwort des Assistenten auf den Wert des Standardpasswortes (was in den Einstellungen hinterlegt ist) zu setzen.

Sollte ein Assitent das Team verlassen, so hat der Klient die Möglichkeit mit Hilfe des Buttons "Löschen" (in der Spalte Aktionen) den Assistenten aus der Team-Übersicht zu entfernen.

\section{Dienst-Plan}
\subsection{Aus Sicht des Klienten}
Wenn die Assistenten ihre Termine eingetragen haben, ist der Klient in der Lage den Dienstplan zu erstellen. Falls es Tage gibt, an denen nicht mindestens 2 Assistenten (einer für Dienst und einer für Bereitschaft) Zeit haben, so bekommt er eine Warnung, da dann eine vollständige Dienstplanerstellung nicht möglich ist.

Der Assistenzplaner erstellt eine Tabelle (siehe Abbildung \ref{fig:RosterClient1}), in der tageweise die Dienstzeiten, die Verfügbarkeiten der Assistenten und die Bemerkungen (öffentliche wie private) aufgeführt werden. Die Verfügbarkeiten der Assistenten werden farblich markiert. 
\begin{itemize}
\item Grün: Assistent ist voll verfügbar
\item Gelb: Assistent ist zur Not verfügbar
\item Rot: Assistent ist nicht verfügbar
\end{itemize}

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterClient1.png}
	\caption[ToDo]{Editierbarer Dienstplan für den Klienten}
	\label{fig:RosterClient1}
\end{figure}

Der Klient bekommt vom Assistenzplaner mit Hilfe des Algorithmus einen Dienstplan erstellt %TODO Verweis auf Abschnitt mit Algorithmus
den er nach seinen Belieben anpassen kann. Dazu klickt er einfach in die Zellen der Dienstplantabelle und kann zwischen den Zuständen
\begin{itemize}
\item Assistent hat Dienst
\item Assistent hat Bereitschaft
\item Assistent hat weder Dienst noch Bereitschaft
\end{itemize}
wechseln.

Unterhalb der Dienstplantabelle ist eine weitere Tabelle (siehe Abbildung \ref{fig:RosterClient2}), in der man die Stundenverteilung der Assistenten sehen kann.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterClient2.png}
	\caption[ToDo]{Stundenübersicht der Assistenten}
	\label{fig:RosterClient2}
\end{figure}

In der zweiten Spalte sind die zusammengerechneten Arbeitsstunden (Dienststunden + Bereitschaftsstunden) aufgeführt. In der dritten Spalte sieht man die benötigten Arbeitsstunden. %TODO Link auf entsprechenden Abschnitt
In der vierten Spalte wird die Differenz zwischen Spalte 2 und 3 berechnet. In der fünften Spalte ist die Differenz (Spalte 4) ins Verhältnis der benötigten Arbeitsstunden (Spalte 3) gesetzt und prozentual ausgedrückt. Die Zeilen werden farblich hinterlegt:
\begin{itemize}
\item Grün: Der Betrag der prozentualen Abweichung (Spalte 5) ist kleiner 10\% 
\item Gelb: Der Betrag der prozentualen Abweichung (Spalte 5) ist zwischen 10\% und 20\%
\item Rot: Der Betrag der prozentualen Abweichung (Spalte 5) ist größer als 20\% 
\end{itemize}
Die Stundenübersicht wird jedes Mal aktualisiert, wenn der Klient in der Dienstplan-Tabelle etwas ändert. Dadurch hat der Klient ein direktes Feedback, wie sich eine Dienstplanänderung auf die Stundenausschöpfung der Assistenten auswirkt.

Per Knopfdruck kann der Klient einige Funktionen ausführen:
\begin{itemize}
\item Dienstplan prüfen: Es wird geprüft, dass für jeden Tag genau ein Assistent Dienst und genau ein Assistent Bereitschaft hat
\item Dienstplan speichern: Der Dienstplan wird gespeichert. Gleichzeitig wird das Datum der letzten Änderung aktualisiert.
\item Dienstplan löschen: Der Dienstplan wird nach Rückversicherung gelöscht. Durch ein Neuladen der Dienstplanseite wird vom Assistenzplaner wieder ein neuer Dienstplanvorschlag erstellt.
\item Dienstplan als PDF anzeigen: Der Dienstplan wird im PDF-Format exportiert. Als PDF kann der Dienstplan leicht per E-Mail verschickt und ausgedruckt werden.% Der Dienstplan als PDF dient letztendlich als Leistungsnachweis.
\end{itemize}

\subsection{Aus Sicht des Assistenten}
Der Assistent hat keine Möglichkeit den Dienstplan zu verändern. Er kann lediglich den fertigen Dienstplan einsehen. In einer Tabelle (siehe Abbildung \ref{fig:RosterAssistantMarkus1}) werden tagesweise die Dienstzeiten und Bereitschafszeiten dargestellt. Weiterhin kann man sehen welcher Assistent Dienst bzw. Bereitschaft hat. Die Dienste und Bereitschaften des angemeldeten Assistenen werden farblich hervorgehoben.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterAssistantMarkus1.png}
	\caption[Gesamter Dienstplan aus Sicht des Assistenten]{Gesamter Dienstplan aus Sicht des Assistenten - farbig hervorgehoben sind die Dienste bzw. Bereitschaften des angemeldten Assistenten}
	\label{fig:RosterAssistantMarkus1}
\end{figure}

Unter dem allgemeinen Dienstplan gibt es eine Tabelle (siehe Abbildung \ref{fig:RosterAssistantMarkus2}) in der der angemeldete Assistent seine Dienste und Bereitschaften kompakt einsehen kann.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/RosterAssistantMarkus2.png}
	\caption[Dienste und Bereitschaften des angemeldeten Assistenten]{Dienste und Bereitschaften des angemeldeten Assistenten}
	\label{fig:RosterAssistantMarkus2}
\end{figure}

\section{Monatsplan}
Mit dem Monatsplan (siehe Abbildung \ref{fig:MonthPlan3})  plant der Klient den nächsten Monat. Er kann pro Tag den Dienstbeginn und das Dienstende festlegen und Notizen zum Tag erstellen. Die Notizen unterteilen sich in öffentliche und private Notizen. Öffentliche Notizen können auch vom Assistenzteam eingesehen werden. Private Notizen können nur vom Klienten selbst eingesehen werden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/MonthPlan3.png}
	\caption[Monatsplan]{Monatsplan mit der Möglichkeit tagesweise Dienstbeginn und Dienstende festzulegen und Bemerkungen zu hinterlegen}
	\label{fig:MonthPlan3}
\end{figure}

Neben den tagesweisen Bemerkungen hat der Klient noch eine Möglichkeit eine Nachricht an sein Team zu verfassen. Hier können allgemeine Hinweise für den Monat untergebracht werden.

Der Klient hat jederzeit die Möglichkeit den Monatsplan zu speichern. Möchte er sein Assistenz-Team auffordern mögliche Termine einzutragen, so kann er auf den Button "Team benachrichtigen" klicken. Vom Assistenzplaner wird dann eine E-Mail an jedes Mitglied des Assistenz-Teams geschickt mit der Bitte mögliche Termine einzutragen und der Nachricht des Klienten. Eine beispielhafte Nachricht findet sich in Abbildung \ref{fig:Mail}.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/Mail.png}
	\caption[Benachrichtigung der Assistenten]{Beispielhafte Benachrichtigung der Assistenten, mit der Bitte des Klienten die Termine für den nächsten Monat einzutragen.}
	\label{fig:Mail}
\end{figure}

\section{Standard-Dienstzeiten}
Bei den Standard-Dienstzeiten (siehe Abbildung \ref{fig:DefaultTimes}) hat der Klient die Möglichkeit für jeden Wochentag festzulegen wie standardmäßig die Dienstzeiten sind. Diese Standard-Dienstzeiten werden initial im Monatsplan eingetragen, können aber vom Klienten angepasst werden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/DefaultTimes.png}
	\caption[Standard-Dienstzeiten]{Verwaltung der Standard-Dienstzeiten}
	\label{fig:DefaultTimes}
\end{figure}


\section{Aufgaben-Verwaltung}
Dem Klienten und seinem Team steht eine Aufgaben-Verwaltung (siehe Abbildung \ref{fig:ToDoManager}) zur Verfügung.
\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/ToDoManager.png}
	\caption[Todo]{Aufgaben-Verwaltung mit einigen Test-Aufgaben}
	\label{fig:ToDoManager}
\end{figure}

\subsection{Eigenschaften der Aufgaben}
Die Aufgaben haben folgende Eigenschaften:
\begin{itemize}
\item Beschreibung
\item Fälligkeitsdatum
\item Wiederholungstyp (nie, wiederholt sich ab Erledigungsdatum, wiederholt sich ab Fälligkeitsdatum)
\item Wiederholungsintervall (z. B. alle 2 Tage) - vorausgesetzt, dass sich die Aufgabe wiederholt
\end{itemize}

\subsection{Gruppierung der Aufgaben}
Die Aufgaben werden mit Hilfe ihres Fälligkeitsdatums in folgende Gruppen sortiert:
\begin{itemize}
\item Erledigt
\item Heute
\item Morgen
\item Übermorgen
\item Zukünftig
\item Ohne Datum
\end{itemize}

\subsection{Neue Aufgaben erstellen}
Der Klient ist als Einziger in der Lage neue Aufgaben zu erstellen. Hierfür hat er eine Eingabemaske, wie sie in Abbildung \ref{fig:ToDoManagerNewToDo} zu sehen ist.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.45]{../Images/Screenshots/ToDoManagerNewToDo.png}
	\caption[Todo]{Aufgaben-Verwaltung: Erstellung einer neuen Aufgabe}
	\label{fig:ToDoManagerNewToDo}
\end{figure}

Bei der Auswahl des Fälligkeitsdatums wird er duch einen Kalender (siehe Abbildung \ref{fig:CalendarInput}) unterstützt. Dieser öffent sich automatisch, sobald das Eingabefeld für das Datum den Fokus bekommt und schließt sich wieder, sobald der Klient ein Datum gewählt hat oder auf "Abbrechen" klickt.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/ToDoManagerDatePicker.png}
	\caption[Todo]{Aufgaben-Verwaltung: Wahl des Datums}
	\label{fig:ToDoManagerDatePicker}
\end{figure}

%TODO Extension of Date-Object erläutern?

\subsection{Aufgaben als erledigt markieren}
Sowohl Klient als auch Assistenten können Aufgaben als erledigt markieren. Hierfür wird die Checkbox links von der Aufgabenbeschreibung angeklickt. Die Aufgabe wird durchgestrichen und in die Kategorie "Erledigt" sortiert. Falls die Aufgabe ein Wiederholungsintervall besitzt, wird eine Kopie der Aufgabe mit neu berechnetem Fälligkeitsdatum erstellt. Weiterhin wird protokolliert, wer die Aufgabe als erledigt markiert hat.

Hat man aus Versehen eine Aufgabe als erledigt markiert, kann man dies rückgängig machen, in dem man wieder die Checkbox links von der Aufgabenbeschreibung anklickt. Die Aufgabe ist nicht mehr durchgestrichen, wird in die richtige Kategorie (Heute, Morgen, ...) zurücksortiert und die gegebenenfalls erstellte Kopie der Aufgabe (mit neu berechnetem Fälligkeitsdatum) wird gelöscht.

\subsection{Speichern}
Um Änderungen an den Aufgaben (neu Aufgaben erstellt oder Aufgaben erledigt) zu sichern, muss man auf den Knopf "Speichern" drücken.

\section{Einstellungen}
Um den Assistenzplaner zu konfigurieren gibt es die Einstellungen (siehe Abbildung \ref{fig:Settings}). Hier können Vorname, Nachname und E-Mail-Adresse des Klienten gespeichert werden. Weiterhin kann hier das Standard-Passwort angesehen und editiert werden. Jeder neu angelegte Assistent kann sich mit dem Standard-Passwort beim Assistenzplaner anmelden. Weiterhin kann das Passwort eines Assistenten vom Klienten auf das Standard-Passwort zurückgesetzt werden, falls der Assistent sein Passwort vergessen hat.
Zum Schluss kann der Klient in den Einstellungen festlegen, ob er die Aufgaben-Verwaltung  %TODO Verweis auf Kapitel
nutzen möchte oder nicht.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/Settings.png}
	\caption[ToDo]{Einstellungsmöglichkeiten des Assistenzplaners}
	\label{fig:Settings}
\end{figure}

\section{Kalender}
\label{sec:calendar}
%TODO Wo kommen die Dienstzeiten her und wie sind diese zu interprätieren?

Mit Hilfe des Kalenders (siehe Abbildung \ref{fig:CalendarInput}) kann ein Assistent die Termine eintragen, an denen er Dienst machen kann. Durch einen Klick auf ein Datum ändert sich der Zustand des Datums und damit auch die Hintergrundfarbe.
Rot bedeuetet, der Assistent ist an diesem Datum nicht verfügbar. Gelb bedeutet, dass der Assistent zur Not verfügbar wäre. Grün bedeutet, dass der Assistent an dem Datum uneingeschränkt zur Verfügung steht.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/CalendarInput.png}
	\caption[Kalender für die Eingabe möglicher Termine]{Kalender für die Eingabe der möglichen Termine}
	\label{fig:CalendarInput}
\end{figure}

Mit Hilfe des Buttons "Alle Daten markieren" kann man auf einen Rutsch alle Daten eines Monats grün (bedeutet: Assistent verfügbar) markieren.

Im oberen Bereich sind alle Informationen dargestellt (siehe Abbildung \ref{fig:CalendarNotesFromClient}), die dem Assitenten helfen können. Das sind zum einen die öffentlichen Notizen, die der Klient zum Monat erstellt hat, zum anderen die optionale Nachricht die der Klient an das Team verfasst hat.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/CalendarNotesFromClient.png}
	\caption[ToDo]{Informationen vom Klienten für seine Assistenten}
	\label{fig:CalendarNotesFromClient}
\end{figure}

\section{Dokumentation}
Für die Benutzer des Assistenz-Planers steht jederzeit im rechten oberen Bereich ein Link Dokumentation zur Verfügung.
Der Dokumentations-Inhalt wird individuell erzeugt. Klienten bekommen eine andere Dokumentation zu Gesicht als Assistenten, da beide auf unterschiedliche Weise mit dem Assistenz-Planer arbeiten. Weiterhin werden die Einstellungen berücksichtigt, z. B. wird das Dokumenations-Kapitel über die Aufgaben-Verwaltung nur angezeigt, wenn diese auch verwendet wird.

Im oberen Bereich der Dokumentation werden mit Hilfe von JavaScript automatisch Inhalts-, Abbildungs- und Tabellenverzeichnisse erstellt.
%TODO Weiter erläutern wie Inhaltsverzeichnis, Tabellenverzeichnis und Abbildungsverzeichnis zu Stande kommen?
%TODO Fußnote?

\section{Willkommen-Seite}
Auf der \href{http://www.assistenzplaner.de/master/PHP/index.php}{Willkommen-Seite} (siehe Abbildung \ref{fig:Welcome})wird den Interessenten erklärt, was der Assistenz-Planer ist. Man wird aufgefordert einen neuen Klienten-Zugang einzurichten oder sich mit einem bestehenden Zugang anzumelden.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/Welcome.png}
	\caption[ToDo]{Willkommen-Seite}
	\label{fig:Welcome}
\end{figure}

\section{Anlegen eines neuen Klienten}
\label{sec:AnlegenKlient}
Das Anlegen eines neuen Klienten soll keine Hürde darstellen. Es sollen keine persönlichen Daten erhoben, so dass kein potentieller Nutzer abgeschreckt wird.

Um einen neuen Klienten anzulegen wird man gebeten ein Klientennamen, ein Passwort und die Passwort-Wiederholung einzugeben.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.6]{../Images/Screenshots/NewClient.png}
	\caption[Anlegen eines neuen Klienten]{Anlegen eines neuen Klienten mit Name und Passwort}
	\label{fig:NewClient}
\end{figure}

Bedingungen an einen neuen Klientennamen sind:
\begin{itemize}
\item darf nicht leer sein
\item darf noch nicht vergeben sein
\item darf nur aus Buchstaben und Zahlen bestehen
\end{itemize}

Wenn eine Bedinung nicht erfüllt ist, so wird der Benutzer darauf hingewiesen. Der Inhalt der Textfelder bleibt erhalten, so dass der Benutzer dass Passwort und die Wiederholung dessen nicht nochmal eingeben muss.

Wenn alle Bedingungen erfüllt sind und ein Passwort vergeben wurde, wird im Ordner Data ein Unterordner mit dem Klientennamen angelegt, in dem alle Daten gespeichert werden.
Weiterhin wird in der in der Datei "Data\textbackslash KlientenName\textbackslash Team\textbackslash passwords.txt" das vergebene Passwort verschlüsselt abgespeichert. %TODO Link auf das Kapitel wo das näher erklärt wird.
Der Benutzer bekommt eine Meldung, dass das Anlegen eines neuen Kontos erfolgreich war und wird gebeten sich mit dem neuen Zugang am System anzumelden.

Zu einem späteren Zeitpunkt kann der Klient in den Einstellungen eine E-Mail Adresse angeben, was aber nicht für die Benutzung des Assistenzplaners notwendig ist.

\section{Impressum}
Um eine Abmahnung zu vermeiden wurde dem Assistenzplaner ein Impressum hinzugefügt. Dieses beinhaltet das Impressum mit allen Angaben gemäß § 5 Telemediengesetz, einen Haftungsausschuss (Disclaimer) sowie eine Datenschutzerklärung.

\section{Navigation}
Die Navigation steht immer gut sichtbar oben rechts zur Verfügung. Abhängig davon, ob jemand am System angmeldet ist (siehe Abbildung \ref{fig:NavigationLoggedIn}) oder nicht (siehe Abbildung \ref{fig:NavigationLoggedOut}) stellt sie unterschiedliche Informationen dar.

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/NavigationLoggedIn.png}
	\caption[Navigation bei angemeldetem Assistenten]{Navigation bei angemeldetem Assistenten}
	\label{fig:NavigationLoggedIn}
\end{figure}

\begin{figure}[htb]
	\centering
	\includegraphics[scale=0.5]{../Images/Screenshots/NavigationLoggedOut.png}
	\caption[Navigation ohne Anmmeldung]{Navigation ohne Anmmeldung}
	\label{fig:NavigationLoggedOut}
\end{figure}

%TODO evt. einige der vorherigen sections zusammenfassen

\section{Entwicklung des Algorithmus zur Dienstplanerstellung}
Im folgenden Abschnitt wird erläutert, was die Anforderungen an den Algorithmus zur Dienstplanerstellung sind und wie der Algorithmus entwickelt und iterativ verfeinert worden ist.

\subsection{Anforderungen}
Mindestanforderung an den Algorithmus ist, dass er einen Dienstplan erstellt, der eine hunderprozentige Betreuungsabdeckung erreicht. Für jeden Tag muss ein Assistent für den Dienst und ein Assistent für die Bereitschaft im Dienstplan eingetragen sein.

Nebenbedingungen sind, dass
\begin{itemize}
\item die Vorlieben des Klienten berücksichtig werden (Assistent A lieber am Wochenende, Assistent B bei einem wichtigen Termin, Assistent C bei Fußball-Spielen)
\item die Stundenkontigente der Assistenten gleichmäßig ausgeschöpft werden (vgl. Abschnitt \ref{sec:Stundenkontigent})

\end{itemize}

\subsection{Eingabe}
Der Algorithmus bekommt als Eingabe die Verfügbarkeiten der Assitenten (pro Tag). Diese sind folgendermaßen codiert:
\begin{itemize}
\item 0: Assistent ist nicht verfügbar
\item 1: Assistent ist zur Not verfügbar
\item 10: Assistent ist voll verfügbar
\end{itemize}

Weiterhin hat der Algorithmus Zugriff auf alle Daten, die in der Team-Verwaltung (siehe Abschnitt \ref{sec:TeamVerwaltung}) hinterlegt sind. Welche Version des Algorithmus auf welche Daten zugreift lässt sich Tabelle \ref{tab:inputAlgorithm} entnehmen.

\begin{table}[htb]
\centering
\begin{tabular}{|l|c|c|c|c|c|c|}
\hline 
\multicolumn{1}{|r|}{Version} & 1 & 2 & 3 & 4 & 5 \\ 
\hline 
Priorisierung  & \xmark & \cmark & \cmark & \cmark & \cmark \\  
\hline 
Bevorzugte Wochentage & \xmark & \xmark & \cmark & \cmark & \cmark \\ 
\hline 
Stichwörter & \xmark & \xmark & \xmark & \cmark & \cmark \\ 
\hline 
Stundenkontingent & \xmark & \xmark & \xmark & \xmark & \cmark \\
\hline 
\end{tabular}  
\caption{ToDo} %TODO Beschreibung - Übersicht der Eingabe...
\label{tab:inputAlgorithm}
\end{table}

\subsection{Ausgabe}
Der Algorithmus gibt für jeden Tag des Monats einen Assistenten für den Dienst und einen Assistenten für die Bereitschaft aus.

\subsection{Erste Version - Hundertprozentige Betreuungsabdeckung}
\label{sec:algorithmVersion1}
Die erste Version des Algorithmus berücksichtigt nur die Mindestanforderung (hunderprozentige Betreuungsabdeckung). Der Algorithmus iteriert über alle Tage des Monats und prüft, ob es mindestens zwei Assistenten gibt, die Zeit haben. Der erste freie Assistent bekommt den Dienst, der zweite freie Assistent bekommt die Bereitschaft zugewiesen. Bei dieser ersten Version entsteht ein vollständiger Dienstplan. Der Klient ist den ganzen Monat betreut, jedoch wurden weder die Stundenkontigente noch die Vorlieben des Klienten berücksichtigt.

\subsection{Zweite Version - Berücksichtigung der Priorisierungwerte}
\label{sec:algorithmVersion2}
In der zweiten Version des Algorithmus werden die allgemeinen Vorlieben des Klienten berücksichtig. Für jedes Teammitglied kann der Klient eine Priorisierungswert festlegen (siehe Abschnitt \ref{sec:TeamVerwaltung}).
Es wird eine Punktetabelle erstellt. Die erste Spalte ist der Tag des Monats, jede weitere Spalte repräsentiert die Verfügbarkeit eines Assistenten. Ist der Assistent nicht verfügbar, so wird eine Null eingetragen. Ist der Assistent zur Not verfügbar, so wird eine Eins eingetragen. Ist der Assistent voll verfügbar, so wird eine Zehn eingetragen. Als Beispiel dienen die Zahlen in Tabelle \ref{tab:scoreTable}.
\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Punkte Assistent 1 & Punkte Assistent 2 & Punkte Assistent 3 \\ 
\hline 
1 (Montag) & 0 & 10 & 10 \\ 
\hline 
2 (Dienstag) & 1 & 10 & 0 \\ 
\hline 
3 (Mittwoch) & 10 & 1 & 10 \\ 
\hline 
... & ... & ... & ... \\ 
\hline 
\end{tabular} 
\caption{Punktetabelle}
\label{tab:scoreTable}
\end{table}

Nun wird jeder Verfügbarkeitswert mit dem Priorisierungswert multipliziert. Mit den Prioriserungswerten aus Tabelle \ref{tab:teamMemberPriorities} verändert sich die Punktetabelle.
\begin{table}[htb]
\centering
\begin{tabular}{|c|c|}
\hline 
Assitent & Priorisierungwert \\ 
\hline 
Assitent 1 & 1 \\ 
\hline 
Assitent 2 & 2 \\ 
\hline 
Assitent 3 & 3 \\ 
\hline 
\end{tabular} 
\caption{Priorisierungswerte aus der Team-Verwaltung}
\label{tab:teamMemberPriorities}
\end{table}

Das Ergebnis ist in Tabelle \ref{tab:scoreTable2} zu sehen.
\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Punkte Assistent 1 & Punkte Assistent 2 & Punkte Assistent 3 \\ 
\hline 
1 (Montag) & 0 & 20 & 30 \\ 
\hline 
2 (Dienstag) & 1 & 20 & 0 \\ 
\hline 
3 (Mittwoch) & 10 & 2 & 30 \\ 
\hline 
... & ... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Punktetabelle nach Multiplikation mit Priorisierungswerten}
\label{tab:scoreTable2}
\end{table}

Nach der Erstellung der Punktetabelle iteriert der Algorithmus über alle Tage und gibt dem Assistenten mit der höchsten Punktzahl den Dienst und dem Assistenten mit der zweithöchsten Punktzahl die Bereitschaft.

\subsection{Dritte Version - Berücksichtigung der Wochentage}
\label{sec:algorithmVersion3}
In der dritten Version des Algorithmus werden (zusätzlich zu den Priorisierungwerten) die Wochentage (Montag, Dienstag, ...) berücksichtigt.
Der Klient kann Assistenten an bestimmten Wochentagen priorisieren (vgl. Abschnitt \ref{sec:TeamVerwaltung}).
Der Algorithmus geht genauso vor wie im vorherigen Abschnitt beschrieben. Zusätzlich wird jedoch der Wochentag berücksichtigt. Ist zum Beispiel Assistent 2 am Montag priorisiert, so werden die Werte an allen Montagen in der Punktetabelle verdoppelt (siehe Tabelle \ref{tab:scoreTable3}). Somit steigt die Wahrscheinlichkeit, dass Assistent 2 an einem Montag für den Dienst eingeteilt wird. In dem konkreten Beispiel wird Assistent 2 am Montag den Dienst bekommen, obwohl Assistent 3 eine generell höhere Priorisierung hat.

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|}
\hline 
Tag des Monats & Punkte Assistent 1 & Punkte Assistent 2 & Punkte Assistent 3 \\ 
\hline 
1 (Montag) & 0 & 40 & 30 \\ 
\hline 
2 (Dienstag) & 1 & 20 & 0 \\ 
\hline 
3 (Mittwoch) & 10 & 2 & 30 \\ 
\hline 
... & ... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Punktetabelle nach Berücksichtigung der Wochentage}
\label{tab:scoreTable3}
\end{table}

\subsection{Vierte Version - Berücksichtigung der Stichwörter}
\label{sec:algorithmVersion4}
Der Algorithums arbeitet prinzipiell wie im vorherigen Abschnitt beschrieben. Bei der Erstellung der Punktetabelle werden jedoch die   privaten Bemerkungen im Monatsplan tagesweise nach Stichwörtern durchsucht. Ist ein Stichwort in der Team-Verwaltung bei einem Assistenten hinterlegt, so wird der Punktwert des Assistenten an dem betreffenden Tag verzehnfacht.

Zur Erläuterung ein Beispiel: Angenommen beim Assistenten 3 ist in der Team-Verwaltung das Stichwort "FCB" hinterlegt. Wenn gleichzeitig bei den privaten Bemerkungen am ersten Tag des Monats ein "FCB" enthalten ist, so wird der Punktewert des Assistenten von 30 auf 300 verzehnfacht (vergleiche auch Tabelle \ref{tab:scoreTable4}). Damit hat Assistent 3 die höchste Punktezahl für den ersten Tag des Monats und wird für den Dienst eingeteilt.

\begin{table}[htb]
\centering
\begin{tabular}{|c|c|c|c|c|}
\hline 
Tag des Monats & Private Bemerkungen & Assistent 1 & Assistent 2 & Assistent 3 \\ 
\hline 
1 (Montag) & FCB &0 & 40 & 300 \\ 
\hline 
2 (Dienstag) & & 1 & 20 & 0 \\ 
\hline 
3 (Mittwoch) & & 10 & 2 & 30 \\ 
\hline 
... & ... & ... & ... & ... \\ 
\hline 
\end{tabular}
\caption{Punktetabelle nach Berücksichtigung der Stichwörter}
\label{tab:scoreTable4}
\end{table}

\subsection{Fünfte Version - Berücksichtigung der Stundenkontigente}
\label{sec:algorithmVersion5}
In der letzten Verfeinerung des Algoritmus werden die Stundenkontingente berücksichtigt. Bisher hat der Algorithmus über alle Tage iteriert und jeden Tag isoliert betrachtet. Für jeden Tag wurde ein lokales Optimum gefunden. In der Regel führt dieses Vorgehen allerdings zu einer sehr unausgewogenen Stundenverteilung unterhalb der Assistenten. Um die Stundenkontigente der Assitenten gleichmäßig auzuschöpfen ist es notwendig den gesamten Monat auf einmal zu betrachten. 

Dazu werden die Daten in ein anderes Tabellenformat (siehe Tabelle \ref{tab:scoreTableConverted}) konvertiert. In die erste Spalte werden die Punkte (wenn sie größer Null sind) eingetragen, in der zweiten Spalte steht der Assitent und in der dritten Spalte der Tag.
\begin{table}[htb]
\centering
\begin{tabular}{|l|l|l|}
\hline 
Punkte & Name & Tag \\ 
\hline
1 & Assistent 1 & 2 \\ 
\hline
10 & Assistent 1 & 3 \\ 
\hline
40 & Assistent 2 & 1 \\  
\hline
20 & Assistent 2 & 2 \\ 
\hline
2 & Assistent 2 & 3 \\ 
\hline
300 & Assistent 3 & 1 \\ 
\hline
30 & Assistent 3 & 3 \\ 
\hline 
 
\end{tabular}
\caption{Umgewandelte Punktetabelle}
\label{tab:scoreTableConverted}
\end{table}

Die Punktetabelle wird anschließend randomisiert (durcheinandergewürfelt, gemischt), damit es nicht zur Blockbildung (ein Assistent hat mehrere Tage hintereinander Dienst) bei den Diensten kommt.
Anschließend wird sie nach der ersten Spalte (dem Punktewert) sortiert (siehe Tabelle \ref{tab:scoreTableConvertedAndSorted}).

\begin{table}[htb]
\centering
\begin{tabular}{|l|l|l|}
\hline 
Punkte & Name & Tag \\ 
\hline 
300 & Assistent 3 & 1 \\ 
\hline 
40 & Assistent 2 & 1 \\ 
\hline 
30 & Assistent 3 & 3 \\ 
\hline
20 & Assistent 2 & 2 \\ 
\hline 
10 & Assistent 1 & 3 \\ 
\hline 
2 & Assistent 2 & 3 \\ 
\hline 
1 & Assistent 1 & 2 \\ 
\hline 
\end{tabular}
\caption{Umgewandelte Punktetabelle, randomisiert und sortiert nach Punkten}
\label{tab:scoreTableConvertedAndSorted}
\end{table}

Weiterhin werden alle Stundenkontingent der Assistenten, die in der Team-Verwaltung (siehe Abschnitt \ref{sec:TeamVerwaltung} hinterlegt sind, zusammen addiert.

Dann werden alle Dienst- und Bereitschaftsstunden zusammen addiert.
Sollte die Summe der Dienst- und Bereitschaftsstunden höher als die Summe der Stundenkontigente sein, so wird ein Skalierungsfaktor (Summe der Dienst- und Bereitschaftsstunden durch die Summe der Stundenkontigente) ermittelt und die Stundenkontigente mit dem Skalierungsfaktor multipliziert, sprich die Stundenkontigenten aller Assistenten werden um einen Prozentsatz x erhöht.
%TODO noch weiter beim Beschreiben ausholen?

%Nach den Vorbereitungsarbeiten wird der Kern des Algorithmus gestartet. In einer Schleife mit 1000 Durchläufen werden Dienstpläne erstellt und 

Nach den Vorbereitungsarbeiten wird der Kern des Algorithmus gestartet. Der Algorithmus iteriert über die, nach Punkten sortierte, Tabelle \ref{tab:scoreTableConvertedAndSorted}. In jeder Zeile der Tabelle prüft der Algorithmus ob der Assistent noch genug Stunden zur Verfügung hat und ob der Dienst an dem entsprechenden Tag noch frei ist. Falls beide Bedinungen erfüllt sind, bekommt der Assistent den Dienst eingetragen und seine verfügbaren Stunden werden entsprechend verringert.

Durch die unterschiedlich langen Dienstzeiten von Tag zu Tag und unterschiedlichen Stundenkontigente wird nach dem ersten Durchgang nicht für jeden Tag ein Assistent bestimmt werden können.
Zur Erläuterung ein Beispiel: Angenommen der Monat hätte nur 2 Tage. Die Dienstzeiten betragen 18, 16 und 14 Stunden und die Bereitschafszeiten betragen jeweils 1 Stunde am Tag. Es gibt 2 Assistenten mit Stundenkontigenten von 27 und 24 Stunden, so wäre der Skalierfaktor genau 1 und die Stundenkontigente der Assistenten würden nicht angepasst werden.
Nach dem ersten Durchlauf (bei gleichen Priorisierungswerten) hätte der erste Assistent den 18 Stunden-Dienst und der zweite Assistent den 16 Stunden-Dienst. Der 14 Stunden-Dienst würde bei keinem der beiden Assistenten mehr ins Stundenkontigent passen.

Um die angesprochene Problematik zu lösen wird um den Kern des Algorithmuses eine Schleife hinzugefügt, die einen Toleranzwert (beginnend bei Null Stunden) immer um eine Stunde inkrementiert. Bei der Prüfung, ob der Assistent noch genug Stunden zur Verfügung hat, wird der Toleranzwert zum noch verbleibenden Stundenkontigent hinzugefügt. Die hinzugefügte Schleife endet, sobald für jeden Tag ein Dienst vergeben wurde.

Angwendet auf das oben genannte Beispiel würde der die Schleife im sechsten Durchlauf (Toleranz = 5 Stunden) dem ersten Assistenten den Dienst geben, da die verbleibenden 9 Stunden (27 Stunden aus dem Stundenkontigent abzüglich der 18 Stunden des eingeteilten Dienstes) seines Kontigentes mit der Toleranz von 5 Stunden addiert genau die 14 Stunden Dienstzeit ergibt.

Nachdem alle Dienste vergeben wurden, werden auf dieselbe Weise die Bereitschaften vergeben.

%TODO nachfolgender Absatz versteht außer mir wohl keiner ;-)
Durch das Randomisieren der Liste %TODO Verweis setzen
können mehrere Dienstpläne erstellt werden. Um von den vielen möglichen Dienstplänen einen zu erstellen, der die Stundenkontingente möglichst gleichmäßig ausschöpft wird am Ende "gemessen" wie gut der Dienstplan ist. Die Summe der beiden Toleranzwerte (Dienst und Bereitschaft) wird gebildet. Das theoretische Optimum ist Null. Der Dienstplan mit der niedrigsten Summe wird dem Benutzer angezeigt.

%TODO den endgültigen Algorithmus nochmal komplett im Detail mit Bild (Ablaufdiagramm?) beschreiben

\chapter{Ergebnis}
Der Assistenzplaner wurde als Webanwendung neu erschaffen. Er ist unter anderem in der Lage
\begin{itemize}
\item Assistenz-Teams zu verwalten
\item Dienstpläne zu erstellen
\item Aufgaben für die Assistenz-Teams zu verwalten
\end{itemize}

\chapter{Fazit und Ausblick} % alternativ: Diskussion und Ausblick
* wenn nicht schon in Arbeit eingeflossen, dann hier die Gespräche mit Commit und Matthias Rösch verarbeiten

\section{Mehr Teams}
* Wie kann man noch mehr Menschen bzw. Teams erreichen
%TODO Abschnitt nach Gesprächen schreiben

%TODO Werte wie 2 bei passendem Wochentag oder 10 bei passendem Stichwort evt. nochmal anpassen, wenn mehr Daten zur Verfügung stehen


\section{Mögliche Erweiterungen}
In diesem Abschnitt werden mögliche Erweiterungen des Assistenzplaners vorgestellt und diskutiert.

\subsection{Speicherung in Datenbank}
Derzeit werden die Daten persistent in Dateien gespeichert. Langfristig sollte über eine Speicherung in einer Datenbank nachgedacht weden. Denkbar wäre, alle Daten in einer großen Datenbank zu speichern. Eine weitere Möglichkeit wäre, pro Klient eine SQLite Datei anzulegen. Die zweite Möglichkeit hat den Vorteil, dass die Daten leichter zwischen Entwickler-System und Produktiv-System ausgetauscht werden können.

\subsection{Barrierefreiheit}
\enquote{Barrierefreiheit bezeichnet im deutschen Sprachgebrauch eine Gestaltung der baulichen Umwelt in der Weise, dass sie von Menschen mit Behinderung in der selben Weise genutzt werden kann wie von Menschen ohne Behinderung.} \cite[S. 28]{bremus2013barrierefreiheit}

\enquote{Barrierefreiheit als Thema für Webentwickler und -designer wird auch deshalb immer wichtiger und interessanter, weil die Menschen eine immer höhere Lebenserwartung haben, und gerade Menschen mit Behinderungen immer besser medizinisch versorgt werden können.}  \cite[S. 29]{bremus2013barrierefreiheit} 

\enquote{Eine barrierefreie Webanwendung basiert grundsätzlich auf zwei Säulen: der Accessibility und der Usability} \cite[S. 30]{bremus2013barrierefreiheit}

\enquote{Unter Accessibilty ist die Zugänglichkeit bzw. Erreichbarkeit in Bezug auf eine Anwendung zu verstehen. Sie beschreibt die Fähigkeit, Informationen für jeden Benutzer zugänglich zu machen, unabhängig von technischen und körperlichen Voraussetzungen und Einschränkungen.}  \cite[S. 31]{bremus2013barrierefreiheit} 

\enquote{Die Usability strebt nach der idealen Strukturierung von Informationen, um eine effiziente Nutzung von Informationen und Technologie überhaupt erst zu ermöglichen.} \cite[S. 31]{bremus2013barrierefreiheit}

Da der Assistenzplaner langfristig von vielen körperlich behinderten Menschen bedient werden soll, ist eine Untersuchung der entstanden Softwarelösung auf gute Accessibilty und Usability notwendig. Es muss verifiziert werden dass die Seite im Idealfall barrierefrei, mindestens jedoch barrierearm\footnote{\enquote{Verstärkt setzt sich in der letzten Zeit der Begriff des barrierearmen Webdesigns durch. Das beruht auf der Tatsache, dass eine 100\%-ige Barrierefreiheit einer Webanwendung nicht zu erreichen ist. Verschiedene Benutzerinteressen, Hilfsmittel und technische Voraussetzungen machen die Barrierefreiheit einer Anwendung unmöglich} \cite[S. 29]{bremus2013barrierefreiheit} } ist.

\subsection{AJAX tiefer verwurzeln}
Derzeit wird AJAX nur auf Knopfdruck eingesetzt. An vielen Stellen muss der Benutzer explizit auf einen Speichern-Button drücken um die eingegebenen Daten persistent zu sichern. In einer moderenen Webanwendung ist dies ungewöhnlich und kann schon als benutzerunfreundlich bezeichnet werden. Besser wäre es, wenn Änderungen, die der Benutzer vornimmt direkt per AJAX an den Server geschickt werden und der Server die Daten direkt persistent ablegt.

\subsection{Internationalisierung}
Derzeit ist der Assistenzplaner komplett in Deutsch. Um auch andere Sprachen zu unterstützen wäre ein grundlegender Umbau notwendig. Weiterführende Informationen finden sich in der offiziellen \href{http://php.net/manual/en/book.intl.php}{PHP-Dokumentation}\footnote{http://php.net/manual/en/book.intl.php - zuletzt abgerufen am 21.08.2014}

\subsection{Feiertage importieren}
Für die Erstellung des Monatsplans wäre es für den Klienten hilfreich, wenn man Feiertage importieren könnte. Im Idealfall würde sogar das Bundesland, in dem der Klient lebt, berücksichtigt werden.
Zum Beispiel könnte man auf der Webseite \href{http://www.ifeiertage.de}{iFeiertage}\footnote{http://www.ifeiertage.de - zuletzt abgerufen am 21.08.2014} einen Feiertage-Kalender abonnieren. Dieser wäre als iCalendar verfügbar:

\qquad \texttt{webcal://ifeiertage.de/rp-.ics}

Denkbar wäre, dass der Klient beim Monatsplan einen Button \enquote{Feiertage importieren} zur Verfügung gestellt bekommt. Betätigt der Klient diesen Knopf, so werden alle Feiertage für diesen Monat in den öffentlichen Notizen eingetragen. Weiterhin werden die Dienstzeiten auf 24-stündige Dienste angepasst, da der Klient an Feiertagen rund um die Uhr Assistenz hat.

\subsection{iCalendar Export}
%TODO Erklärung und Link ICS
Für die Assistenten wäre es interessant den Dienstplan im ICS Format abbonieren zu können. So hätten die Assistenten jederzeit die aktuelleste Version und ihre Dienst- und Bereitschaftszeiten im Online-Kalender.
% -> auch auf dem SmartPhone etc.

\subsection{Logging}
Derzeit ist nicht nachvollziehbar, wer wann was am Assistenzplaner gemacht hat. Für zukünftigen Support und Fehlersuche wäre es wünschenswert ein Log-File zu haben, in dem man sehen kann, welche Änderungen in der letzten Zeit gemacht wurden und von wem diese durchgeführt wurden.

\subsection{Verwendung von Frameworks}
%TODO überarbeiten


\subsection{Responsive Webdesign}
Zillgens 8
* Webseiten flexibel und raktionsfähig zu gestalten
* steigende Anzahl verschiedener Display-Größen und Geräte angemessen zu reagieren
%TODO noch mehr aus dem Buch zitieren?

Auf Desktops und Tablets wird der Assistenzplaner gut dargestellt und kann gut bedient werden. Auf Smart-Phones ist das Aussehen und die Bedienung verbesserungswürdig.
Mit Hilfe von Responsive Webdesign könnten unterschiedliche Geräte-Kategegorien unterstützt werden.
%TODO Link setzen: http://de.wikipedia.org/wiki/Responsive_Webdesign

\subsection{Mobiles Webdesign}
%Abgrenzung zu Responsive Webdesign?
Bieh 67
Horizontal umdenken - hin zur Linearisierung

* Touch kein hover

\subsection{Monatsplan und Dienstplan zu einer Einheit verschmelzen}
%TODO nochmal darüber nachdenken, wie man das umsetzen könnte und dann hier beschreiben

\subsection{Team Übersicht überarbeiten}
Derzeit wird das Team mit Hilfe einer Tabelle verwaltet. Die Tabelle ist mit der Zeit immer breiter geworden und unübersichtlich geworden. Eine Möglichkeit die Daten der Assistenten anders grafisch aufzubereiten wären Visitenkarten.

\subsection{Inline-Dokumentation}
Derzeit ist der Assistenzplaner für Klienten und Assistenten auf einer zentralen Seite dokumentiert.
Wünschenswert wäre es, wenn die Informationen zusätzlich über den gesamten Assistenzplaner an geeigneter Stelle leicht zugänglich verteilt wären. Vorstellbar wäre, dass an einigen Stellen im Assistenzplaner ein Hilfe-Icon plaziert wird, auf das man klicken kann und dann in einem Pop-Up kontextbezogene Hilfe angezeigt bekommt.

\subsection{Aufgaben-Verwaltung erweitern}
Die Aufgaben-Verwaltung wurde nur rudimentär entwickelt. Schon zu einem frühen Zeitpunkt hat der Haupt-Stakeholder entschieden die Aufgaben-Verwaltung nicht für sein Team einzusetzen, da der Tooling-Overhead zu groß wäre. Aufgrund dieser Entscheidung wurde die Entwicklung schon nach einer Woche wieder auf Eis gelegt. Für anders organisierte Teams wäre es aber evt. von Vorteil die Aufgaben-Verwaltung zu nutzen. Mögliche Erweiterungen werden in den folgenden Abschnitten dargestellt.

\subsubsection{Hervorhebungen bei  Datum-Auswahl}
In der Datum-Auswahl sollte der aktuelle Tag sowie der gewählte Tag farblich hervorgehoben werden.

\subsubsection{Aufgaben editieren}
Aufgaben lassen sich derzeit nur anlegen, nicht im Nachhinein verändern. Eine Editierfunktion wäre von großem Nutzen.

\subsubsection{Aufgabe löschen}
Aufgaben lassen sich derzeit nur anlegen, aber nicht löschen.

\subsubsection{Übersicht über erledigte Aufgaben}
Von Vorteil (gerade für die Leistungserbringungs-Nachweise) wäre es, wenn man nachvollziehen kann, welcher Assistent wann was erledigt hat.

\listoftables % Tabellenverzeichnis
\listoffigures
\renewcommand{\lstlistlistingname}{Verzeichnis der Listings}
\lstlistoflistings % Listings-Verzeichnis

\input{Glossar}
\let\stdchapter\chapter %Nummer vor Abkürzungsverzeichnis (speichern der chapter Umgebung)
\def\chapter*#1{\stdchapter{#1}} % neue Definition von chapter
\printnomenclature
\label{sec:Glossar}
\let\chapter\stdchapter % zurück zur alten Definition

% Literaturverzeichnis ---------------------------------------------------------
%   Das Literaturverzeichnis wird aus der BibTeX-Datenbank
%   erstellt.
% ------------------------------------------------------------------------------

\bibliography{../BibTeX/literatur} % Aufruf: bibtex Masterarbeit
\bibliographystyle{natdin} % DIN-Stil des Literaturverzeichnisses

% Anhang -----------------------------------------------------------------------
%   Die Inhalte des Anhangs werden analog zu den Kapiteln inkludiert.
%   Dies geschieht in der Datei "Anhang.tex".
% ------------------------------------------------------------------------------
\begin{appendix}
\clearpage
\chapter{Anhang}
\label{sec:Anhang}
% Rand der Aufzählungen in Tabellen anpassen
\setdefaultleftmargin{1em}{}{}{}{}{}

\section{Inhalt der beiligenden CD}
* Ordnerstruktur erklären

\section{Verzeichnisstruktur auf Server}
*PHP
*HTML
*JavaScript
* Data
...


\section{Verwendete Software}
* PHP 5.5.14 -> http://assistenzplaner.de/PHP/phpInfo.php
   * PhpMailer
   * FPDF

* PhpStorm
* Enterprise Architect
* GitHub
* Cyberduck (FTP-Client)

* Firefox, Safari, FireBug

\section{Verwendete Hardware}
\subsection{Entwickler-Laptop}
%TODO diesen Abschnitt wirklich schreiben?
MacBook Pro

\subsection{Server}
%phpInfo ausführen und informationen abschreiben

\subsection{Webseiten}
% wichtige verwendete Webseiten-Zitate als PDF abspeichern und einbinden - kann man sich damit das "zuletzt abgerufen am" sparen?

    
    
% \input{Quellcode}
\end{appendix}

% Index ------------------------------------------------------------------------
%   Zum Erstellen eines Index, die folgende Zeile auskommentieren.
% ------------------------------------------------------------------------------
%\printindex

\end{document}
